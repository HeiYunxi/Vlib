import{a as m,n as L,z as S,r as B,b as c,c as V,d as D,e,w as o,f,h as r,u as p,D as E,A as q,E as h,G as T}from"./index.cc30dbfe.js";import{u as y}from"./lab.fc26e40c.js";import{F as A}from"./FileSaver.min.212c967c.js";import{u as F,w as M}from"./xlsx.030dfc28.js";import"./http.f2a51fde.js";const $=f("p",null,"\u5B9E\u9A8C\u5BA4\u7BA1\u7406",-1),O={__name:"Index",setup(j){m(!1);const b=L();S(()=>{d()});let u=m([]),w=m(0);const s=B({pageNum:1,pageSize:10,labName:""}),d=async()=>{const l=await y.getLabList(s);console.log(l),u.value=l.data.data,console.log(l.data.data),w.value=l.data.total},x=l=>{s.pageSize=l,d()},C=l=>{s.pageNum=l,d()},_=()=>{s.pageNum=1,d()},v=l=>{q.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u5B9E\u9A8C\u5BA4\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await y.delLab({labId:l})).data?(h.success("\u5220\u9664\u5B9E\u9A8C\u5BA4\u6210\u529F"),d()):h.error("\u5220\u9664\u5B9E\u9A8C\u5BA4\u5931\u8D25")}).catch(()=>{h({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})},N=()=>{var l=F.table_to_book(document.querySelector("#Lab-table-export"),{raw:!0}),t=M(l,{bookType:"xlsx",book:!0,type:"array"});try{A.saveAs(new Blob([t],{type:"appliction/octet-stream"}),"\u5B9E\u9A8C\u5BA4\u5217\u8868.xlsx")}catch(n){typeof console<"u"&&console.log(n,t)}return t};return(l,t)=>{const n=c("el-button"),k=c("el-input"),a=c("el-table-column"),g=c("el-table"),z=c("el-pagination"),I=c("el-card");return V(),D("div",null,[$,e(I,null,{default:o(()=>[e(k,{style:{width:"440px"},onClear:_,clearable:"",modelValue:s.labName,"onUpdate:modelValue":t[1]||(t[1]=i=>s.labName=i),placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9A8C\u5BA4\u540D\u79F0",class:"input-with-select"},{append:o(()=>[e(n,{icon:"Search",onClick:t[0]||(t[0]=i=>_())})]),_:1},8,["modelValue"]),r(" \xA0\xA0\xA0 "),e(n,{type:"primary",onClick:t[2]||(t[2]=()=>p(b).push({path:"/lab/save",query:{labId:""}}))},{default:o(()=>[r("\u65B0\u589E\u5B9E\u9A8C\u5BA4 ")]),_:1}),e(n,{class:"btn-seal",onClick:N},{default:o(()=>[r("\u5BFC\u51FA\u7ED3\u679C")]),_:1}),r(" \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 \xA0\xA0\xA0\xA0\xA0\xA0\xA0 \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 "),e(g,{id:"Lab-table",data:p(u),border:"",style:{width:"100%","margin-top":"20px"}},{default:o(()=>[e(a,{class:"table",id:"col",prop:"labId",label:"ID",width:"50"}),e(a,{class:"table",id:"col",prop:"labNumber",label:"\u5B9E\u9A8C\u5BA4\u7F16\u53F7",width:"150"}),e(a,{class:"table",id:"col",prop:"labName",label:"\u5B9E\u9A8C\u5BA4\u540D\u79F0",width:"150"}),e(a,{class:"table",id:"col",prop:"position",label:"\u4F4D\u7F6E",width:"80"}),e(a,{class:"table",id:"col",prop:"capacity",label:"\u5BB9\u91CF",width:"100"}),e(a,{class:"table",id:"col",prop:"area",label:"\u9762\u79EF",width:"80"}),e(a,{class:"table",id:"col",prop:"managerName",label:"\u7BA1\u7406\u6559\u5E08",width:"100"}),e(a,{label:"\u64CD\u4F5C",width:"430"},{default:o(i=>[e(n,{type:"danger",size:"small",onClick:G=>v(i.row.labId)},{default:o(()=>[r(" \u5220\u9664 ")]),_:2},1032,["onClick"]),e(n,{size:"small",type:"primary",onClick:()=>p(b).push({path:"/lab/detail",query:{labId:i.row.labId}})},{default:o(()=>[r(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"]),e(n,{size:"small",type:"success",onClick:()=>p(b).push({path:"/lab/detail",query:{labId:i.row.labId,edit:1}})},{default:o(()=>[r(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),E(f("div",null,[e(g,{id:"Lab-table-export",data:p(u),border:"",style:{width:"100%","margin-top":"20px"}},{default:o(()=>[e(a,{class:"table",id:"col",prop:"labId",label:"ID",width:"50"}),e(a,{class:"table",id:"col",prop:"labNumber",label:"\u5B9E\u9A8C\u5BA4\u7F16\u53F7",width:"150"}),e(a,{class:"table",id:"col",prop:"labName",label:"\u5B9E\u9A8C\u5BA4\u540D\u79F0",width:"150"}),e(a,{class:"table",id:"col",prop:"position",label:"\u4F4D\u7F6E",width:"80"}),e(a,{class:"table",id:"col",prop:"capacity",label:"\u5BB9\u91CF",width:"100"}),e(a,{class:"table",id:"col",prop:"area",label:"\u9762\u79EF",width:"80"}),e(a,{class:"table",id:"col",prop:"managerName",label:"\u7BA1\u7406\u6559\u5E08",width:"100"})]),_:1},8,["data"])],512),[[T,!1]]),e(z,{style:{"margin-top":"20px"},"current-page":s.pageNum,"page-size":s.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:p(w),onSizeChange:x,onCurrentChange:C},null,8,["current-page","page-size","total"])]),_:1})])}}};export{O as default};
