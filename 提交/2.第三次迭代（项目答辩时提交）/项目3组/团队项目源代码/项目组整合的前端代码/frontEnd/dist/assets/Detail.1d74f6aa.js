import{m as A,n as F,r as g,a as u,o as z,b as r,c as v,d as k,e as t,w as n,f as h,h as i,u as w,E as y}from"./index.cc30dbfe.js";import{u as b}from"./menu.895df529.js";import"./http.f2a51fde.js";const P={class:"card-header"},S=h("span",null,"\u83DC\u5355\u8BE6\u60C5",-1),T={key:0},j={key:1},G={style:{"text-align":"center"}},H={slot:"footer",class:"dialog-footer",style:{"text-align":"center","padding-top":"20px"}},W={__name:"Detail",setup(J){const f=A(),x=F(),l=g({menuId:"",cname:"",ename:"",path:"",component:"",icon:"",pid:"",sort:""}),C=u([]);z(async()=>{if(f.query.menuId){const a=await b.getMenuDetail({menuId:f.query.menuId});console.log(a.data.data),C.value=a.data.data,l.menuId=a.data.data[0].menuId,l.cname=a.data.data[0].cname,l.ename=a.data.data[0].ename,l.path=a.data.data[0].path,l.component=a.data.data[0].component,l.icon=a.data.data[0].icon,l.pid=a.data.data[0].pid,l.sort=a.data.data[0].sort}});const _=u(),I=g({cname:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u83DC\u5355\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),U=()=>{!_||_.value.validate(async a=>{if(a){const e=await b.updateMenu(l);e.data!=null?e.data?(y.info("\u83DC\u5355\u4FEE\u6539\u6210\u529F"),x.push("/menu/list")):y.error("\u83DC\u5355\u4FEE\u6539\u5931\u8D25"):y.error("\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF")}else return!1})},p=u(!1),V=u([]),D=g({children:"children",label:"label"}),q=u([]),R=u([]),m=u(null),M=async a=>{console.log(a);const e=await b.getMenuAll({});e.data!=null&&(V.value=e.data.data,console.log(V.value)),p.value=!0},N=()=>{if(m.value){const a=m.value.getCheckedKeys();if(a.length>1){y.error("\u53EA\u80FD\u9009\u62E9\u4E00\u4E2A\u7236\u8282\u70B9");return}l.pid=a[0],console.log("\u9009\u4E2D\u7684\u952E:",a[0]),p.value=!1}if(m.value){const a=m.value.getCheckedNodes();console.log("\u9009\u4E2D\u7684node:",a)}};return(a,e)=>{const c=r("el-button"),d=r("el-input"),s=r("el-form-item"),B=r("el-form"),E=r("el-card"),K=r("el-tree"),$=r("el-dialog");return v(),k("div",null,[t(E,{class:"box-card"},{header:n(()=>[h("div",P,[S,i("\xA0\xA0\xA0 "),t(c,{size:"mini",style:{float:"right"},onClick:e[0]||(e[0]=o=>w(x).go(-1))},{default:n(()=>[i("\u8FD4\u56DE")]),_:1})])]),default:n(()=>[t(B,{model:l,rules:I,ref_key:"ruleFormRef",ref:_},{default:n(()=>[t(s,{label:"\u83DC\u5355ID:"},{default:n(()=>[t(d,{modelValue:l.menuId,"onUpdate:modelValue":e[1]||(e[1]=o=>l.menuId=o),style:{width:"300px"},readonly:!0,class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u83DC\u5355\u540D\u79F0:"},{default:n(()=>[t(d,{modelValue:l.cname,"onUpdate:modelValue":e[2]||(e[2]=o=>l.cname=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u83DC\u5355\u82F1\u6587\u540D:"},{default:n(()=>[t(d,{modelValue:l.ename,"onUpdate:modelValue":e[3]||(e[3]=o=>l.ename=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u82F1\u6587\u540D",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u83DC\u5355\u8BF7\u6C42\u5730\u5740:"},{default:n(()=>[t(d,{modelValue:l.path,"onUpdate:modelValue":e[4]||(e[4]=o=>l.path=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u8BF7\u6C42\u5730\u5740",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u83DC\u5355\u8DEF\u5F84:"},{default:n(()=>[t(d,{modelValue:l.component,"onUpdate:modelValue":e[5]||(e[5]=o=>l.component=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u8DEF\u5F84",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u83DC\u5355\u56FE\u6807:"},{default:n(()=>[t(d,{modelValue:l.icon,"onUpdate:modelValue":e[6]||(e[6]=o=>l.icon=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u83DC\u5355\u7236ID:"},{default:n(()=>[t(d,{readonly:"",modelValue:l.pid,"onUpdate:modelValue":e[7]||(e[7]=o=>l.pid=o),style:{width:"300px",enable:"false"},placeholder:"\u8BF7\u5355\u51FB\u9009\u62E9\u7236\u83DC\u5355",class:"input-with-select"},null,8,["modelValue"]),t(c,{type:"primary",onClick:e[8]||(e[8]=o=>M())},{default:n(()=>[i("\u9009\u62E9")]),_:1})]),_:1}),t(s,{label:"\u83DC\u5355\u6392\u5E8F:"},{default:n(()=>[t(d,{modelValue:l.sort,"onUpdate:modelValue":e[9]||(e[9]=o=>l.sort=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u82F1\u6587\u540D",class:"input-with-select"},null,8,["modelValue"])]),_:1}),w(f).query.menuId==""||w(f).query.edit=="1"?(v(),k("p",T,[t(c,{type:"primary",onClick:e[10]||(e[10]=o=>U())},{default:n(()=>[i("\u4FDD\u5B58")]),_:1})])):(v(),k("p",j))]),_:1},8,["model","rules"])]),_:1}),t($,{title:"\u9009\u62E9\u7236\u7EA7\u83DC\u5355",modelValue:p.value,"onUpdate:modelValue":e[12]||(e[12]=o=>p.value=o),width:"700px","before-close":a.handleClose},{default:n(()=>[h("div",G,[t(K,{data:V.value,"check-strictly":!0,"show-checkbox":"","default-expand-all":!0,ref_key:"treeRef",ref:m,"node-key":"id","default-expanded-keys":R.value,"default-checked-keys":q.value,props:D},null,8,["data","default-expanded-keys","default-checked-keys","props"])]),h("div",H,[t(c,{onClick:e[11]||(e[11]=o=>p.value=!1)},{default:n(()=>[i("\u53D6 \u6D88")]),_:1}),t(c,{type:"primary",onClick:N},{default:n(()=>[i("\u786E \u5B9A")]),_:1})])]),_:1},8,["modelValue","before-close"])])}}};export{W as default};
