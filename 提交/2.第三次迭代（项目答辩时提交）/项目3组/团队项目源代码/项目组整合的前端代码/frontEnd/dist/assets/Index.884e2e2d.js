import{a as h,n as V,z as D,r as T,b as p,c as A,d as F,e,w as s,f as g,u as r,h as u,D as M,A as $,E as _,G as L}from"./index.cc30dbfe.js";import{u as v}from"./equipment.1444bede.js";import{F as U}from"./FileSaver.min.212c967c.js";import{u as j,w as G}from"./xlsx.030dfc28.js";import"./http.f2a51fde.js";const R=g("p",null,"\u865A\u62DF\u8BBE\u5907\u7BA1\u7406",-1),H=g("span",null,"\u67E5\u770B\u53EF\u7528\u8BBE\u5907\u4FE1\u606F",-1),Y={__name:"Index",setup(J){const d=h(!1),m=V();D(()=>{c()});let b=h([]),q=h(0);const n=T({pageNum:1,pageSize:10,flag:!1,equipmentName:""}),c=async()=>{const a=await v.getSimulationEquipmentList(n);console.log(a),b.value=a.data.data,console.log(a.data.data),q.value=a.data.total},x=a=>{n.pageSize=a,c()},C=a=>{n.pageNum=a,c()},w=a=>{n.pageNum=1,n.flag=a,c()},N=a=>{$.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u4EFF\u771F\u8BBE\u5907\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await v.delSimulationEquipment({equipmentId:a})).data?(_.success("\u5220\u9664\u4EFF\u771F\u8BBE\u5907\u6210\u529F"),c()):_.error("\u5220\u9664\u4EFF\u771F\u8BBE\u5907\u5931\u8D25")}).catch(()=>{_({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})},k=(a,l,o,f)=>{if(o===1)return"\u53EF\u7528";if(o===2)return"\u6B63\u5728\u7EF4\u62A4"},S=(a,l,o,f)=>{if(o===1)return"\u6559\u5B66\u8BBE\u5907";if(o===2)return"\u6F14\u793A\u8BBE\u5907"},z=()=>{var a=j.table_to_book(document.querySelector("#Equipment-table-export"),{raw:!0}),l=G(a,{bookType:"xlsx",book:!0,type:"array"});try{U.saveAs(new Blob([l],{type:"appliction/octet-stream"}),"\u8BBE\u5907\u5217\u8868.xlsx")}catch(o){typeof console<"u"&&console.log(o,l)}return l};return(a,l)=>{const o=p("el-button"),f=p("el-input"),E=p("el-switch"),t=p("el-table-column"),y=p("el-table"),I=p("el-pagination"),B=p("el-card");return A(),F("div",null,[R,e(B,null,{default:s(()=>[e(f,{style:{width:"440px"},onClear:w,clearable:"",modelValue:n.equipmentName,"onUpdate:modelValue":l[1]||(l[1]=i=>n.equipmentName=i),placeholder:"\u8BF7\u8F93\u5165\u4EFF\u771F\u8BBE\u5907\u540D\u79F0",class:"input-with-select"},{append:s(()=>[e(o,{icon:"Search",onClick:l[0]||(l[0]=i=>w(d.value))})]),_:1},8,["modelValue"]),e(o,{type:"primary",onClick:l[2]||(l[2]=()=>r(m).push({path:"/equipment/save",query:{equipmentId:""}}))},{default:s(()=>[u("\u65B0\u589E\u8BBE\u5907 ")]),_:1}),e(o,{class:"btn-seal",onClick:z},{default:s(()=>[u("\u5BFC\u51FA\u7ED3\u679C")]),_:1}),u(" \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 \xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0 \xA0\xA0\xA0\xA0\xA0\xA0 "),H,e(E,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=i=>d.value=i),"active-color":"#4a90e2","inactive-color":"#9b9b9b",onClick:l[4]||(l[4]=i=>w(d.value))},null,8,["modelValue"]),e(y,{id:"Equipment-table",data:r(b),border:"",style:{width:"100%","margin-top":"20px"}},{default:s(()=>[e(t,{class:"table",id:"col",prop:"equipmentId",label:"ID",width:"50"}),e(t,{class:"table",id:"col",prop:"equipmentName",label:"\u4EFF\u771F\u8BBE\u5907\u540D\u79F0",width:"150"}),e(t,{class:"table",id:"col",prop:"equipmentNumber",label:"\u4EFF\u771F\u8BBE\u5907\u7F16\u53F7",width:"150"}),e(t,{class:"table",id:"col",prop:"purpose",label:"\u7528\u9014",width:"80"}),e(t,{class:"table",id:"col",prop:"software_system",label:"\u8F6F\u4EF6\u7CFB\u7EDF",width:"100"}),e(t,{prop:"software_version",label:"\u8F6F\u4EF6\u7248\u672C",width:"100"}),e(t,{formatter:k,class:"table",id:"col",prop:"status",label:"\u72B6\u6001",width:"100"}),e(t,{class:"table",id:"col",prop:"supplierName",label:"\u4F9B\u5E94\u5546",width:"180"}),e(t,{formatter:S,class:"table",id:"col",prop:"type",label:"\u7C7B\u578B",width:"100"}),e(t,{label:"\u64CD\u4F5C",width:"200"},{default:s(i=>[e(o,{type:"danger",size:"small",onClick:K=>N(i.row.equipmentId)},{default:s(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"]),e(o,{size:"small",type:"primary",onClick:()=>r(m).push({path:"/equipment/detail",query:{equipmentId:i.row.equipmentId}})},{default:s(()=>[u(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"]),e(o,{size:"small",type:"success",onClick:()=>r(m).push({path:"/equipment/detail",query:{equipmentId:i.row.equipmentId,edit:1}})},{default:s(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),M(g("div",null,[e(y,{id:"Equipment-table-export",data:r(b),border:"",style:{width:"100%","margin-top":"20px"}},{default:s(()=>[e(t,{class:"table",id:"col",prop:"equipmentId",label:"ID",width:"50"}),e(t,{class:"table",id:"col",prop:"equipmentName",label:"\u4EFF\u771F\u8BBE\u5907\u540D\u79F0",width:"150"}),e(t,{class:"table",id:"col",prop:"equipmentNumber",label:"\u4EFF\u771F\u8BBE\u5907\u7F16\u53F7",width:"150"}),e(t,{class:"table",id:"col",prop:"purpose",label:"\u7528\u9014",width:"80"}),e(t,{class:"table",id:"col",prop:"software_system",label:"\u8F6F\u4EF6\u7CFB\u7EDF",width:"100"}),e(t,{prop:"software_version",label:"\u8F6F\u4EF6\u7248\u672C",width:"100"}),e(t,{class:"table",id:"col",prop:"status",label:"\u72B6\u6001",width:"80"}),e(t,{class:"table",id:"col",prop:"supplierName",label:"\u4F9B\u5E94\u5546",width:"80"}),e(t,{class:"table",id:"col",prop:"type",label:"\u7C7B\u578B",width:"80"})]),_:1},8,["data"])],512),[[L,!1]]),e(I,{style:{"margin-top":"20px"},"current-page":n.pageNum,"page-size":n.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:r(q),onSizeChange:x,onCurrentChange:C},null,8,["current-page","page-size","total"])]),_:1})])}}};export{Y as default};
