import{m as E,n as U,r as y,a as V,o as z,b as d,c as f,d as g,e as t,w as s,f as b,u as c,h as p,t as C,E as m}from"./index.cc30dbfe.js";import{u as $}from"./user.778b4438.js";import"./http.f2a51fde.js";const k={class:"card-header"},A=b("span",null,"\u7528\u6237\u4FE1\u606F\u6DFB\u52A0",-1),B={key:0},F={key:1},S={__name:"Add",setup(R){const w=E(),_=U(),r=y({userId:"",userName:"",account:"",email:"",password:"",intro:"",phone:"",type:""});V([]),z(async()=>{r.userName="",r.account="",r.password="",r.email="",r.intro="",r.phone="",r.type="0"});const i=V(),h=y({userName:[{required:!0,message:"\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",transform:a=>a,trigger:"blur"},{type:"string",message:"\u8BF7\u8F93\u5165\u4E0D\u5305\u542B\u7A7A\u683C\u7684\u5B57\u7B26",trigger:"blur",transform(a){return a&&a.indexOf(" ")===-1?a:!1}},{trigger:"blur",validator:(a,e,l)=>{var u=/(?=.*\d)(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{6,16}/;u.test(e)?l():l(new Error("\u5BC6\u7801\u5FC5\u987B\u7531\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u7279\u6B8A\u5B57\u7B26\u7EC4\u5408,\u8BF7\u8F93\u51656-16\u4F4D"))}}],account:[{required:!0,message:"\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],phone:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",trigger:"blur"},{validator:function(a,e,l){/^1[34578]\d{9}$/.test(e)==!1?l(new Error("\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF")):l()},trigger:"blur"}],email:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1",trigger:"blur"},{validator:function(a,e,l){/^\w{1,64}@[a-z0-9\-]{1,256}(\.[a-z]{2,6}){1,2}$/i.test(e)==!1?l(new Error("\u90AE\u7BB1\u683C\u5F0F\u9519\u8BEF")):l()},trigger:"blur"}],intro:[{validator:function(a,e,l){e.length>200?l(new Error("\u7B80\u4ECB\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7200\u5B57")):l()},trigger:"blur"}]}),v=()=>{!i||i.value.validate(async a=>{if(a){const e=await $.saveUser(r);e.data!=null?e.data?e.data.data==0?m.error("\u8BE5\u8D26\u53F7\u5DF2\u6CE8\u518C"):(m.info("\u65B0\u589E\u7528\u6237\u6210\u529F"),_.push("/user/list")):m.error("\u65B0\u589E\u5931\u8D25"):m.error("\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF")}else return m.error("\u683C\u5F0F\u9519\u8BEF "),!1})},x=()=>{!i||i.value.resetFields()};return(a,e)=>{const l=d("el-button"),u=d("el-form-item"),n=d("el-input"),N=d("el-form"),q=d("el-card");return f(),g("div",null,[t(q,null,{header:s(()=>[b("div",k,[A,t(l,{size:"mini",style:{float:"right"},onClick:e[0]||(e[0]=o=>c(_).go(-1))},{default:s(()=>[p("\u8FD4\u56DE")]),_:1}),p("\xA0\xA0\xA0 ")])]),default:s(()=>[t(N,{model:r,rules:h,ref_key:"ruleFormRef",ref:i},{default:s(()=>[c(w).query.edit=="1"?(f(),g("p",B,[t(u,{label:"\u7F16\u53F7:"},{default:s(()=>[p(C(c(w).query.userId),1)]),_:1})])):(f(),g("p",F)),t(u,{label:"\u7528\u6237\u540D:",prop:"userName"},{default:s(()=>[t(n,{modelValue:r.userName,"onUpdate:modelValue":e[1]||(e[1]=o=>r.userName=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(u,{label:"\u8D26\xA0\xA0\xA0\xA0\u53F7:",prop:"account"},{default:s(()=>[t(n,{modelValue:r.account,"onUpdate:modelValue":e[2]||(e[2]=o=>r.account=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(u,{label:"\u90AE\xA0\xA0\u7BB1:",prop:"email"},{default:s(()=>[t(n,{modelValue:r.email,"onUpdate:modelValue":e[3]||(e[3]=o=>r.email=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(u,{label:"\u5BC6\xA0\xA0\xA0\xA0\u7801:",prop:"password"},{default:s(()=>[t(n,{modelValue:r.password,"onUpdate:modelValue":e[4]||(e[4]=o=>r.password=o),type:"password",style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),t(u,{label:"\u7B80\xA0\xA0\xA0\xA0\u4ECB:",prop:"intro"},{default:s(()=>[t(n,{modelValue:r.intro,"onUpdate:modelValue":e[5]||(e[5]=o=>r.intro=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(u,{label:"\u624B\u673A\u53F7:",prop:"phone"},{default:s(()=>[t(n,{modelValue:r.phone,"onUpdate:modelValue":e[6]||(e[6]=o=>r.phone=o),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(l,{type:"primary",onClick:e[7]||(e[7]=o=>v())},{default:s(()=>[p("\u4FDD\u5B58")]),_:1}),t(l,{type:"primary",onClick:e[8]||(e[8]=o=>x())},{default:s(()=>[p("\u91CD\u7F6E")]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}};export{S as default};
