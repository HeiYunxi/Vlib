import{u as w}from"./equipment.1444bede.js";import{a as u,n as E,m as V,o as B,z as D,r as v,b as r,c as M,d as L,e as t,w as o,f as R,h as f,u as d,B as T,E as m}from"./index.cc30dbfe.js";import"./http.f2a51fde.js";const $=R("p",null,"\u865A\u62DF\u8BBE\u5907\u9009\u62E9",-1),H={__name:"booking",setup(j){let c=u();const q=E(),i=V(),y=u(!1);u([]),B(async()=>{i.query.userId!=null&&(c.value=i.query.userId,sessionStorage.setItem("userId",i.query.userId)),i.query.userId==null&&(c.value=sessionStorage.getItem("userId")),g.userId=c.value}),D(()=>{p()});let h=u([]),b=u(0);const g=v({userId:"",equipmentId:""}),a=v({pageNum:1,pageSize:10,flag:!0,equipmentName:""}),p=async()=>{const e=await w.getSimulationEquipmentList(a);console.log(e),h.value=e.data.data,console.log(e.data.data),b.value=e.data.total},C=e=>{a.pageSize=e,p()},z=e=>{a.pageNum=e,p()},I=e=>{a.pageNum=1,a.flag=e,p()},N=async e=>{g.equipmentId=e;const n=await w.bookingEquipment(g);n.data!=null?n.data?n.data.data==0?m.error("\u8BE5\u8D26\u53F7\u5DF2\u6CE8\u518C"):(m.success("\u9884\u5B9A\u6210\u529F"),q.push("/equipment/booking")):m.error("\u9884\u5B9A\u5931\u8D25"):m.error("\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF")};return(e,n)=>{const _=r("el-button"),k=r("el-input"),l=r("el-table-column"),S=r("el-pagination"),x=r("el-card");return M(),L("div",null,[$,t(x,null,{default:o(()=>[t(k,{style:{width:"440px"},onClear:I,clearable:"",modelValue:a.equipmentName,"onUpdate:modelValue":n[1]||(n[1]=s=>a.equipmentName=s),placeholder:"\u8BF7\u8F93\u5165\u4EFF\u771F\u8BBE\u5907\u540D\u79F0",class:"input-with-select"},{append:o(()=>[t(_,{icon:"Search",onClick:n[0]||(n[0]=s=>I(y.value))})]),_:1},8,["modelValue"]),f(" \xA0\xA0\xA0 "),t(d(T),{data:d(h),border:"",style:{width:"100%","margin-top":"20px"}},{default:o(()=>[t(l,{prop:"equipmentId",label:"ID",width:"50"}),t(l,{prop:"equipmentName",label:"\u4EFF\u771F\u8BBE\u5907\u540D\u79F0",width:"150"}),t(l,{prop:"equipmentNumber",label:"\u4EFF\u771F\u8BBE\u5907\u7F16\u53F7",width:"150"}),t(l,{prop:"purpose",label:"\u7528\u9014",width:"80"}),t(l,{label:"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u64CD\u4F5C",width:"250"},{default:o(s=>[t(_,{size:"small",type:"info",plain:"",onClick:A=>N(s.row.equipmentId)},{default:o(()=>[f("\u9884\u5B9A ")]),_:2},1032,["onClick"]),t(_,{size:"small",type:"warning",onClick:()=>d(q).push({path:"/equipment/detail",query:{equipmentId:s.row.equipmentId}})},{default:o(()=>[f(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(S,{style:{"margin-top":"20px"},"current-page":a.pageNum,"page-size":a.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:d(b),onSizeChange:C,onCurrentChange:z},null,8,["current-page","page-size","total"])]),_:1})])}}};export{H as default};
