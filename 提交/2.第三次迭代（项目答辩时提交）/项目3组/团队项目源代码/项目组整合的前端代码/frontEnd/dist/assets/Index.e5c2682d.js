import{u as w}from"./menu.895df529.js";import{n as v,z as M,a as b,r as N,b as o,c as B,d as S,e,w as l,f as V,u as i,h as c,A as E,E as m}from"./index.cc30dbfe.js";import"./http.f2a51fde.js";const q=V("p",null,"\u83DC\u5355\u7BA1\u7406",-1),F={__name:"Index",setup(T){const d=v();M(()=>{s()});let _=b([]),h=b(0);const n=N({pageNum:1,pageSize:10,cname:""}),s=async()=>{const t=await w.getMenuList(n);console.log(t),_.value=t.data.data,console.log(t.data.data),h.value=t.data.total},f=t=>{n.pageSize=t,s()},y=t=>{n.pageNum=t,s()},g=()=>{n.pageNum=1,s()},C=t=>{E.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u83DC\u5355\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await w.delMenu({menuId:t})).data?(m.success("\u5220\u9664\u83DC\u5355\u6210\u529F"),s()):m.error("\u5220\u9664\u83DC\u5355\u5931\u8D25\uFF0C\u8BF7\u5220\u9664\u89D2\u8272\u5173\u8054\u4FE1\u606F")}).catch(()=>{m({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})};return(t,r)=>{const p=o("el-button"),z=o("el-input"),a=o("el-table-column"),x=o("el-table"),k=o("el-pagination"),I=o("el-card");return B(),S("div",null,[q,e(I,null,{default:l(()=>[e(z,{style:{width:"440px"},onClear:g,clearable:"",modelValue:n.cname,"onUpdate:modelValue":r[0]||(r[0]=u=>n.cname=u),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D",class:"input-with-select"},{append:l(()=>[e(p,{icon:"Search",onClick:g})]),_:1},8,["modelValue"]),e(p,{type:"primary",onClick:r[1]||(r[1]=()=>i(d).push({path:"/menu/save",query:{menuId:""}}))},{default:l(()=>[c("\u65B0\u589E\u83DC\u5355")]),_:1}),e(x,{data:i(_),border:"",style:{width:"100%","margin-top":"20px"}},{default:l(()=>[e(a,{prop:"menuId",label:"id",width:"180"}),e(a,{prop:"cname",label:"\u83DC\u5355\u540D\u79F0",width:"180"}),e(a,{prop:"ename",label:"\u83DC\u5355\u82F1\u6587\u540D",width:"180"}),e(a,{prop:"path",label:"\u83DC\u5355\u5730\u5740",width:"180"}),e(a,{prop:"component",label:"\u83DC\u5355\u8DEF\u5F84",width:"180"}),e(a,{prop:"icon",label:"\u56FE\u6807",width:"100"}),e(a,{prop:"pid",label:"\u7236ID",width:"130"}),e(a,{prop:"sort",label:"\u6392\u5E8F",width:"130"}),e(a,{label:"\u64CD\u4F5C",width:"330"},{default:l(u=>[e(p,{type:"danger",size:"small",onClick:A=>C(u.row.menuId),round:""},{default:l(()=>[c("\u5220\u9664")]),_:2},1032,["onClick"]),e(p,{size:"small",type:"primary",onClick:()=>i(d).push({path:"/menu/detail",query:{menuId:u.row.menuId}})},{default:l(()=>[c("\u83DC\u5355\u8BE6\u60C5")]),_:2},1032,["onClick"]),e(p,{size:"small",type:"success",onClick:()=>i(d).push({path:"/menu/detail",query:{menuId:u.row.menuId,edit:1}})},{default:l(()=>[c("\u7F16\u8F91\u83DC\u5355")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(k,{style:{"margin-top":"20px"},"current-page":n.pageNum,"page-size":n.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:i(h),onSizeChange:f,onCurrentChange:y},null,8,["current-page","page-size","total"])]),_:1})])}}};export{F as default};
