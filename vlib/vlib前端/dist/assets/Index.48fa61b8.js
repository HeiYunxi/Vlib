import{u as w}from"./menu.58686872.js";import{m as v,v as M,a as b,r as N,b as o,o as S,c as B,d as e,w as l,f as i,u as c,x as V,E as m}from"./index.36f971ea.js";import"./http.67206c72.js";const j={__name:"Index",setup(E){const d=v();M(()=>{s()});let _=b([]),g=b(0);const a=N({pageNum:1,pageSize:10,cname:""}),s=async()=>{const t=await w.getMenuList(a);console.log(t),_.value=t.data.data,console.log(t.data.data),g.value=t.data.total},f=t=>{a.pageSize=t,s()},C=t=>{a.pageNum=t,s()},h=()=>{a.pageNum=1,s()},y=t=>{V.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u83DC\u5355\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await w.delMenu({menuId:t})).data?(m.success("\u5220\u9664\u6210\u529F"),s()):m.error("\u5220\u9664\u5931\u8D25")}).catch(()=>{m({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})};return(t,r)=>{const p=o("el-button"),x=o("el-input"),n=o("el-table-column"),z=o("el-table"),I=o("el-pagination"),k=o("el-card");return S(),B("div",null,[e(k,null,{default:l(()=>[e(x,{style:{width:"440px"},onClear:h,clearable:"",modelValue:a.cname,"onUpdate:modelValue":r[0]||(r[0]=u=>a.cname=u),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D",class:"input-with-select"},{append:l(()=>[e(p,{icon:"Search",onClick:h})]),_:1},8,["modelValue"]),i(" \xA0\xA0\xA0 "),e(p,{type:"primary",onClick:r[1]||(r[1]=()=>c(d).push({path:"/menu/save",query:{menuId:""}}))},{default:l(()=>[i("\u65B0\u589E\u83DC\u5355")]),_:1}),e(z,{data:c(_),border:"",style:{width:"100%","margin-top":"20px"}},{default:l(()=>[e(n,{prop:"menuId",label:"ID",width:"50"}),e(n,{prop:"cname",label:"\u83DC\u5355\u540D\u79F0",width:"180"}),e(n,{prop:"ename",label:"\u83DC\u5355\u82F1\u6587\u540D",width:"180"}),e(n,{prop:"path",label:"\u83DC\u5355\u8BF7\u6C42\u5730\u5740",width:"180"}),e(n,{prop:"component",label:"\u83DC\u5355\u8DEF\u5F84",width:"100"}),e(n,{prop:"pid",label:"\u7236ID",width:"80"}),e(n,{prop:"sort",label:"\u6392\u5E8F",width:"80"}),e(n,{label:"\u64CD\u4F5C",width:"330"},{default:l(u=>[e(p,{type:"danger",size:"small",onClick:q=>y(u.row.menuId)},{default:l(()=>[i("\u5220\u9664")]),_:2},1032,["onClick"]),e(p,{size:"small",onClick:()=>c(d).push({path:"/menu/detail",query:{menuId:u.row.menuId}})},{default:l(()=>[i("\u83DC\u5355\u8BE6\u60C5")]),_:2},1032,["onClick"]),e(p,{size:"small",onClick:()=>c(d).push({path:"/menu/detail",query:{menuId:u.row.menuId,edit:1}})},{default:l(()=>[i("\u7F16\u8F91\u83DC\u5355")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(I,{style:{"margin-top":"20px"},"current-page":a.pageNum,"page-size":a.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:c(g),onSizeChange:f,onCurrentChange:C},null,8,["current-page","page-size","total"])]),_:1})])}}};export{j as default};
