import{u as y}from"./role.fdaa2ab1.js";import{m as T,v as U,a as i,r as x,b as s,o as D,c as L,d as e,w as a,f as d,u as p,e as b,x as $,E as f}from"./index.36f971ea.js";import"./http.67206c72.js";const j={style:{"text-align":"center"}},A={slot:"footer",class:"dialog-footer",style:{"text-align":"center","padding-top":"20px"}},O={__name:"Index",setup(F){const _=T();U(()=>{u()});const w=i([]),c=i([]);i();const m=i(!1);let h=i([]);x({menuId:"",cname:""});let v=i(0);const n=x({pageNum:1,pageSize:10,roleName:""}),u=async()=>{const t=await y.getRoleList(n);console.log(t),h.value=t.data.data,console.log(t.data.data),v.value=t.data.total},V=t=>{n.pageSize=t,u()},k=t=>{n.pageNum=t,u()},C=()=>{n.pageNum=1,u()},z=t=>{$.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u89D2\u8272\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await y.delRole({roleId:t})).data?(f.success("\u5220\u9664\u6210\u529F"),u()):f.error("\u5220\u9664\u83DC\u5355\u5931\u8D25\uFF0C\u8BF7\u5220\u9664\u89D2\u8272\u7BA1\u7406\u4FE1\u606F")}).catch(()=>{f({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})},I=t=>{t()},N=()=>{m.value=!1,console.log(c.value),c.value.forEach(function(t){console.log(t)})};return(t,l)=>{const r=s("el-button"),B=s("el-input"),g=s("el-table-column"),R=s("el-table"),S=s("el-pagination"),E=s("el-card"),q=s("el-transfer"),M=s("el-dialog");return D(),L("div",null,[e(E,null,{default:a(()=>[e(B,{style:{width:"440px"},onClear:C,clearable:"",modelValue:n.roleName,"onUpdate:modelValue":l[0]||(l[0]=o=>n.roleName=o),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",class:"input-with-select"},{append:a(()=>[e(r,{icon:"Search",onClick:C})]),_:1},8,["modelValue"]),d(" \xA0\xA0\xA0 "),e(r,{type:"primary",onClick:l[1]||(l[1]=()=>p(_).push({path:"/role/save",query:{roleId:""}}))},{default:a(()=>[d("\u65B0\u589E\u89D2\u8272")]),_:1}),e(R,{data:p(h),border:"",style:{width:"100%","margin-top":"20px"}},{default:a(()=>[e(g,{prop:"roleId",label:"ID",width:"180"}),e(g,{prop:"roleName",label:"\u89D2\u8272",width:"180"}),e(g,{prop:"description",label:"\u89D2\u8272\u63CF\u8FF0",width:"180"}),e(g,{label:"\u64CD\u4F5C",width:"330"},{default:a(o=>[e(r,{type:"danger",size:"small",onClick:G=>z(o.row.roleId)},{default:a(()=>[d("\u5220\u9664")]),_:2},1032,["onClick"]),e(r,{size:"small",onClick:()=>p(_).push({path:"/role/detail",query:{roleId:o.row.roleId}})},{default:a(()=>[d("\u89D2\u8272\u8BE6\u60C5")]),_:2},1032,["onClick"]),e(r,{size:"small",onClick:()=>p(_).push({path:"/role/detail",query:{roleId:o.row.roleId,edit:1}})},{default:a(()=>[d("\u7F16\u8F91\u89D2\u8272")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(S,{style:{"margin-top":"20px"},"current-page":n.pageNum,"page-size":n.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:p(v),onSizeChange:V,onCurrentChange:k},null,8,["current-page","page-size","total"])]),_:1}),e(M,{title:"\u9875\u9762\u8BBE\u7F6E",modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=o=>m.value=o),width:"700px","before-close":I},{default:a(()=>[b("div",j,[e(q,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=o=>c.value=o),titles:["\u672A\u9009\u62E9","\u5DF2\u9009\u62E9"],data:w.value},null,8,["modelValue","data"])]),b("div",A,[e(r,{onClick:l[3]||(l[3]=o=>m.value=!1)},{default:a(()=>[d("\u53D6 \u6D88")]),_:1}),e(r,{type:"primary",onClick:N},{default:a(()=>[d("\u786E \u5B9A")]),_:1})])]),_:1},8,["modelValue"])])}}};export{O as default};
