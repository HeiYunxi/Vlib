import{l as q,m as R,r as V,a as b,n as B,b as s,o as c,c as p,d as l,w as r,e as I,f,u as _,E as d}from"./index.36f971ea.js";import{u as w}from"./role.fdaa2ab1.js";import"./http.67206c72.js";const C={class:"card-header"},D=I("span",null,"\u89D2\u8272\u8BE6\u60C5",-1),E={key:0},U={key:1},A={__name:"Detail",setup(F){const n=q(),y=R(),t=V({roleId:"",roleName:"",description:""}),h=b([]);B(async()=>{if(n.query.roleId){const o=await w.getRoleDetail({roleId:n.query.roleId});console.log(o.data.data),h.value=o.data.data,t.roleId=o.data.data[0].roleId,t.roleName=o.data.data[0].roleName,t.description=o.data.data[0].description}});const i=b(),v=V({roleName:[{required:!0,message:"\u89D2\u8272\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),N=()=>{!i||i.value.validate(async o=>{if(o){if(t.description.length>254){d.info("\u63CF\u8FF0\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7254\u4F4D");return}const e=await w.updateRole(t);e.data!=null?e.data?(d.info("\u4FEE\u6539\u6210\u529F"),y.push("/role/list")):d.error("\u4FEE\u6539\u5931\u8D25"):d.error("\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF")}else return alert(1),!1})};return(o,e)=>{const g=s("el-button"),u=s("el-input"),m=s("el-form-item"),x=s("el-form"),k=s("el-card");return c(),p("div",null,[l(k,{class:"box-card"},{header:r(()=>[I("div",C,[D,f("\xA0\xA0\xA0 "),l(g,{size:"mini",style:{float:"right"},onClick:e[0]||(e[0]=a=>_(y).go(-1))},{default:r(()=>[f("\u8FD4\u56DE")]),_:1})])]),default:r(()=>[l(x,{model:t,rules:v,ref_key:"ruleFormRef",ref:i},{default:r(()=>[l(m,{label:"\u7F16\xA0\xA0\xA0\xA0\u53F7:"},{default:r(()=>[l(u,{modelValue:t.roleId,"onUpdate:modelValue":e[1]||(e[1]=a=>t.roleId=a),style:{width:"300px"},readonly:!0,class:"input-with-select"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u89D2\xA0\xA0\xA0\xA0\u8272:"},{default:r(()=>[l(u,{modelValue:t.roleName,"onUpdate:modelValue":e[2]||(e[2]=a=>t.roleName=a),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",class:"input-with-select"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u63CF\xA0\xA0\xA0\xA0\u8FF0:"},{default:r(()=>[l(u,{modelValue:t.description,"onUpdate:modelValue":e[3]||(e[3]=a=>t.description=a),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0",class:"input-with-select"},null,8,["modelValue"])]),_:1}),_(n).query.roleId==""||_(n).query.edit=="1"?(c(),p("p",E,[l(g,{type:"primary",onClick:e[4]||(e[4]=a=>N())},{default:r(()=>[f("\u4FDD\u5B58")]),_:1})])):(c(),p("p",U))]),_:1},8,["model","rules"])]),_:1})])}}};export{A as default};
