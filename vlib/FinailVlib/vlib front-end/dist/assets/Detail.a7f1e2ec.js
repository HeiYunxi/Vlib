import{m as D,n as C,r as w,a as c,o as F,b as d,c as i,d as m,e as t,w as o,f as N,h as b,u as f,F as L,x as R,E as _,q as E}from"./index.cc30dbfe.js";import{u as y}from"./lab.fc26e40c.js";import"./http.f2a51fde.js";const M={class:"card-header"},$=N("span",null,"\u5B9E\u9A8C\u5BA4\u8BE6\u60C5",-1),z={key:0},A={key:1},H={__name:"Detail",setup(S){const n=D(),V=C(),a=w({labId:"",labNumber:"",labName:"",position:"",capacity:"",area:"",managerId:""}),h=c([]),I=c([]);F(async()=>{if(n.query.labId){const u=await y.getlabUserList({labId:n.query.labId});console.log(u.data.data),I.value=u.data.data;const e=await y.getLabDetail({labId:n.query.labId});console.log(e.data.data),h.value=e.data.data,a.labId=e.data.data[0].labId,a.labNumber=e.data.data[0].labNumber,a.labName=e.data.data[0].labName,a.position=e.data.data[0].position,a.capacity=e.data.data[0].capacity,a.area=e.data.data[0].area,a.managerId=e.data.data[0].managerId}});const p=c(),v=w({labNumber:[{required:!0,message:"\u5B9E\u9A8C\u5BA4\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],labName:[{required:!0,message:"\u5B9E\u9A8C\u5BA4\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),x=()=>{!p||p.value.validate(async u=>{if(u){const e=await y.updateLab(a);e.data!=null?e.data?(_.info("\u5B9E\u9A8C\u5BA4\u4FEE\u6539\u6210\u529F"),V.push("/lab/list")):_.error("\u5B9E\u9A8C\u5BA4\u4FEE\u6539\u5931\u8D25"):_.error("\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF")}else return!1})};return(u,e)=>{const g=d("el-button"),r=d("el-input"),s=d("el-form-item"),k=d("el-option"),q=d("el-select"),U=d("el-form"),B=d("el-card");return i(),m("div",null,[t(B,{class:"box-card"},{header:o(()=>[N("div",M,[$,b("\xA0\xA0\xA0 "),t(g,{size:"mini",style:{float:"right"},onClick:e[0]||(e[0]=l=>f(V).go(-1))},{default:o(()=>[b("\u8FD4\u56DE")]),_:1})])]),default:o(()=>[t(U,{model:a,rules:v,ref_key:"ruleFormRef",ref:p},{default:o(()=>[t(s,{label:"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0ID:"},{default:o(()=>[t(r,{modelValue:a.labId,"onUpdate:modelValue":e[1]||(e[1]=l=>a.labId=l),style:{width:"300px"},readonly:!0,class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5B9E\u9A8C\u5BA4\u7F16\u53F7:"},{default:o(()=>[t(r,{modelValue:a.labNumber,"onUpdate:modelValue":e[2]||(e[2]=l=>a.labNumber=l),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9A8C\u5BA4\u7F16\u53F7",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5B9E\u9A8C\u5BA4\u540D\u79F0:"},{default:o(()=>[t(r,{modelValue:a.labName,"onUpdate:modelValue":e[3]||(e[3]=l=>a.labName=l),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9A8C\u5BA4\u540D\u79F0",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u4F4D\u7F6E:"},{default:o(()=>[t(r,{modelValue:a.position,"onUpdate:modelValue":e[4]||(e[4]=l=>a.position=l),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u5BB9\u91CF:"},{default:o(()=>[t(r,{modelValue:a.capacity,"onUpdate:modelValue":e[5]||(e[5]=l=>a.capacity=l),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u91CF",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u9762\u79EF:"},{default:o(()=>[t(r,{modelValue:a.area,"onUpdate:modelValue":e[6]||(e[6]=l=>a.area=l),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u9762\u79EF",class:"input-with-select"},null,8,["modelValue"])]),_:1}),t(s,{label:"\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\xA0\u6559\u5E08:"},{default:o(()=>[t(q,{modelValue:a.managerId,"onUpdate:modelValue":e[7]||(e[7]=l=>a.managerId=l),style:{width:"300px"},placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u6559\u5E08",class:"input-with-select"},{default:o(()=>[(i(!0),m(L,null,R(I.value,l=>(i(),E(k,{key:l.userId,label:l.userName,value:l.userId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),f(n).query.labId==""||f(n).query.edit=="1"?(i(),m("p",z,[t(g,{type:"primary",onClick:e[8]||(e[8]=l=>x())},{default:o(()=>[b("\u4FDD\u5B58")]),_:1})])):(i(),m("p",A))]),_:1},8,["model","rules"])]),_:1})])}}};export{H as default};
