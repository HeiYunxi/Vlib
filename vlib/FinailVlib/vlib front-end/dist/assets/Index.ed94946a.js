import{u as g}from"./supplier.88739423.js";import{a as n,n as F,z as R,r as x,b as r,c as U,d as j,e,w as o,f as z,h as u,u as c,A as G,E as y,C as H}from"./index.cc30dbfe.js";import"./FileSaver.min.212c967c.js";import"./http.f2a51fde.js";const J=z("p",null,"\u4F9B\u5E94\u5546\u7BA1\u7406",-1),K={style:{"text-align":"left"}},Y={__name:"Index",setup(O){const k=n(!1),h=F();R(()=>{d()});let C=n([]),S=n(0);const p=x({pageNum:1,pageSize:10,flag:!1,supplierName:""}),d=async()=>{const t=await g.getSupplierList(p);console.log(t),C.value=t.data.data,console.log(t.data.data),S.value=t.data.total},I=t=>{p.pageSize=t,d()},N=t=>{p.pageNum=t,d()},v=t=>{p.pageNum=1,p.flag=t,d()},V=t=>{G.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u4F9B\u5E94\u5546\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await g.delSupplier({supplierId:t})).data?(y.success("\u5220\u9664\u4F9B\u5E94\u5546\u6210\u529F"),d()):y.error("\u5220\u9664\u4F9B\u5E94\u5546\u5931\u8D25")}).catch(()=>{y({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})},m=n([]);let _=n([]),E=n([]),f=n([]);const T=x({pageNum:1,pageSize:100,equipmentName:"",flag:0}),b=n(!1),B=async t=>{E.value=t;const a=await g.getEquipmentList(T);m.value=a.data.data,_=m.value,b.value=!0;const s=await g.getSupplierSimulationEquipmentList({supplierId:t});f=s.data.data,H(()=>{for(const w in s.data.data)for(const l in a.data.data)a.data.data[l].equipmentId==s.data.data[w].equipmentId&&_.toggleRowSelection(m.value[l],!0)})};n(),n([]);const D=t=>{f=t,console.log(f)};return(t,a)=>{const s=r("el-button"),w=r("el-input"),l=r("el-table-column"),q=r("el-table"),L=r("el-pagination"),M=r("el-card"),$=r("el-dialog");return U(),j("div",null,[J,e(M,null,{default:o(()=>[e(w,{style:{width:"440px"},onClear:v,clearable:"",modelValue:p.supplierName,"onUpdate:modelValue":a[1]||(a[1]=i=>p.supplierName=i),placeholder:"\u8BF7\u8F93\u5165\u4F9B\u5E94\u5546\u540D\u79F0",class:"input-with-select"},{append:o(()=>[e(s,{icon:"Search",onClick:a[0]||(a[0]=i=>v(k.value))})]),_:1},8,["modelValue"]),u(" \xA0\xA0\xA0 "),e(s,{type:"primary",onClick:a[2]||(a[2]=()=>c(h).push({path:"/supplier/save",query:{SupplierId:""}}))},{default:o(()=>[u("\u65B0\u589E\u4F9B\u5E94\u5546 ")]),_:1}),e(q,{id:"Supplier-table",data:c(C),border:"",style:{width:"100%","margin-top":"20px"}},{default:o(()=>[e(l,{class:"table",id:"col",prop:"supplierId",label:"ID",width:"50"}),e(l,{class:"table",id:"col",prop:"supplierName",label:"\u4F9B\u5E94\u5546\u540D\u79F0",width:"250"}),e(l,{class:"table",id:"col",prop:"contact",label:"\u8054\u7CFB\u4EBA",width:"100"}),e(l,{class:"table",id:"col",prop:"phone",label:"\u8054\u7CFB\u7535\u8BDD",width:"200"}),e(l,{class:"table",id:"col",prop:"email",label:"\u90AE\u7BB1",width:"200"}),e(l,{class:"table",id:"col",prop:"address",label:"\u5730\u5740",width:"200"}),e(l,{label:"\u64CD\u4F5C",width:"430"},{default:o(i=>[e(s,{type:"danger",size:"small",onClick:A=>V(i.row.supplierId)},{default:o(()=>[u(" \u5220\u9664 ")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"primary",onClick:()=>c(h).push({path:"/supplier/detail",query:{supplierId:i.row.supplierId}})},{default:o(()=>[u(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"success",onClick:()=>c(h).push({path:"/supplier/detail",query:{supplierId:i.row.supplierId,edit:1}})},{default:o(()=>[u(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(s,{size:"small",type:"success",plain:"",onClick:A=>B(i.row.supplierId)},{default:o(()=>[u("\u67E5\u770B\u4F9B\u5E94\u8BBE\u5907 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(L,{style:{"margin-top":"20px"},"current-page":p.pageNum,"page-size":p.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:c(S),onSizeChange:I,onCurrentChange:N},null,8,["current-page","page-size","total"])]),_:1}),e($,{title:"\u8BBE\u5907\u5217\u8868",modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=i=>b.value=i),width:"700px","before-close":t.handleClose},{default:o(()=>[z("div",K,[e(q,{data:m.value,border:"",style:{width:"100%","margin-top":"20px"},onSelectionChange:D,ref_key:"myTable",ref:_},{default:o(()=>[e(l,{type:"selection",width:"55"}),e(l,{prop:"equipmentId",label:"id",width:"180"}),e(l,{prop:"equipmentName",label:"\u8BBE\u5907\u540D",width:"180"})]),_:1},8,["data"])])]),_:1},8,["modelValue","before-close"])])}}};export{Y as default};
