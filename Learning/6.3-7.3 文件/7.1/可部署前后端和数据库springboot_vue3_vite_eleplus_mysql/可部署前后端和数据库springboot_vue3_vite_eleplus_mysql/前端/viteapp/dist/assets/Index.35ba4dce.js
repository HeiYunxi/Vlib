import{u as h}from"./user.982909f2.js";import{n as B,A as R,o as S,r as f,a as C,b as r,c as V,d as E,e,w as t,f as M,h as s,u as d,B as q,E as m}from"./index.82fae7dd.js";const T=M("p",null,"\u89D2\u8272\u7BA1\u7406",-1),U={__name:"Index",setup(A){const u=B();R(()=>{i()}),S(async()=>{f({roleId:""})});let _=C([]),g=C(0);const o=f({pageNum:1,pageSize:10,roleName:""}),i=async()=>{const a=await h.getRoleList(o);console.log(a),_.value=a.data.data,console.log(a.data.data),g.value=a.data.total},w=a=>{o.pageSize=a,i()},y=a=>{o.pageNum=a,i()},b=()=>{o.pageNum=1,i()},z=a=>{q.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u89D2\u8272\u4FE1\u606F\u5417?",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{(await h.delRole({roleId:a})).data?(m.success("\u5220\u9664\u89D2\u8272\u6210\u529F"),i()):m.error("\u5220\u9664\u89D2\u8272\u5931\u8D25")}).catch(()=>{m({type:"info",message:"\u53D6\u6D88\u5220\u9664"})})};return(a,c)=>{const l=r("el-button"),k=r("el-input"),p=r("el-table-column"),I=r("el-table"),N=r("el-pagination"),x=r("el-card");return V(),E("div",null,[T,e(x,null,{default:t(()=>[e(k,{style:{width:"440px"},onClear:a.searchRole,clearable:"",modelValue:o.roleName,"onUpdate:modelValue":c[0]||(c[0]=n=>o.roleName=n),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272",class:"input-with-select"},{append:t(()=>[e(l,{icon:"Search",onClick:b})]),_:1},8,["onClear","modelValue"]),s(" \xA0\xA0\xA0 "),e(l,{type:"primary",onClick:c[1]||(c[1]=()=>d(u).push({path:"/role/save",query:{userId:""}}))},{default:t(()=>[s("\u65B0\u589E\u89D2\u8272")]),_:1}),e(I,{data:d(_),border:"",style:{width:"100%","margin-top":"20px"}},{default:t(()=>[e(p,{prop:"roleId",label:"id",width:"180"}),e(p,{prop:"roleName",label:"\u89D2\u8272\u540D\u79F0",width:"180"}),e(p,{prop:"description",label:"\u89D2\u8272\u63CF\u8FF0",width:"180"}),e(p,{label:"\u64CD\u4F5C",width:"430"},{default:t(n=>[e(l,{type:"danger",size:"small",onClick:v=>z(n.row.roleId)},{default:t(()=>[s("\u5220\u9664")]),_:2},1032,["onClick"]),e(l,{size:"small",onClick:()=>d(u).push({path:"/role/detail",query:{roleId:n.row.roleId}})},{default:t(()=>[s("\u89D2\u8272\u8BE6\u60C5")]),_:2},1032,["onClick"]),e(l,{size:"small",onClick:()=>d(u).push({path:"/role/detail",query:{roleId:n.row.roleId,edit:1}})},{default:t(()=>[s("\u7F16\u8F91\u89D2\u8272")]),_:2},1032,["onClick"]),e(l,{size:"small",onClick:v=>a.showDialog(n.row.roleId)},{default:t(()=>[s("\u7F16\u8F91\u89D2\u8272\u83DC\u5355")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(N,{style:{"margin-top":"20px"},"current-page":o.pageNum,"page-size":o.pageSize,"page-sizes":[10,20,30,40],layout:"->,total, sizes, prev, pager, next, jumper",total:d(g),onSizeChange:w,onCurrentChange:y},null,8,["current-page","page-size","total"])]),_:1})])}}};export{U as default};
