import{m as q,n as R,r as g,a as I,o as B,b as s,c as m,d as c,e as l,w as a,f as w,h as p,u as f,E as _}from"./index.82fae7dd.js";import{u as b}from"./user.982909f2.js";const C={class:"card-header"},D=w("span",null,"\u89D2\u8272\u8BE6\u60C5",-1),E={key:0},U={key:1},z={__name:"Detail",setup(F){const n=q(),y=R(),t=g({roleId:"",roleName:"",description:""}),h=I([]);B(async()=>{if(n.query.roleId){const o=await b.getRoleDetail({roleId:n.query.roleId});console.log(o.data.data),h.value=o.data.data,t.roleName=o.data.data[0].roleName,t.description=o.data.data[0].description,t.roleId=o.data.data[0].roleId}});const d=I(),v=g({roleName:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u89D2\u8272\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),N=()=>{!d||d.value.validate(async o=>{if(o){const e=await b.updateRole(t);e.data!=null?e.data?(_.info("\u89D2\u8272\u4FEE\u6539\u6210\u529F"),y.push("/role/list")):_.error("\u89D2\u8272\u4FEE\u6539\u5931\u8D25"):_.error("\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF")}else return!1})};return(o,e)=>{const V=s("el-button"),u=s("el-input"),i=s("el-form-item"),x=s("el-form"),k=s("el-card");return m(),c("div",null,[l(k,{class:"box-card"},{header:a(()=>[w("div",C,[D,p("\xA0\xA0\xA0 "),l(V,{size:"mini",style:{float:"right"},onClick:e[0]||(e[0]=r=>f(y).go(-1))},{default:a(()=>[p("\u8FD4\u56DE")]),_:1})])]),default:a(()=>[l(x,{model:t,rules:v,ref_key:"ruleFormRef",ref:d},{default:a(()=>[l(i,{label:"\u89D2\u8272ID:"},{default:a(()=>[l(u,{modelValue:t.roleId,"onUpdate:modelValue":e[1]||(e[1]=r=>t.roleId=r),style:{width:"300px"},readonly:!0,class:"input-with-select"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u89D2\u8272\u540D\u79F0:"},{default:a(()=>[l(u,{modelValue:t.roleName,"onUpdate:modelValue":e[2]||(e[2]=r=>t.roleName=r),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",class:"input-with-select"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u89D2\u8272\u63CF\u8FF0:"},{default:a(()=>[l(u,{modelValue:t.description,"onUpdate:modelValue":e[3]||(e[3]=r=>t.description=r),style:{width:"300px"},placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0",class:"input-with-select"},null,8,["modelValue"])]),_:1}),f(n).query.roleId==""||f(n).query.edit=="1"?(m(),c("p",E,[l(V,{type:"primary",onClick:e[4]||(e[4]=r=>N())},{default:a(()=>[p("\u4FDD\u5B58")]),_:1})])):(m(),c("p",U))]),_:1},8,["model","rules"])]),_:1})])}}};export{z as default};
