"object"==typeof globalThis&&(globalThis.jsExecStartTimeStamp=Date.now()),(self.webpackChunkuni=self.webpackChunkuni||[]).push([[8487],{661950:function(t,e,n){var i,r,o;n.d(e,{FW:function(){return o},Lq:function(){return r},zM:function(){return i}}),function(t){t.C_DOMAIN="C_DOMAIN",t.B_DOMAIN="B_DOMAIN"}(i||(i={})),function(t){t.WECHAT="wx",t.WEWORK="ww",t.QQ="qq"}(r||(r={})),function(t){t[t.WEWORK=2]="WEWORK",t[t.WECHAT=1]="WECHAT"}(o||(o={}))},121688:function(t,e,n){n.d(e,{K:function(){return s}});var i=n(338104),r=n(655659),o=n(690592),a=n(982764),s=function(t){function e(e){var n=t.call(this)||this;return n.wedocOpenId="",n.wedriveUin="",n.corpId="",n.corpName="",n.englishName="",n.loginType=o.Q.UNKNOWN,n.nowUserIndex="",n.openId="",n.tinyId=a.Dr,n.uidSource=o.Q.UNKNOWN,n.uin="",n.userId="",n.userName="",n.userPic="",n.settings={language:"",toolbarMode:"",vipTheme:""},e?e.tinyId?(n.jsonObj2Class(e),n):(n.jsonObj2Class((0,i.__assign)((0,i.__assign)({},e),{tinyId:a.Dr})),n):n}return(0,i.__extends)(e,t),e}(r.K)},32618:function(t,e,n){var i;n.d(e,{g:function(){return i}}),function(t){t.BINDING="BINDING",t.UNBIND="UNBIND"}(i||(i={}))},101144:function(t,e,n){n.d(e,{B:function(){return s}});var i=n(338104),r=n(655659),o=n(690592),a=n(32618),s=function(t){function e(e){var n=t.call(this)||this;if(n.type=a.g.UNBIND,n.userName="",n.userPic="",n.accountType=o.Q.UNKNOWN,e){n.loginType=e.loginType;var i=n.handleBindUserInfo(e);n.jsonObj2Class(i)}return n}return(0,i.__extends)(e,t),e.prototype.handleBindUserInfo=function(t){var e=t.wxAvatar,n=t.wxNick,i=t.qqAvatar,r=t.qqNick;return t.wxOpenid&&this.loginType!==o.Q.WX?{type:a.g.BINDING,userName:n,userPic:e,accountType:o.Q.WX}:i&&this.loginType!==o.Q.QQ?{type:a.g.BINDING,userName:r,userPic:i,accountType:o.Q.QQ}:{type:a.g.UNBIND,userName:"",userPic:"",accountType:o.Q.UNKNOWN}},e}(r.K)},399812:function(t,e,n){n.d(e,{Z:function(){return a}});var i=n(338104),r=n(655659),o=n(575367),a=function(t){function e(e){var n=t.call(this)||this;return n.avatar="",n.nick="",n.introduction="",n.type=0,n.principal="",n.credential="",n.isOfficialAccount=!1,e&&(n.setOfficialAccountStatus(e),n.jsonObj2Class(e)),n}return(0,i.__extends)(e,t),e.prototype.setOfficialAccountStatus=function(t){this.isOfficialAccount=t.type!==o.n.UNAUTHED},e}(r.K)},575367:function(t,e,n){var i;n.d(e,{n:function(){return i}}),function(t){t[t.UNAUTHED=0]="UNAUTHED",t[t.ENTERPRISE=1]="ENTERPRISE",t[t.ENTERPRISE_MEDIA=2]="ENTERPRISE_MEDIA",t[t.GOVERNMENT=3]="GOVERNMENT",t[t.NON_PROFIT_ORGANIZATION=4]="NON_PROFIT_ORGANIZATION",t[t.PRIVATE_NON_ENTERPRISE=5]="PRIVATE_NON_ENTERPRISE",t[t.FOR_PROFIT_ORGANIZATION=6]="FOR_PROFIT_ORGANIZATION",t[t.SOCIAL_GROUPS=8]="SOCIAL_GROUPS",t[t.BUSINESS_MEDIA=9]="BUSINESS_MEDIA",t[t.BUSINESS_UNIT=11]="BUSINESS_UNIT",t[t.INDIVIDUAL_INDUSTRIAL_AND_COMMERCIAL_HOUSEHOLDS=12]="INDIVIDUAL_INDUSTRIAL_AND_COMMERCIAL_HOUSEHOLDS",t[t.OVERSEAS_COMPANIES=13]="OVERSEAS_COMPANIES"}(i||(i={}))},982764:function(t,e,n){n.d(e,{Dr:function(){return a},RM:function(){return r.RM},T0:function(){return r.T0},gq:function(){return r.gq},gz:function(){return i.g},n6:function(){return o.n},pN:function(){return r.pN},qu:function(){return r.qu},vA:function(){return r.vA},vV:function(){return r.vV}});var i=n(32618),r=n(912214),o=n(575367),a="100000000000000000"},912214:function(t,e,n){var i,r,o,a,s,c,u;n.d(e,{RM:function(){return u},T0:function(){return c},gq:function(){return r},pN:function(){return i},qu:function(){return a},vA:function(){return s},vV:function(){return o}}),function(t){t[t.NOT_YET=1]="NOT_YET",t[t.USING=2]="USING",t[t.EXPIRED=3]="EXPIRED"}(i||(i={})),function(t){t[t.NO_STATUS=0]="NO_STATUS",t[t.CLOSE=1]="CLOSE",t[t.OPEN=2]="OPEN",t[t.EXPIRED=3]="EXPIRED"}(r||(r={})),function(t){t[t.EXPIRED=1]="EXPIRED",t[t.SUPER_VIP_EXPIRED=2]="SUPER_VIP_EXPIRED"}(o||(o={})),function(t){t.NORMAL="NORMAL",t.SUPER="SUPER",t.NONE="NONE",t.EXPIRED="EXPIRED"}(a||(a={})),function(t){t[t.INVALID_CORP_VIP_LEVEL=0]="INVALID_CORP_VIP_LEVEL",t[t.CORP_VIP_LEVEL_BASIC=1]="CORP_VIP_LEVEL_BASIC",t[t.CORP_VIP_LEVEL_PRO=2]="CORP_VIP_LEVEL_PRO"}(s||(s={})),function(t){t[t.NONE=1]="NONE",t[t.NORMAL=2]="NORMAL",t[t.SUPER=3]="SUPER"}(c||(c={})),function(t){t[t.NONE=0]="NONE",t[t.AUTO_RENEWAL=1]="AUTO_RENEWAL",t[t.CLOSED=2]="CLOSED"}(u||(u={}))},316788:function(t,e,n){n.d(e,{UV:function(){return o},a5:function(){return r},eP:function(){return a},sY:function(){return c},sv:function(){return s}});var i=n(848330),r=("".concat(i.d0,"account-list"),"/session/api/multiacc/account_list"),o="".concat(i.d0,"logout"),a="".concat(i.Hf,"/disklogin/session_list"),s="".concat(i.Hf,"/sdc/getusermarkname"),c="/session/api/multiacc/change-sig"},128818:function(t,e,n){n.d(e,{A:function(){return c},Ab:function(){return p},DE:function(){return u},Fc:function(){return f},KH:function(){return _},NO:function(){return a},Nv:function(){return r},TF:function(){return l},V3:function(){return d},mV:function(){return o},sk:function(){return s}});var i=n(848330),r="".concat(i.Hf,"/session/logout"),o="".concat(i.HL,"user_unbind"),a="".concat(i.HL,"user_bind"),s="".concat(i.Hf,"/v2/cgi-bin/online_docs/polling"),c="".concat(i.Hf,"/cgi-bin/online_docs/wxqrcode"),u=("".concat(i.bd,"/session/logout"),"".concat(i.bd,"/disklogin/logout")),d="".concat(i.RP,"/session/logout"),_="".concat(i.HL,"user_info"),p="".concat(i.HL,"bind/permission/uid"),f="".concat(i.HL,"bind/permission/uin"),l="".concat(i.Hf,"/v2/user/wechat/auth/switch")},564706:function(t,e,n){n.d(e,{P:function(){return _}});var i=n(338104),r=n(617025),o=n(924251),a=n(711496),s=n(690592),c=n(754260),u=n(407777),d=n(128818),_=function(){function t(t){this.networkRequestService=t}return t.prototype.logout=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,u.At)(d.Nv,{xrsf:"".concat((0,c.w$)(c.$W.xsrf))}),[2,this.networkRequestService.instance.get(t)]}))}))},t.prototype.wecomLogoutForBDomain=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,u.At)(d.DE,{xrsf:"".concat((0,c.w$)(c.$W.xsrf)),sid:t}),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.wecomLogoutForCDomain=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,u.At)(d.V3,{xrsf:"".concat((0,c.w$)(c.$W.xsrf)),vid:t}),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.unbindUserInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,a.bk)({type:t,xsrf:(0,c.w$)(c.$W.xsrf)}),[2,this.networkRequestService.instance.post(d.mV,e)]}))}))},t.prototype.bindUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,a.bk)({bindType:s.Q.QQ,p_luin:(0,c.ej)("p_luin"),p_uin:(0,c.ej)("p_uin"),p_skey:(0,c.ej)("p_skey"),p_lskey:(0,c.ej)("p_lskey"),xsrf:(0,c.w$)(c.$W.xsrf)}),[2,this.networkRequestService.instance.post(d.NO,t)]}))}))},t.prototype.CurrentLoginAccountBindInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.networkRequestService.instance.get(d.Ab)]}))}))},t.prototype.BindingAccountInfo=function(){return(0,i.__awaiter)(this,arguments,void 0,(function(t){var e,n;return void 0===t&&(t=!1),(0,i.__generator)(this,(function(r){return e=(0,i.__assign)({},t?{uflag:"qqsig"}:null),n=(0,u.At)(d.Fc,e),[2,this.networkRequestService.instance.get(n)]}))}))},t.prototype.getBindWxQrCode=function(t){var e="".concat(d.A,"?xsrf=").concat((0,c.w$)(c.$W.xsrf),"&page=").concat(encodeURIComponent("pages/bindwx/bindwx"),"&ac=bind&ts=").concat(Date.now(),"&u=").concat(t,"&checkKey=1");return this.networkRequestService.instance.get(e)},t.prototype.getBindProcess=function(t){var e="".concat(d.sk,"?CheckKey=").concat(t);return this.networkRequestService.instance.post(e)},t.prototype.getPersonalUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){return t=(0,c.w$)(c.$W.xsrf),e="".concat(d.KH,"?xsrf=").concat(t,"&get_vip_info=1"),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.getCertificationGrey=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.networkRequestService.instance.get(d.TF)]}))}))},(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"logout",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"wecomLogoutForBDomain",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"wecomLogoutForCDomain",null),(0,i.__decorate)([(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"unbindUserInfo",null),(0,i.__decorate)([(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"bindUserInfo",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"CurrentLoginAccountBindInfo",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"BindingAccountInfo",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getBindWxQrCode",null),(0,i.__decorate)([(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getBindProcess",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getPersonalUserInfo",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getCertificationGrey",null),t=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object])],t)}()},382972:function(t,e,n){n.d(e,{Z:function(){return h}});var i=n(338104),r=n(617025),o=n(924251),a=n(711496),s=n(754260),c=n(911862),u=n(407777),d=n(327105),_=n(848330),p="".concat(_.HL,"user_info"),f="".concat(_.Hf,"/api/userinfo/set"),l="".concat(_.Hf,"/doc/info"),h=function(){function t(t){this.networkRequestService=t}return t.prototype.getPersonalUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){return t=(0,s.w$)(s.$W.xsrf),e="".concat(p,"?xsrf=").concat(t,"&get_vip_info=1"),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.updatePersonalNicknameAndAvatar=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){return e=t.nick,n=t.avatar,r=(0,a.bk)({nick:e,avatar:n}),[2,this.networkRequestService.instance.post(f,r)]}))}))},t.prototype.getEnterpriseUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,d.wdocsUserCenter.getUserInfo()];case 1:return t=e.sent(),[2,(0,c.MO)(t)]}}))}))},t.prototype.getEnterpriseDocInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){return this.enterpriseDocInfoPromise&&!t||(e=(0,u.At)(l,{xrsf:"".concat((0,s.w$)(s.$W.xsrf)),func:4}),n=this.networkRequestService.instance.get(e).then((function(t){return(0,i.__assign)((0,i.__assign)({},t),{data:(0,i.__assign)((0,i.__assign)({},t.data),{retcode:t.data.head.ret,msg:t.data.head.msg})})})),this.enterpriseDocInfoPromise=n),[2,this.enterpriseDocInfoPromise]}))}))},(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getPersonalUserInfo",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"updatePersonalNicknameAndAvatar",null),(0,i.__decorate)([(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Boolean]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getEnterpriseDocInfo",null),t=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object])],t)}()},446134:function(t,e,n){n.d(e,{b:function(){return i}});var i=(0,n(478247).y)("IAccountDomainService")},44041:function(t,e,n){n.d(e,{D:function(){return W}});var i=n(338104),r=n(982764),o=n(924251),a=n(963210),s=n(617025),c=n(754260),u=n(316788),d=function(){function t(t){this.networkRequestService=t}return t.prototype.getAccountList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n="".concat(u.a5,"?xrsf=").concat((0,c.w$)(c.$W.xsrf)),t?[4,this.networkRequestService.instance.get(n,{params:{padID:t}})]:[3,2];case 1:case 3:case 5:return[2,i.sent()];case 2:return e?[4,this.networkRequestService.instance.get(n,{params:{folderID:e}})]:[3,4];case 4:return[4,this.networkRequestService.instance.get(n)]}}))}))},t.prototype.delAccountForList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e="".concat(u.UV,"?xrsf=").concat((0,c.w$)(c.$W.xsrf),"&u=").concat(t),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.changeSign=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e="".concat(u.sY,"?xrsf=").concat((0,c.w$)(c.$W.xsrf),"&u=").concat(t),[2,this.networkRequestService.instance.get(e)]}))}))},(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getAccountList",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"delAccountForList",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"changeSign",null),t=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),_=n(886531),p=function(t){function e(e,n){var i=t.call(this,n)||this;return i.networkRequestService=e,i.accountListRepository=new d(e),i.accountList=[],i}return(0,i.__extends)(e,t),e.prototype.changeSign=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.accountListRepository.changeSign(t)];case 1:return[2,0===(null==(e=n.sent().resData)?void 0:e.retcode)]}}))}))},e.prototype.getAccountList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.accountListRepository.getAccountList(t,e)];case 1:return n=i.sent().resData,this.accountList=(null===(o=null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.result)||void 0===o?void 0:o.accounts)?n.data.result.accounts:[],[2,this.accountList]}}))}))},e.prototype.delAccountForList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.accountListRepository.delAccountForList(t)];case 1:return e=n.sent().resData,this.updateListAfterDel(t),[2,0===(null==e?void 0:e.retcode)]}}))}))},e.prototype.updateListAfterDel=function(t){this.accountList=this.accountList.filter((function(e){return e.userIndex!==t}))},e=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object,String])],e)}(_.J),f=p,l=n(711496),h=n(848330),g="".concat(h.Hf,"/online_docs_cgi/pwd/add"),v="".concat(h.Hf,"/online_docs_cgi/pwd/del"),m="".concat(h.Hf,"/online_docs_cgi/pwd/verify"),y="".concat(h.Hf,"/online_docs_cgi/pwd/reset"),w="".concat(h.Hf,"/online_docs_cgi/pwd/verify_code_get"),I="".concat(h.Hf,"/online_docs_cgi/pwd/verify_code_check"),b="".concat(h.Hf,"/online_docs_cgi/pwd/question_check"),S="".concat(h.Hf,"/online_docs_cgi/pwd/question_get"),C="".concat(h.Hf,"/online_docs_cgi/pwd/tips_get"),E="".concat(h.Hf,"/online_docs_cgi/pwd/token_verify"),A=("".concat(h.Hf,"/online_docs_cgi/pwd/tips_report"),function(){function t(t){this.networkRequestService=t}return t.prototype.pwdAdd=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},t)),[2,this.networkRequestService.instance.post(g,e)]}))}))},t.prototype.pwdDel=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},this.changeParam(t))),[2,this.networkRequestService.instance.post(v,e)]}))}))},t.prototype.pwdVerify=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},t)),[2,this.networkRequestService.instance.post(m,e)]}))}))},t.prototype.pwdReset=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},this.changeParam(t))),[2,this.networkRequestService.instance.post(y,e)]}))}))},t.prototype.pwdVerifyCodeGet=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},t)),[2,this.networkRequestService.instance.post(w,e)]}))}))},t.prototype.pwdVerifyCodeCheck=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},t)),[2,this.networkRequestService.instance.post(I,e)]}))}))},t.prototype.pwdQuestionCheck=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},this.changeParam(t))),[2,this.networkRequestService.instance.post(b,e)]}))}))},t.prototype.pwdQuestionGet=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,l.bk)({xsrf:(0,c.w$)(c.$W.xsrf)}),[2,this.networkRequestService.instance.post(S,t)]}))}))},t.prototype.pwdTipsGet=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,l.bk)({xsrf:(0,c.w$)(c.$W.xsrf)}),[2,this.networkRequestService.instance.post(C,t)]}))}))},t.prototype.pwdTokenVerify=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.networkRequestService.instance.post(E,(0,i.__assign)({xsrf:(0,c.w$)(c.$W.xsrf)},t))]}))}))},t.prototype.changeParam=function(t){return t.question_info?(0,i.__assign)((0,i.__assign)({},t),{question_info:JSON.stringify(t.question_info)}):t},(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdAdd",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdDel",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdVerify",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdReset",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdVerifyCodeGet",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdVerifyCodeCheck",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdQuestionCheck",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdQuestionGet",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdTipsGet",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,s.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"pwdTokenVerify",null),t=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object])],t)}()),R=function(t){function e(e,n){var i=t.call(this,n)||this;return i.networkRequestService=e,i.phone="",i.isHasPassword=!1,i.pwdQuestionList=[],i.passwordRepository=new A(i.networkRequestService),i}return(0,i.__extends)(e,t),e.prototype.updatePwdTips=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.passwordRepository.pwdTipsGet()];case 1:return t=i.sent().resData,this.isHasPassword=!!(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.hasPwd),this.phone=null!==(r=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.pwdPhoneNum)&&void 0!==r?r:"",[2]}}))}))},e.prototype.updatePwdQuestionList=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.passwordRepository.pwdQuestionGet()];case 1:return t=i.sent().resData,this.pwdQuestionList=null!==(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.questionInfo)&&void 0!==n?n:[],[2]}}))}))},e=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object,String])],e)}(_.J),M=n(101144),O=n(399812),D=n(655659),k=n(912214),L=function(t){function e(e){var n=t.call(this)||this;if(n.type=k.qu.NONE,n.beginTime=0,n.endTime=0,n.vip={status:0,beginTime:0,endTime:0,renewalStatus:0},n.svip={status:0,beginTime:0,endTime:0,renewalStatus:0},n.vvip={status:0,beginTime:0,endTime:0},n.customInfo={avatarFrame:"",badgeUrl:"",corpVipLevel:k.vA.INVALID_CORP_VIP_LEVEL},n.renewal=k.RM.NONE,n.cursor={},n.cursorId="",n.alwayShowCursor=!1,!(null==e?void 0:e.result))return n;var i=n.handleVipInfoFromNet(e);return n.jsonObj2Class(i),n}return(0,i.__extends)(e,t),e.prototype.updateVipUserInfo=function(t){if(t.result){var e=this.handleVipInfoFromNet(t);this.jsonObj2Class(e)}},e.prototype.updateEnterpriseVipUserInfo=function(t){if(t){var e=this.handleVipCustomInfoFromNet(t);this.jsonObj2Class({customInfo:e})}},e.prototype.handleVipInfoFromNet=function(t){var e,n=k.qu.NONE,i=k.gq.CLOSE,r=t.result.all,o=r.info,a=r.vip,s=r.superVip,c=r.decorationConfig,u=0,d=0;return s.endTime&&(u=1e3*parseInt(s.endTime,10)),a.endTime&&(d=1e3*parseInt(a.endTime,10)),o.vipLevel===k.T0.SUPER?(n=k.qu.SUPER,i=k.gq.OPEN):o.vipLevel===k.T0.NORMAL&&(n=k.qu.NORMAL,i=k.gq.OPEN),o.expiredStatus===k.vV.EXPIRED&&(n=k.qu.EXPIRED,i=k.gq.EXPIRED),{vip:{status:i,beginTime:0,endTime:d},svip:{status:s.status,beginTime:0,endTime:u},vvip:this.vvip,type:n,beginTime:0,endTime:0,renewal:o.renewalStatus,customInfo:{avatarFrame:o.avatarFrameUrl,badgeUrl:o.badgeUrl,corpVipLevel:o.corpVipLevel},cursor:this.parseCursor(o.cursor),cursorId:o.cursorId,alwayShowCursor:(null===(e=null==c?void 0:c.cursor)||void 0===e?void 0:e.alwaysShowSelfCursor)||!1}},e.prototype.parseCursor=function(t){var e={};try{e=JSON.parse(t)}catch(t){e={}}return e},e.prototype.handleVipCustomInfoFromNet=function(t){var e={avatar_frame_url:"",badge_url:"",corp_vip_level:k.vA.INVALID_CORP_VIP_LEVEL};try{e=JSON.parse(t)}catch(t){}var n=e.avatar_frame_url,i=void 0===n?"":n,r=e.badge_url,o=void 0===r?"":r,a=e.corp_vip_level;return{avatarFrame:i,badgeUrl:o,corpVipLevel:void 0===a?k.vA.INVALID_CORP_VIP_LEVEL:a}},e}(D.K),P=n(564706),T=n(620492),F=n(690592),x=n(13160),N=n.n(x),j=n(121688),U=function(t){function e(e,n,i){var r=t.call(this,n)||this;return r.networkRequestService=e,r.userInfo=new j.K,r.vipInfo=new L,r.bindUserInfo=new M.B,r.officialInfo=new O.Z,r.userInfo=new j.K(i),r.accountListEntity=new f(e,n),r.passwordEntity=new R(e,n),r.accountRepository=new P.P(e),r}return(0,i.__extends)(e,t),e.prototype.completionUserInfo=function(t){t.wechatOfficialAccount&&(this.officialInfo=new O.Z(t.wechatOfficialAccount)),this.bindUserInfo=new M.B(t)},e.prototype.completionVipInfo=function(t){this.vipInfo.updateVipUserInfo(t)},e.prototype.updateNowUserIndex=function(t){t&&(window.nowUserIndex=t)},e.prototype.currentLoginAccountBindInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.accountRepository.CurrentLoginAccountBindInfo()];case 1:return t=i.sent(),(e=null===(n=t.resData)||void 0===n?void 0:n.data)?[2,e]:[2,{allowBind:!1,allowUnbind:!1,nextAllowBindTime:0,nextAllowUnbindTime:0,autoRenewal:!1}]}}))}))},e.prototype.bindingQQInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,o,a,s,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.userInfo.loginType,e=![F.Q.QQ,F.Q.WX].includes(t),[4,this.accountRepository.CurrentLoginAccountBindInfo()];case 1:return n=i.sent(),[4,this.accountRepository.BindingAccountInfo(e)];case 2:return r=i.sent(),o=null===(s=n.resData)||void 0===s?void 0:s.data,a=null===(c=r.resData)||void 0===c?void 0:c.data,o&&a?[2,{isCanBind:o.allowBind&&a.allowBind,nextBindTime:N()([o.nextAllowBindTime,a.nextAllowBindTime]),qqNickName:a.nick,qqAvatar:a.avatar}]:[2,{isCanBind:!1,nextBindTime:0,qqAvatar:"",qqNickName:""}]}}))}))},e=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object,String,Object])],e)}(T.Z),q=n(382972),H="".concat(h.Hf,"/api/vipcenter/info/all"),B="".concat(h.Hf,"/api/personalize/show/tips"),V=function(){function t(t){this.networkRequestService=t}return t.prototype.getPersonalVipInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,l.bk)({xsrf:(0,c.w$)(c.$W.xsrf)}),[2,this.networkRequestService.instance.post(H,t)]}))}))},t.prototype.getPersonalTipsShow=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,l.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,c.w$)(c.$W.xsrf)})),[2,this.networkRequestService.instance.post(B,e)]}))}))},(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getPersonalVipInfo",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getPersonalTipsShow",null),t=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),W=function(){function t(t){this.networkRequestService=t,this.userInfoRepository=new q.Z(this.networkRequestService),this.vipInfoRepository=new V(this.networkRequestService)}return t.prototype.init=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2]}))}))},t.prototype.createPersonalEnvAccountAggregateByUserInfoCgi=function(t,e){var n=this.changeFetchDataToBaseDate(t,e);return this.accountAggregate=new U(this.networkRequestService,n.tinyId,n),this.accountAggregate.completionUserInfo(t),!0},t.prototype.createPersonalEnvAccountAggregateByBasicClientVars=function(t){return t?(this.accountAggregate=new U(this.networkRequestService,t.tinyId||r.Dr,t),!0):(this.accountAggregate=new U(this.networkRequestService,r.Dr),!1)},t.prototype.updatePersonalEnvAccountAggregate=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.__generator)(this,(function(i){return this.updateUserIndex(t),e=null===(o=null===(r=null===(n=this.accountAggregate)||void 0===n?void 0:n.userInfo)||void 0===r?void 0:r.settings)||void 0===o?void 0:o.language,[2,this.createPersonalEnvAccountAggregateForFetch(t,e)]}))}))},t.prototype.completionUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.userInfoRepository.getPersonalUserInfo()];case 1:return 0===(null==(t=e.sent().resData)?void 0:t.retcode)?(this.accountAggregate.completionUserInfo(t.data),[2,!0]):[2,!1]}}))}))},t.prototype.updatePersonalNicknameAndAvatar=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.userInfoRepository.updatePersonalNicknameAndAvatar(t)];case 1:return 0===(null==(e=n.sent().resData)?void 0:e.retcode)?[2,!0]:[2,!1]}}))}))},t.prototype.getUserVipInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.vipInfoRepository.getPersonalVipInfo()];case 1:return 0===(null==(t=e.sent().resData)?void 0:t.retcode)?(this.accountAggregate.completionVipInfo(t.data),[2,!0]):[2,!1]}}))}))},t.prototype.getTipsStatus=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.vipInfoRepository.getPersonalTipsShow(t)];case 1:return 0===(null==(e=n.sent().resData)?void 0:e.retcode)?[2,e.data.result.isShow]:[2,!1]}}))}))},t.prototype.createPersonalEnvAccountAggregateForFetch=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.userInfoRepository.getPersonalUserInfo()];case 1:return 0!==(null==(n=i.sent().resData)?void 0:n.retcode)?[3,3]:(r=this.changeFetchDataToBaseDate(n.data,t,e),this.accountAggregate=new U(this.networkRequestService,n.data.tinyid,r),this.accountAggregate.completionUserInfo(n.data),[4,this.getUserVipInfo()]);case 2:return i.sent(),[2,!0];case 3:return[2,!1]}}))}))},t.prototype.changeFetchDataToBaseDate=function(t,e,n){var i=t.corpId,r=t.tinyid,o=t.corpName,a=t.englishName,s=t.loginType,c=t.wxOpenid,u=t.uin,d=t.uidSource,_=t.userId,p=t.avatar,f=t.nick;return{corpId:i,corpName:o,englishName:a,loginType:s,uin:u,uidSource:d,userId:null!=_?_:"p.".concat(r),nowUserIndex:null!=e?e:"",tinyId:r,openId:c,userName:f,userPic:p,settings:{language:null!=n?n:"",toolbarMode:"",vipTheme:""}}},t.prototype.updateUserIndex=function(t){this.accountAggregate.updateNowUserIndex(t)},(0,i.__decorate)([(0,a.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,i.__decorate)([(0,i.__param)(0,o._),(0,i.__metadata)("design:paramtypes",[Object])],t)}()},887689:function(t,e,n){n.d(e,{b:function(){return i}});var i=(0,n(478247).y)("IEnterpriseAccountDomainService")},257387:function(t,e,n){n.d(e,{f:function(){return P}});var i,r=n(338104),o=n(924251),a=n(690592),s=n(963210),c=n(688118),u=n(101144),d=n(399812),_=n(564706),p=n(620492),f=n(661950),l=n(617025),h=n(754260),g=n(407777),v=n(128818),m=n(316788),y=((i={})[f.FW.WECHAT]=f.Lq.WECHAT,i[f.FW.WEWORK]=f.Lq.WEWORK,i),w=function(){return!!(0,h.ej)("wedoc_sid")},I=function(t){var e,n=w()?void 0:t.sid,i=void 0,o=void 0,a=void 0;return e=t.type===f.FW.WECHAT||w()?t.uid:t.uin,w()&&(i=t.sid,o=t.openid,a=e),(0,r.__assign)((0,r.__assign)({},t),{corpName:t.corp_name,uid:e,uType:y[t.type],nick:t.name,nickName:t.nick_name,wedriveUin:e,fromDomain:f.zM.B_DOMAIN,cookie:{wedriveSid:n,wedocSid:i,wedocOpenid:o,tdocUid:a,uType:y[t.type],uid:"",uidKey:"",userIndex:"",SID:"",isMultiLogin:!0}})},b=function(){function t(t){this.networkRequestService=t}return t.prototype.getEnterpriseAccountList=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,e,n,i,o,a;return(0,r.__generator)(this,(function(s){switch(s.label){case 0:return t=(0,g.At)(m.eP,{xrsf:"".concat((0,h.w$)(h.$W.xsrf)),get_acct:"true"}),[4,this.networkRequestService.instance.get(t)];case 1:return e=s.sent(),n=function(t){void 0===t&&(t="{}");var e=t.replace(/"uin":(\d+)/g,'"uin":"$1"').replace(/"uid":(\d+)/g,'"uid":"$1"');return JSON.parse(e)}(null===(a=e.request)||void 0===a?void 0:a.responseText),i=n.body,o=n.head,[2,(0,r.__assign)((0,r.__assign)({},e),{data:{data:(u=i.session,d=(0,c.Z)(),u.map((function(t){return t.type!==f.FW.WECHAT||t.uid||(t.uid=d[t.uin]),t})).filter((function(t){return t.uid}))).map(I),retcode:o.ret,msg:o.msg}})]}var u,d}))}))},t.prototype.getUserMarkNameListByUids=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return e=(0,g.At)(m.sv,{xrsf:"".concat((0,h.w$)(h.$W.xsrf)),uids:"[".concat(t.join(","),"]")}),[4,this.networkRequestService.instance.get(e)];case 1:return n=i.sent(),[2,(0,r.__assign)((0,r.__assign)({},n),{data:{data:n.data.result.rsp,retcode:n.data.retcode,msg:n.data.msg}})]}}))}))},t.prototype.delEnterpriseAccountForList=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){return e=(0,g.At)(v.DE,{xrsf:"".concat((0,h.w$)(h.$W.xsrf)),sid:t}),[2,this.networkRequestService.instance.get(e)]}))}))},(0,r.__decorate)([(0,l.Hh)(),(0,l.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"getEnterpriseAccountList",null),(0,r.__decorate)([(0,l.Hh)(),(0,l.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Array]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"getUserMarkNameListByUids",null),(0,r.__decorate)([(0,l.Hh)(),(0,l.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[String]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"delEnterpriseAccountForList",null),t=(0,r.__decorate)([(0,r.__param)(0,o._),(0,r.__metadata)("design:paramtypes",[Object])],t)}(),S=b,C=function(t){function e(e,n){var i=t.call(this,n)||this;return i.networkRequestService=e,i.enterpriseAccountListRepository=new S(e),i.enterpriseAccountList=[],i}return(0,r.__extends)(e,t),e.prototype.getEnterpiseAccountList=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.enterpriseAccountListRepository.getEnterpriseAccountList()];case 1:return t=e.sent().resData,this.enterpriseAccountList=(null==t?void 0:t.data.data)?t.data.data:[],[2,this.enterpriseAccountList]}}))}))},e.prototype.getUserMarkNameListByUids=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.enterpriseAccountListRepository.getUserMarkNameListByUids(t)];case 1:return e=n.sent().resData,this.userMarkNameList=(null==e?void 0:e.data.data)?e.data.data:[],[2,this.userMarkNameList]}}))}))},e.prototype.delEnterpriseAccountForList=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.enterpriseAccountListRepository.delEnterpriseAccountForList(t)];case 1:return e.sent(),this.updateEntrepriseAccountListAfterDel(t),[2,!0]}}))}))},e.prototype.updateEntrepriseAccountListAfterDel=function(t){this.enterpriseAccountList=this.enterpriseAccountList.filter((function(e){return e.cookie.wedocSid!==t&&e.cookie.wedriveSid!==t}))},e=(0,r.__decorate)([(0,r.__param)(0,o._),(0,r.__metadata)("design:paramtypes",[Object,String])],e)}(n(886531).J),E=C,A=n(121688),R=n(655659),M=n(912214),O=function(t){function e(e){var n=t.call(this)||this;if(n.type=M.qu.NONE,n.beginTime=0,n.endTime=0,n.vvip={status:0,beginTime:0,endTime:0},n.customInfo={avatarFrame:"",badgeUrl:"",corpVipLevel:M.vA.INVALID_CORP_VIP_LEVEL},!e)return n;var i=n.createEmptyVip();return n.jsonObj2Class(i),n}return(0,r.__extends)(e,t),e.prototype.updateVipUserInfo=function(t){if(t){var e=this.handleVipCustomInfoFromNet(t);this.jsonObj2Class({customInfo:e})}},e.prototype.createEmptyVip=function(){return{type:M.qu.NONE,beginTime:0,endTime:0}},e.prototype.handleVipCustomInfoFromNet=function(t){var e={};try{e=JSON.parse(t)}catch(t){e={}}var n=e.avatar_frame_url,i=void 0===n?"":n,r=e.badge_url,o=void 0===r?"":r,a=e.corp_vip_level;return{avatarFrame:i,badgeUrl:o,corpVipLevel:void 0===a?M.vA.INVALID_CORP_VIP_LEVEL:a}},e}(R.K),D=function(t){function e(e,n,i){var r=t.call(this,n)||this;return r.networkRequestService=e,r.vipInfo=new O,r.bindUserInfo=new u.B,r.officialInfo=new d.Z,r.enterpriseAccountListEntity=new E(e,n),r.userInfo=new A.K(i),r.accountRepository=new _.P(e),r}return(0,r.__extends)(e,t),e.prototype.completionUserInfo=function(t){t.vipInfo&&(this.vipInfo=new O),t.vip&&this.vipInfo.updateVipUserInfo(t.vip),t.wechatOfficialAccount&&(this.officialInfo=new d.Z(t.wechatOfficialAccount)),this.bindUserInfo=new u.B(t)},e=(0,r.__decorate)([(0,r.__param)(0,o._),(0,r.__metadata)("design:paramtypes",[Object,String,Object])],e)}(p.Z),k=n(982764),L=n(382972),P=function(){function t(t){var e=this;this.networkRequestService=t,this.updateBLocalStoragePersionTinyid=function(t){return(0,r.__awaiter)(e,void 0,void 0,(function(){var e,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t.loginType===a.Q.WX&&t.tinyid?[4,this.accountAggregate.enterpriseAccountListEntity.getUserMarkNameListByUids([t.tinyid])]:[3,2];case 1:e=r.sent(),(n=null===(i=e[0])||void 0===i?void 0:i.wedriveUin)&&(0,c.r)({wedriveUin:n,tinyid:t.tinyid}),r.label=2;case 2:return[2]}}))}))},this.userInfoRepository=new L.Z(this.networkRequestService)}return t.prototype.init=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return[2]}))}))},t.prototype.createEnterpriseEnvAccountAggregateByBasicClientVars=function(t){return t?(this.accountAggregate=new D(this.networkRequestService,t.tinyId||k.Dr,this.changeBasicClientVarsToBaseData(t)),!0):(this.accountAggregate=new D(this.networkRequestService,k.Dr),!1)},t.prototype.completionUserInfo=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.userInfoRepository.getEnterpriseUserInfo()];case 1:return(t=e.sent())?(this.accountAggregate.completionUserInfo(t),[2,!0]):[2,!1]}}))}))},t.prototype.createEnterpriseEnvAccountAggregateByUserInfoCgi=function(t,e){var n=this.changeFetchDataToBaseData(t,e);this.accountAggregate=new D(this.networkRequestService,n.tinyId,n)},t.prototype.changeBasicClientVarsToBaseData=function(t){return(0,r.__assign)({},t)},t.prototype.changeFetchDataToBaseData=function(t,e,n){this.updateBLocalStoragePersionTinyid(t);var i=t.corpId,r=t.tinyid,o=t.corpName,s=t.englishName,c=t.loginType,u=t.wxOpenid,d=t.uin,_=t.uidSource,p=t.userId,f=t.avatar,l={corpId:i,corpName:o,englishName:s,loginType:c,uin:d,uidSource:_,userId:p,tinyId:r,openId:u,userName:t.nick,userPic:f,wedriveUin:"",nowUserIndex:"",settings:{language:null!=n?n:"",toolbarMode:"",vipTheme:""}};return e.body.login_type===a.R.WECHAT?l.wedriveUin=e.body.account.s_vid:e.body.login_type===a.R.WEWORK&&(l.wedocOpenId=e.body.account.openid,l.wedriveUin=e.body.account.s_uid),l},(0,r.__decorate)([(0,s.u)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,r.__decorate)([(0,r.__param)(0,o._),(0,r.__metadata)("design:paramtypes",[Object])],t)}()},694335:function(t,e,n){n.d(e,{C:function(){return i}});var i=(0,n(478247).y)("ILoginDomainService")},988455:function(t,e,n){n.d(e,{g:function(){return D}});var i,r,o,a=n(338104),s=n(55152),c=n(617025),u=n(924251),d=n(754260),_=n(407777),p=n(848330),f="".concat(p.Hf,"/v2/cgi-bin/online_docs/polling"),l="".concat(p.d0,"polling/key/create"),h="".concat(p.Hf,"/cgi-bin/online_docs/wxqrcode"),g=("".concat(p.HL,"user_info"),"".concat(p.Hf,"/api/user/qq/login")),v="".concat(p.Hf,"/api/user/oauth/qq/login"),m="".concat(p.d0,"work_weixin/login"),y="".concat(p.Hf,"/api/user/login/wxqrcode");!function(t){t.none="",t.login="login"}(i||(i={})),function(t){t[t.none=0]="none",t[t.request=1]="request"}(r||(r={})),function(t){t[t.WECHAT_LOGIN_CASE_DEFAULT=0]="WECHAT_LOGIN_CASE_DEFAULT",t[t.WECHAT_LOGIN_CASE_H5=1]="WECHAT_LOGIN_CASE_H5"}(o||(o={}));var w="x-u",I="userIndex",b=function(){function t(t){this.networkRequestService=t}return t.prototype.pollingKeyCreate=function(t){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(n){return e="".concat(l,"?ac=").concat(t),[2,this.networkRequestService.instance.post(e,{xsrf:(0,d.w$)(d.$W.xsrf)})]}))}))},t.prototype.getWeChatLogInQRURI=function(){return(0,a.__awaiter)(this,arguments,void 0,(function(t){var e;return void 0===t&&(t=o.WECHAT_LOGIN_CASE_DEFAULT),(0,a.__generator)(this,(function(n){return e=(0,_.At)(y,{case:t}),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.getWeChatLogInQRCodeURI=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,a.__generator)(this,(function(n){return t={ac:"login",ts:Date.now(),page:encodeURIComponent("pages/landingpage/landingpage"),checkKey:"1",xsrf:"".concat((0,d.w$)(d.$W.xsrf))},e=(0,_.At)(h,t),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.updateWeChatLoginQRCodeStatus=function(t){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,a.__generator)(this,(function(i){return e={CheckKey:t,u:"login"},n=(0,_.At)(f,e),[2,this.networkRequestService.instance.post(n)]}))}))},t.prototype.updateEnterpriseWeChatLoginQRCodeStatus=function(t){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,a.__generator)(this,(function(i){return e={CheckKey:t},n=(0,_.At)(f,e),[2,this.networkRequestService.instance.post(n)]}))}))},t.prototype.checkQQLogin=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var t;return(0,a.__generator)(this,(function(e){return t="".concat(g,"?u=login"),[2,this.networkRequestService.instance.post(t,{xsrf:(0,d.w$)(d.$W.xsrf)})]}))}))},t.prototype.checkQQOAuthLogin=function(t){return(0,a.__awaiter)(this,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(n){return e="".concat(v,"?state=state"),[2,this.networkRequestService.instance.post(e,{xsrf:(0,d.w$)(d.$W.xsrf),code:t})]}))}))},t.prototype.weworkLogin=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){var t;return(0,a.__generator)(this,(function(e){return t="".concat(m,"?u=login"),[2,this.networkRequestService.instance.post(t,{xsrf:(0,d.w$)(d.$W.xsrf)})]}))}))},(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"pollingKeyCreate",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"getWeChatLogInQRURI",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"getWeChatLogInQRCodeURI",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,c.GT)(w,I),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"updateWeChatLoginQRCodeStatus",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"updateEnterpriseWeChatLoginQRCodeStatus",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,c.GT)(w,I),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"checkQQLogin",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,c.GT)(w,I),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"checkQQOAuthLogin",null),(0,a.__decorate)([(0,c.Hh)(),(0,c.bj)(),(0,c.GT)(w,I),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"weworkLogin",null),t=(0,a.__decorate)([(0,a.__param)(0,u._),(0,a.__metadata)("design:paramtypes",[Object])],t)}(),S=b,C=n(620492),E=n(387540),A=n(285485),R=function(t){function e(e,n){var i=t.call(this,n)||this;return i.networkRequestService=e,i.loginRepository=new S(e),i}return(0,a.__extends)(e,t),e.prototype.reloadMiniProgramForDesktop=function(){var t,e;null===(e=null===(t=null===window||void 0===window?void 0:window.wx)||void 0===t?void 0:t.miniProgram)||void 0===e||e.reLaunch({url:"/pages/list/list?reason=pskey_error"})},e.prototype.loginDocsInMiniProgram=function(t){var e,n,i,r="/pages/detail/detail?reason=pskey_error&url=".concat(encodeURIComponent(t));(0,E.getQuery)("rtkey")&&(r+="&scene=".concat((0,E.getQuery)("rtkey"))),null===(i=null===(n=null===(e=window.wx)||void 0===e?void 0:e.miniProgram)||void 0===n?void 0:n.reLaunch)||void 0===i||i.call(n,{url:r})},e.prototype.loginDocsInWework=function(t){if(s.gH===s.Cs){var e="".concat(s.i4,"?url=").concat(encodeURIComponent(t)),n="".concat(s.zC,"?appid=ww20388f7040b655b7&redirect_uri=").concat(encodeURIComponent(e),"&response_type=code&scope=snsapi_userinfo&state=weworklogin#wechat_redirect");location.replace(n)}},e.prototype.jumpToLoginInWechatWebview=function(t){(0,A.tencentDocOpenUrlForAll)({url:"".concat(s.Sc,"?url=").concat(encodeURIComponent(t),"&wxonly=1"),replace:!0})},e.prototype.jumpToLoginInWeworkWebview=function(t){var e="".concat(s.zC,"?appid=ww20388f7040b655b7&redirect_uri=").concat(encodeURIComponent(t),"&response_type=code&scope=snsapi_userinfo&state=weworklogin#wechat_redirect");(0,A.tencentDocOpenUrlForAll)({url:e,replace:!0})},e.prototype.jumpToLoginInCommonView=function(t){(0,A.tencentDocOpenUrlForAll)({url:"".concat(s.kC,"?jump_url=").concat(encodeURIComponent(t)),replace:!0})},e.prototype.timOrQQH5Login=function(){window.mqq?window.mqq.invoke("data","updateLoginInfo",{key:"pskey"},(function(){location.reload()})):n.g.location.reload()},e=(0,a.__decorate)([(0,a.__param)(0,u._),(0,a.__metadata)("design:paramtypes",[Object,String])],e)}(C.Z),M=R,O=n(963210),D=function(){function t(t){this.networkRequestService=t}return t.prototype.createLoginAggregate=function(t){this.loginAggregate=new M(this.networkRequestService,t)},t.prototype.init=function(){return(0,a.__awaiter)(this,void 0,void 0,(function(){return(0,a.__generator)(this,(function(t){return[2]}))}))},(0,a.__decorate)([(0,O.u)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,a.__decorate)([(0,a.__param)(0,u._),(0,a.__metadata)("design:paramtypes",[Object])],t)}()},89207:function(t,e,n){n.d(e,{B:function(){return i}});var i=(0,n(478247).y)("IAtMessageDomainService")},609782:function(t,e,n){n.d(e,{M:function(){return C}});var i=n(338104),r=n(848330),o="".concat(r.jo,"mention/mention_add"),a="".concat(r.jo,"mention/mention_del"),s="".concat(r.jo,"mention/get_doc_mention_list"),c="".concat(r.jo,"mention/get_my_mention_list"),u="".concat(r.jo,"mention/mention_read_report"),d=n(924251),_=n(711496),p=n(734460),f=n(754260),l=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.getDocMentionList=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t=(0,_.bk)({globalPadId:this.globalPadId,xsrf:(0,f.w$)(f.$W.xsrf)}),e="".concat(s),[4,this.networkRequestService.instance.post(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.getMyMentionList=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t=(0,_.bk)({globalPadId:this.globalPadId,xsrf:(0,f.w$)(f.$W.xsrf)}),e="".concat(c),[4,this.networkRequestService.instance.post(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.deleteMention=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=(0,_.bk)({globalPadId:this.globalPadId,mentions:JSON.stringify(t),xsrf:(0,f.w$)(f.$W.xsrf)}),n="".concat(a),[4,this.networkRequestService.instance.post(n,e)];case 1:return[2,i.sent()]}}))}))},t.prototype.addMention=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=(0,_.bk)({globalPadId:this.globalPadId,mentions:JSON.stringify(t),vfwebqq:e,xsrf:(0,f.w$)(f.$W.xsrf)}),r="".concat(o),[4,this.networkRequestService.instance.post(r,n)];case 1:return[2,i.sent()]}}))}))},t.prototype.mentionReadReport=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=(0,_.bk)({globalPadId:this.globalPadId,mentions:JSON.stringify(t),xsrf:(0,f.w$)(f.$W.xsrf)}),n="".concat(u),[4,this.networkRequestService.instance.post(n,e)];case 1:return[2,i.sent()]}}))}))},Object.defineProperty(t.prototype,"globalPadId",{get:function(){var t=this.docMetaDomainService.docMetaEntity.padInfo.padId,e=this.docMetaDomainService.docMetaEntity.padInfo.domainId;return(0,_.B8)(e,t)},enumerable:!1,configurable:!0}),t=(0,i.__decorate)([(0,i.__param)(0,p.v),(0,i.__param)(1,d._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),h=n(655659),g=function(t){function e(e){var n=t.call(this)||this;return n.anchorId="",n.mentionId="",n.mentionType=0,n.notify=0,n.read=!1,n.targetId="",n.sender={},n.mentionedUser={},n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(h.K),v=function(t){function e(e){var n=t.call(this)||this;return n.anchorId="",n.mentionId="",n.mentionType=0,n.notify=0,n.targetId="",n.read=!1,n.mentionFrom={},n.mentionTo={},n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(h.K),m=n(620492),y=n(617025),w=n(332574),I="mentions",b=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.docMetaDomainService=n,r.networkRequestService=i,r.atMeUserList=[],r.atUserList=[],r.onAtUserListUpdatedEmitter=new w.Emitter,r.onAtMeUserListUpdatedEmitter=new w.Emitter,r.onAtUserListUpdated=r.onAtUserListUpdatedEmitter.event,r.onAtMeUserListUpdated=r.onAtMeUserListUpdatedEmitter.event,r.atMessageRepository=new l(n,i),r}return(0,i.__extends)(e,t),e.prototype.getDocMentionList=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.atMessageRepository.getDocMentionList()];case 1:return[2,t.sent()]}}))}))},e.prototype.getMyMentionList=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.atMessageRepository.getMyMentionList()];case 1:return[2,t.sent()]}}))}))},e.prototype.addMention=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e=(0,_.CY)(),[4,this.atMessageRepository.addMention(t,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.deleteMention=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.atMessageRepository.deleteMention(t)];case 1:return[2,e.sent()]}}))}))},e.prototype.clearMentionMarks=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.atMessageRepository.mentionReadReport(t)];case 1:return[2,e.sent()]}}))}))},(0,i.__decorate)([(0,y.EL)(g.prototype.constructor,"atUserList","result",I),(0,y.Hh)(),(0,y.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"getDocMentionList",null),(0,i.__decorate)([(0,y.FY)(v.prototype.constructor,"atMeUserList",I),(0,y.Hh)(),(0,y.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"getMyMentionList",null),(0,i.__decorate)([(0,y.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Array]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"addMention",null),(0,i.__decorate)([(0,y.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Array]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"deleteMention",null),(0,i.__decorate)([(0,y.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Array]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"clearMentionMarks",null),e=(0,i.__decorate)([(0,i.__param)(1,p.v),(0,i.__param)(2,d._),(0,i.__metadata)("design:paramtypes",[String,Object,Object])],e)}(m.Z),S=n(963210),C=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequest=e,this.atMessageAggregate=new b("mainAtMessageAggregate",t,e)}return t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.docMetaDomainService.init(t)];case 1:return e.sent(),[2]}}))}))},(0,i.__decorate)([(0,S.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,i.__decorate)([(0,i.__param)(0,p.v),(0,i.__param)(1,d._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}()},893014:function(t,e,n){var i,r,o;n.d(e,{e0:function(){return o},sX:function(){return r},ul:function(){return i}}),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SHOW=1]="SHOW",t[t.HIDE=2]="HIDE"}(i||(i={})),function(t){t[t.SELF=0]="SELF",t[t.COOPERATION=1]="COOPERATION",t[t.VIEWABLE=2]="VIEWABLE",t[t.EDITABLE=3]="EDITABLE"}(r||(r={})),function(t){t[t.deny=0]="deny",t[t.whitelist=1]="whitelist",t[t.allOnlyRead=2]="allOnlyRead",t[t.allOnlyWrite=3]="allOnlyWrite",t[t.allOnlyExecute=4]="allOnlyExecute",t[t.invalidPolicy=999]="invalidPolicy"}(o||(o={}))},695503:function(t,e,n){var i;n.d(e,{V:function(){return i}}),function(t){t[t.noPrivilege=0]="noPrivilege",t[t.reader=1]="reader",t[t.editor=2]="editor",t[t.filler=3]="filler",t[t.executor=4]="executor",t[t.externUser=10]="externUser",t[t.administrator=1024]="administrator",t[t.owner=2048]="owner"}(i||(i={}))},908576:function(t,e,n){n.d(e,{i:function(){return i}});var i=(0,n(478247).y)("IAuthDomainService")},535669:function(t,e,n){n.d(e,{n:function(){return F}});var i=n(338104),r=n(893014),o=n(695503),a=n(848330),s="".concat(a.Hf,"/dop-api/drive/data/get"),c="".concat(a.HL,"auth_info/get"),u="".concat(a.HL,"auth_info/set"),d="".concat(a.HL,"auth_exp/get"),_="".concat(a.HL,"auth_exp/set"),p="".concat(a.HL,"auth_getconf"),f="".concat(a.Hf,"/v2/privilege/corpshare/docownerget"),l="".concat(a.Hf,"/v2/privilege/corpshare/docownerset"),h="".concat(a.Hf,"/v2/privilege/set_user"),g=n(924251),v=n(711496),m=n(734460),y=n(754260),w=n(407777),I=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.fetchAuthInfoData=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e={id:t,xsrf:"".concat((0,y.w$)(y.$W.xsrf))},n=(0,w.At)(s,e),[4,this.networkRequestService.instance.get(n)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchAuthInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t={localPadId:this.docMetaDomainService.docMetaEntity.padInfo.padId,domain:this.docMetaDomainService.docMetaEntity.padInfo.domainId,type:1,ver:2,xsrf:"".concat((0,y.w$)(y.$W.xsrf))},e=(0,w.At)(c,t),[4,this.networkRequestService.instance.post(e)];case 1:return[2,n.sent()]}}))}))},t.prototype.changeAuthInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.corpId,n=t.data,r=t.message,o=t.dataType,a={localPadId:this.docMetaDomainService.docMetaEntity.padInfo.padId,domain:this.docMetaDomainService.docMetaEntity.padInfo.domainId,corp_id:(0,v.Pc)(e),data:(0,v.Pc)(n),message:(0,v.Pc)(r),dataType:(0,v.fQ)(o),type:1,ver:2,xsrf:"".concat((0,y.w$)(y.$W.xsrf))},s=(0,w.At)(u,a),[4,this.networkRequestService.instance.post(s)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchAuthExpTime=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t={domainId:this.docMetaDomainService.docMetaEntity.padInfo.domainId,localPadId:this.docMetaDomainService.docMetaEntity.padInfo.padId,xsrf:"".concat((0,y.w$)(y.$W.xsrf)),type:1,ver:2},e=(0,w.At)(d,t),[4,this.networkRequestService.instance.get(e)];case 1:return[2,n.sent()]}}))}))},t.prototype.changeAuthExpTime=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=(0,v.bk)({domainId:this.docMetaDomainService.docMetaEntity.padInfo.domainId,localPadId:this.docMetaDomainService.docMetaEntity.padInfo.padId,setTime:parseInt(t,10),xsrf:"".concat((0,y.w$)(y.$W.xsrf))}),n={contentType:"application/x-www-form-urlencoded"},[4,this.networkRequestService.instance.post(_,e,n)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchFolderAuth=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e={folderId:t,type:1,ver:2,xsrf:"".concat((0,y.w$)(y.$W.xsrf))},n=(0,w.At)(c,e),[4,this.networkRequestService.instance.post(n)];case 1:return[2,i.sent()]}}))}))},t.prototype.changeFolderAuth=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.folderId,n=t.corpId,r=t.message,o=t.data,a=t.clear,s={folderId:e,corp_id:(0,v.Pc)(n),data:(0,v.Pc)(o),message:(0,v.Pc)(r),clear:(0,v.fQ)(a),type:1,ver:2,xsrf:"".concat((0,y.w$)(y.$W.xsrf))},c=(0,w.At)(u,s),[4,this.networkRequestService.instance.post(c)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchAuthConfig=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t={domainId:this.docMetaDomainService.docMetaEntity.padInfo.domainId,localPadId:this.docMetaDomainService.docMetaEntity.padInfo.padId,xsrf:"".concat((0,y.w$)(y.$W.xsrf))},e=(0,w.At)(p,t),[4,this.networkRequestService.instance.post(e)];case 1:return[2,n.sent()]}}))}))},t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),b=n(655659),S=function(t){function e(e){var n=t.call(this)||this;return n.expTime=0,n.remainTime=0,n.setTime=0,n.startTime=0,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(b.K),C=n(617025),E=n(332574),A=function(t){function e(e){var n=t.call(this)||this;return n.readerCanComment=!1,n.viewForbidCopyPrint=!1,n.writerCanComment=!1,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(b.K),R=function(t){function e(e){var n=t.call(this)||this;return n.canAbout=!1,n.canAddUser=!1,n.canAnnotate=!1,n.canComment=!1,n.canCopy=!1,n.canCopyDoc=!1,n.canEdit=!1,n.canEditTitle=!1,n.canHistory=!1,n.canLinkExp=!1,n.canPrint=!1,n.canRead=!1,n.canSearch=!1,n.canShare=!1,n.canFeedback=!1,n.canSpitSlot=!1,n.canTranslate=!1,n.canViewImage=!1,n.canWatermark=!1,n.isPrivilegeExpired=!1,n.canApplyEdit=!1,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(b.K),M=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e,this.selfRole=o.V.noPrivilege,this.isOwner=!1,this.selfDocPrivilege=new R({}),this.selfDocAdvancedPrivilege=new A({}),this.documentPrivilege=r.e0.deny,this.memberList=[],this.onAuthChangedEmitter=new E.Emitter,this.onAuthExpTimeChangedEmitter=new E.Emitter,this.onSelfPrivilegeChangedEmitter=new E.Emitter,this.authRepository=new I(t,e),this.onAuthChanged=this.onAuthChangedEmitter.event,this.onAuthExpTimeChanged=this.onAuthExpTimeChangedEmitter.event,this.onSelfPrivilegeChanged=this.onSelfPrivilegeChangedEmitter.event}return t.prototype.fetchAuthExpTime=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.authRepository.fetchAuthExpTime()];case 1:return[2,t.sent()]}}))}))},t.prototype.changeAuthExpTime=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.authRepository.changeAuthExpTime(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.fetchAuthInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.authRepository.fetchAuthInfo()];case 1:return[2,t.sent()]}}))}))},t.prototype.changeAuthInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.authRepository.changeAuthInfo(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.fetchAuthInfoData=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.authRepository.fetchAuthInfoData(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.fetchFolderAuth=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.authRepository.fetchFolderAuth(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.changeFolderAuth=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.authRepository.changeFolderAuth(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.fetchAuthConfig=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.authRepository.fetchAuthConfig()];case 1:return[2,t.sent()]}}))}))},t.prototype.onReceiveMessageFromServer=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.notifyRightChange(t)];case 1:return n.sent(),this.checkSelfPrivilege(e),[2]}}))}))},t.prototype.handleForDifferentActions=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.seq,1!==t.action?[3,4]:t?void 0!==(n=t)[e]?[3,2]:[4,this.handleAuthChange()]:[3,3];case 1:return i.sent(),[3,3];case 2:delete n[e],i.label=3;case 3:return[3,7];case 4:return 2!==t.action?[3,5]:[3,7];case 5:return[4,this.handleExpInfoChange(t)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},t.prototype.handleAuthChange=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return this.isOwner?[4,this.fetchAuthInfo()]:[2];case 1:return 0===(t=n.sent()).resData.cgicode&&0===t.resData.retcode&&(e=t.resData.data,this.documentPrivilege=e.policy,this.memberList=e.memberList,this.onAuthChangedEmitter.fire({newDocumentPrivilege:this.documentPrivilege})),[2]}}))}))},t.prototype.handleExpInfoChange=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return this.checkExpTimeParams(t)&&(e=t.exptime-t.starttime)&&e>0&&(n=new S({expTime:t.exptime,remainTime:e,setTime:e,startTime:t.starttime}),this.onAuthExpTimeChangedEmitter.fire({newExpTime:n})),[2]}))}))},t.prototype.checkExpTimeParams=function(t){return"undefined"!==t.exptime&&"undefined"!==t.settime&&"undefined"!==t.starttime},t.prototype.checkSelfPrivilege=function(t){var e=this;t.sendMessage({cmd:"GET_PRIVILEGE",taskId:void 0,data:JSON.stringify({}),onsend:function(t,n,i,r){if(e.checkGetPrivilegeResult(r)){var o=r.response.onpost.privilege_attribute;e.checkDocPrivilegeChange(o)&&(e.selfDocPrivilege.canEdit=o.can_edit,e.selfDocPrivilege.canRead=o.can_read,e.selfDocPrivilege.canComment=o.can_comment,e.selfDocPrivilege.canCopy=o.can_copy,e.selfDocPrivilege.canEditTitle=o.can_edit_title,e.onSelfPrivilegeChangedEmitter.fire({newSelfPrivilege:e.selfDocPrivilege}))}},onError:function(){}})},t.prototype.checkGetPrivilegeResult=function(t){var e,n;return 0===t.errCode&&0===(null===(n=null===(e=t.response)||void 0===e?void 0:e.onpost)||void 0===n?void 0:n.result)},t.prototype.checkDocPrivilegeChange=function(t){return this.selfDocPrivilege.canEdit!==t.can_edit||this.selfDocPrivilege.canRead!==t.can_read||this.selfDocPrivilege.canComment!==t.can_comment||this.selfDocPrivilege.canCopy!==t.can_copy||this.selfDocPrivilege.canEditTitle!==t.can_edit_title},t.prototype.notifyRightChange=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return!t||""!==t.payload&&null!==t.payload?[3,2]:[4,this.handleAuthChange()];case 1:case 3:return n.sent(),[2];case 2:return null===(e=(0,v.KV)(decodeURIComponent(t.payload),decodeURIComponent(t.payload)))?[2]:[4,this.handleForDifferentActions(e)]}}))}))},(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchAuthExpTime",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"changeAuthExpTime",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchAuthInfo",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"changeAuthInfo",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchAuthInfoData",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchFolderAuth",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"changeFolderAuth",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchAuthConfig",null),t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),O=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.setUserAuth=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return e=(0,y.w$)(y.$W.xsrf)||"",n=(0,i.__assign)({xsrf:e},t),r=(0,w.At)(h,{xsrf:e}),[4,this.networkRequestService.instance.post(r,n)];case 1:return[2,o.sent()]}}))}))},t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),D=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e,this.collabAuthRepository=new O(t,e)}return t.prototype.setCollabUserAuth=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.collabAuthRepository.setUserAuth(t)];case 1:return[2,e.sent()]}}))}))},(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"setCollabUserAuth",null),t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),k=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.changeCorpShareAuthInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s;return(0,i.__generator)(this,(function(c){switch(c.label){case 0:return e=t.uid,n=t.corpId,r=t.isOpen,o=t.canExternalApply,a=t.docCorpSharePolicy,s={user_info:{uid:e,corp_id:n},doc_id:this.docMetaDomainService.docMetaEntity.padInfo.padId,is_open:r,can_external_apply:o,uint32_policy:Math.round(Number(a||2)),xsrf:(0,y.w$)(y.$W.xsrf)},[4,this.networkRequestService.instance.post(l,(0,i.__assign)({},s))];case 1:return[2,c.sent()]}}))}))},t.prototype.fetchCorpShareAuthInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return n={user_info:{uid:t,corp_id:e},doc_id:this.docMetaDomainService.docMetaEntity.padInfo.padId,xsrf:(0,y.w$)(y.$W.xsrf)},[4,this.networkRequestService.instance.post(f,(0,i.__assign)({},n))];case 1:return[2,r.sent()]}}))}))},t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),L=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e,this.corpShareAuthRepository=new k(t,e)}return t.prototype.fetchCorpShareAuthInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.corpShareAuthRepository.fetchCorpShareAuthInfo(t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.changeCorpShareAuthInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.corpShareAuthRepository.changeCorpShareAuthInfo(t)];case 1:return[2,e.sent()]}}))}))},(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchCorpShareAuthInfo",null),(0,i.__decorate)([(0,C.Hh)(),(0,C.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"changeCorpShareAuthInfo",null),t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),P=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e,this.authInfoEntity=new M(t,e),this.corpShareAuthInfoEntity=new L(t,e),this.collabAuthInfoEntity=new D(t,e)}return t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),T=n(963210),F=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e,this.isInitedByBasicClientVars=!1,this.authAggregate=new P(t,e),window.basicClientVars&&this.initWithBasicClientVars(window.basicClientVars)}return t.prototype.updateWithClientVars=function(t){if(!this.isInitedByBasicClientVars){var e=function(t){var e={};if(t.privilegeAttribute){var n=t.privilegeAttribute,i=n.can_about,r=n.can_annotate,o=n.can_add_user,a=n.can_comment,s=n.can_copy,c=n.can_copy_doc,u=n.can_edit,d=n.can_edit_title,_=n.can_history,p=n.can_link_exp,f=n.can_print,l=n.can_read,h=n.can_search,g=n.can_share,v=n.can_spit_slot;e={canAbout:i,canAddUser:o,canAnnotate:r,canComment:a,canCopy:s,canCopyDoc:c,canEdit:u,canEditTitle:d,canHistory:_,canLinkExp:p,canPrint:f,canRead:l,canSearch:h,canShare:g,canSpitSlot:v,canFeedback:v,canTranslate:n.can_translate,canViewImage:n.can_view_image,canWatermark:n.can_watermark,canApplyEdit:!!t.privilegeAttribute.can_apply_edit}}return e}(t);this.authAggregate.authInfoEntity.selfDocPrivilege=new R(e),this.authAggregate.authInfoEntity.isOwner=t.isOwner,this.authAggregate.authInfoEntity.selfRole=t.rightFlag,this.authAggregate.authInfoEntity.documentPrivilege=t.policy,this.authAggregate.authInfoEntity.selfDocAdvancedPrivilege=new A({readerCanComment:t.advPolicy.reader_can_comment,viewForbidCopyPrint:t.advPolicy.view_forbid_copy_print,writerCanComment:t.advPolicy.writer_can_comment})}},t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s,c,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.docId,[4,this.authAggregate.authInfoEntity.fetchAuthInfoData(e)];case 1:return n=i.sent().resData,r=null==n?void 0:n.data.data,o=r.privilegeAttribute,a=r.advPolicy,this.authAggregate.authInfoEntity.isOwner=null!==(s=r.isOwner)&&void 0!==s&&s,this.authAggregate.authInfoEntity.selfRole=null!==(c=r.rightFlag)&&void 0!==c?c:0,this.authAggregate.authInfoEntity.documentPrivilege=null!==(u=r.policy)&&void 0!==u?u:0,this.authAggregate.authInfoEntity.selfDocPrivilege=new R({canAbout:null==o?void 0:o.canAbout,canAddUser:null==o?void 0:o.canAddUser,canAnnotate:null==o?void 0:o.canAnnotate,canComment:null==o?void 0:o.canComment,canCopy:null==o?void 0:o.canCopy,canCopyDoc:null==o?void 0:o.canCopyDoc,canEdit:null==o?void 0:o.canEdit,canEditTitle:null==o?void 0:o.canEditTitle,canHistory:null==o?void 0:o.canHistory,canLinkExp:null==o?void 0:o.canLinkExp,canPrint:null==o?void 0:o.canPrint,canRead:null==o?void 0:o.canRead,canSearch:null==o?void 0:o.canSearch,canShare:null==o?void 0:o.canShare,canSpitSlot:null==o?void 0:o.canSpitSlot,canFeedback:null==o?void 0:o.canSpitSlot,canTranslate:null==o?void 0:o.canTranslate,canViewImage:null==o?void 0:o.canViewImage,canWatermark:null==o?void 0:o.canWatermark,isPrivilegeExpired:!!r.privilegeExpire}),this.authAggregate.authInfoEntity.selfDocAdvancedPrivilege=new A({readerCanComment:null==a?void 0:a.reader_can_comment,viewForbidCopyPrint:null==a?void 0:a.view_forbid_copy_print,writerCanComment:null==a?void 0:a.writer_can_comment}),[2]}}))}))},t.prototype.initWithBasicClientVars=function(t){var e,n,i,r,o,a,s,c,u,d,_,p,f,l,h,g,v=function(t){var e;return(null===(e=t.authInfo)||void 0===e?void 0:e.attribute)?{canAbout:t.authInfo.attribute.canAbout,canAddUser:t.authInfo.attribute.canAddUser,canAnnotate:t.authInfo.attribute.canAnnotate,canComment:t.authInfo.attribute.canComment,canCopy:t.authInfo.attribute.canCopy,canCopyDoc:t.authInfo.attribute.canCopyDoc,canEdit:t.authInfo.attribute.canEdit,canEditTitle:t.authInfo.attribute.canEditTitle,canHistory:t.authInfo.attribute.canHistory,canLinkExp:t.authInfo.attribute.canLinkExp,canPrint:t.authInfo.attribute.canPrint,canRead:t.authInfo.attribute.canRead,canSearch:t.authInfo.attribute.canSearch,canShare:t.authInfo.attribute.canShare,canSpitSlot:t.authInfo.attribute.canSpitSlot,canFeedback:t.authInfo.attribute.canSpitSlot,canTranslate:t.authInfo.attribute.canTranslate,canViewImage:t.authInfo.attribute.canViewImage,canWatermark:t.authInfo.attribute.canWatermark,isPrivilegeExpired:t.authInfo.privilegeExpire,canApplyEdit:t.authInfo.attribute.canApplyEdit}:{}}(t);this.authAggregate.authInfoEntity.isOwner=null!==(n=null===(e=t.docInfo)||void 0===e?void 0:e.isOwner)&&void 0!==n&&n,this.authAggregate.authInfoEntity.selfRole=null!==(r=null===(i=t.authInfo)||void 0===i?void 0:i.privilegeFlag)&&void 0!==r?r:0,this.authAggregate.authInfoEntity.documentPrivilege=null!==(s=null===(a=null===(o=t.authInfo)||void 0===o?void 0:o.privilegeInfo)||void 0===a?void 0:a.uint32Policy)&&void 0!==s?s:0,this.authAggregate.authInfoEntity.selfDocPrivilege=new R(v),this.authAggregate.authInfoEntity.selfDocAdvancedPrivilege=new A({readerCanComment:null===(d=null===(u=null===(c=t.authInfo)||void 0===c?void 0:c.privilegeInfo)||void 0===u?void 0:u.advPolicy)||void 0===d?void 0:d.readerCanComment,viewForbidCopyPrint:null===(f=null===(p=null===(_=t.authInfo)||void 0===_?void 0:_.privilegeInfo)||void 0===p?void 0:p.advPolicy)||void 0===f?void 0:f.viewForbidCopyPrint,writerCanComment:null===(g=null===(h=null===(l=t.authInfo)||void 0===l?void 0:l.privilegeInfo)||void 0===h?void 0:h.advPolicy)||void 0===g?void 0:g.writerCanComment}),this.isInitedByBasicClientVars=!0},(0,i.__decorate)([(0,T.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,C.aU)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],t.prototype,"initWithBasicClientVars",null),t=(0,i.__decorate)([(0,i.__param)(0,m.v),(0,i.__param)(1,g._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}()},635369:function(t,e,n){n.d(e,{HX:function(){return o},fq:function(){return a},jF:function(){return r}});var i=n(911862);function r(t){return t.retcode||t.code||0}function o(t){return t.msg||t.message||t.retmsg||""}function a(t,e){var n;void 0===e&&(e=!0);var a=t.error,s=t.data;if(a)return{error:a,resData:null};var c={data:e&&s?(0,i.MO)(s):s,retcode:r(s),msg:o(s),cgicode:null!==(n=s.cgicode)&&void 0!==n?n:0};return delete s.msg,delete s.message,delete s.retcode,delete s.code,delete s.cgicode,delete s.ret,{resData:c}}},212906:function(t,e,n){n.d(e,{S:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.vipLevel=1,n.avatarFrameUrl="",n.renewalStatus=0,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K)},848330:function(t,e,n){n.d(e,{HL:function(){return a},Hf:function(){return o},RP:function(){return f},aP:function(){return _},bd:function(){return p},d0:function(){return s},jo:function(){return c},rW:function(){return u},yQ:function(){return d}});var i=n(55152),r=n(387540),o="//".concat((0,r.getHost)()),a="".concat(o,"/cgi-bin/online_docs/"),s="".concat(o,"/cgi-bin/api/"),c="".concat(o,"/cgi-go/"),u="".concat(o,"/v2/"),d="".concat(o,"/v3/"),_="".concat(o,"/cgi-go/"),p="//".concat(i.qe),f="//".concat(i.Cs)},413228:function(t,e,n){var i,r,o,a,s,c,u,d;n.d(e,{Cl:function(){return c},Cy:function(){return s},Dl:function(){return u},nN:function(){return i},pZ:function(){return o},rg:function(){return a},uv:function(){return r},v2:function(){return d}}),function(t){t[t.COLLECT=0]="COLLECT",t[t.CANCEL=1]="CANCEL"}(i||(i={})),function(t){t[t.BLANK=1]="BLANK",t[t.TEMPLATE=2]="TEMPLATE",t[t.COPY=4]="COPY"}(r||(r={})),function(t){t[t.DOC=0]="DOC",t[t.EXCEL=1]="EXCEL",t[t.PPT=2]="PPT",t[t.FORM=3]="FORM"}(o||(o={})),function(t){t[t.NONE=0]="NONE",t[t.HUMTRANS=1]="HUMTRANS"}(a||(a={})),function(t){t[t.NONE=0]="NONE",t[t.DEFAULT=5]="DEFAULT"}(s||(s={})),function(t){t[t.MOBILE=0]="MOBILE",t[t.PC=1]="PC"}(c||(c={})),function(t){t[t.Inactive=1]="Inactive",t[t.NormalVip=2]="NormalVip",t[t.SuperVip=3]="SuperVip"}(u||(u={})),function(t){t[t.Inactive=0]="Inactive",t[t.Active=1]="Active",t[t.CloseAfterActive=2]="CloseAfterActive"}(d||(d={}))},620492:function(t,e,n){n.d(e,{Z:function(){return r}});var i=n(338104),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aggregateVersion=0,e.aggregateIsDeleted=!1,e}return(0,i.__extends)(e,t),e.prototype.version=function(){return this.aggregateVersion},e.prototype.isDeleted=function(){return this.aggregateIsDeleted},e}(n(886531).J)},956356:function(t,e,n){n.d(e,{V:function(){return o}});var i=n(711496),r=n(159729),o=function(){function t(){}return t.prototype.jsonObj2Class=function(e,n){var r=this;e?Object.keys(e).forEach((function(o){var a=o;n||(a=(0,i.rI)(o)),Object.prototype.hasOwnProperty.call(r,a)&&(r[a]instanceof t?r[a].jsonObj2Class(e[o]):r[a]=e[o])})):t.logger.debug("params erroro: jsonObj2Class")},t.prototype.class2JsonObj=function(e){var n=this,r={};return Object.keys(this).forEach((function(o){if("id"!==o){var a=o;e||(a=(0,i.IM)(o)),n[o]instanceof t&&(r[a]=n[o].class2JsonObj(e)),r[a]=n[o]}})),r},t.logger=new r.Yd("DDBase").use("console"),t}()},886531:function(t,e,n){n.d(e,{J:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.id=e,n}return(0,i.__extends)(e,t),e.prototype.initWithJsonObj=function(t){this.jsonObj2Class(t)},e.prototype.jsonObj=function(){return this.class2JsonObj()},e.prototype.getIdentity=function(){return this.id},e.prototype.equals=function(t){return null!==t&&(this===t||this.getIdentity()===t.getIdentity())},e}(n(956356).V)},655659:function(t,e,n){n.d(e,{K:function(){return r}});var i=n(338104),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.__extends)(e,t),e.prototype.jsonObj=function(){return this.class2JsonObj()},e.prototype.equals=function(t){for(var n=0,i=Object.keys(this);n<i.length;n++){var r=i[n];if(this[r]instanceof e){if(!this[r].equals(t[r]))return!1}else if(this[r]!==t[r])return!1}return!0},e.prototype.clone=function(){var t=Reflect.getPrototypeOf(this);return Reflect.construct(t.constructor,[this.jsonObj()])},e}(n(956356).V)},617025:function(t,e,n){n.d(e,{BX:function(){return l},CK:function(){return b},EL:function(){return m},FY:function(){return v},GT:function(){return p},Hh:function(){return y},LD:function(){return I},Vo:function(){return _},aU:function(){return S},bj:function(){return d},rx:function(){return h},sv:function(){return g},w1:function(){return w}});var i=n(338104),r=n(655659),o=n(911862),a=n(159729),s=n(635369),c=n(711496),u=new a.Yd("domain").use("console");function d(){return function(t,e,n){var r=n.value;n.value=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a,c,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,r.apply(this,n)];case 1:return o=i.sent().data,a={data:o,retcode:(0,s.jF)(o),msg:(0,s.HX)(o),cgicode:null!==(d=o.cgicode)&&void 0!==d?d:0},delete o.msg,delete o.message,delete o.retmsg,delete o.retcode,delete o.code,delete o.cgicode,delete o.ret,[2,{resData:a}];case 2:return c=i.sent(),u.error("".concat(t.constructor.name,"|").concat(e,"|").concat(c)),[2,{error:c,resData:{}}];case 3:return[2]}}))}))}}}function _(){return function(t,e,n){var r=n.value;n.value=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return(0,i.__awaiter)(this,void 0,void 0,(function(){var o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,r.apply(this,n)];case 1:return[2,{data:i.sent().data}];case 2:return o=i.sent(),u.error("".concat(t.constructor.name,"|").concat(e,"|").concat(o)),[2,{error:o,data:{}}];case 3:return[2]}}))}))}}}function p(t,e){return function(n,r,o){u.debug("praseHeaderKey2DataHandler|".concat(n.constructor.name,"|").concat(r,"|").concat(t));var a=o.value;o.value=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,a.apply(this,n)];case 1:return r=i.sent(),o=r.data,s=r.headers,o&&s&&s[t]&&(o[e]=s[t]),[2,r]}}))}))}}}function f(t,e){return t.prototype instanceof r.K?Reflect.construct(t,[e]):Reflect.construct(t,["mainEntity"]).initWithJsonObj(e)}function l(t,e){return function(n,r,o){u.debug("fireEvent|".concat(n.constructor.name,"|").concat(r));var a=o.value;o.value=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,a.apply(this,n)];case 1:return(r=i.sent()).resData&&(0,c.zk)(r.resData)&&((o={})[e]=this[e],this[t].fire(o)),[2,r]}}))}))}}}function h(){return function(t,e,n){u.debug("changeSuperVipData|".concat(t.constructor.name,"|").concat(e));var r=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,o,a,s,c;return(0,i.__generator)(this,(function(u){switch(u.label){case 0:return[4,r.apply(this,t)];case 1:return(e=u.sent()).error?[2,e]:((n=null!==(c=null===(s=null===(a=e.resData)||void 0===a?void 0:a.data)||void 0===s?void 0:s.vip_info)&&void 0!==c?c:{}).super_vip=null==n?void 0:n.super,(o=(0,i.__assign)({},e.resData)).data.vip_info=n,[2,{resData:o}])}}))}))}}}function g(t,e){return function(n,o,a){u.debug("parseObjectData|".concat(n.constructor.name,"|").concat(o));var s=a.value;a.value=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return(0,i.__awaiter)(this,void 0,void 0,(function(){var o;return(0,i.__generator)(this,(function(a){switch(a.label){case 0:return[4,s.apply(this,n)];case 1:return(o=a.sent()).error?[2,o]:(this.aggregateVersion=this.aggregateVersion+1,t.prototype instanceof r.K?this[e]=f(t,o.resData.data):this[e].initWithJsonObj(o.resData.data),[2,{resData:(0,i.__assign)((0,i.__assign)({},o.resData),{data:this[e]})}])}}))}))}}}function v(t,e,n){return function(r,o,a){u.debug("parseArrayData|".concat(r.constructor.name,"|").concat(o));var s=a.value;a.value=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a=this;return(0,i.__generator)(this,(function(c){switch(c.label){case 0:return[4,s.apply(this,r)];case 1:return(o=c.sent()).error?[2,o]:(this.aggregateVersion=this.aggregateVersion+1,(o.resData.data[n]||[]).forEach((function(n){a[e].push(f(t,n))})),[2,{resData:(0,i.__assign)((0,i.__assign)({},o.resData),{data:this[e]})}])}}))}))}}}function m(t,e,n,r){return function(o,a,s){u.debug("parseArrayDataInObject|".concat(o.constructor.name,"|").concat(a));var c=s.value;s.value=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return(0,i.__awaiter)(this,void 0,void 0,(function(){var a,s,u,d=this;return(0,i.__generator)(this,(function(_){switch(_.label){case 0:return[4,c.apply(this,o)];case 1:return(a=_.sent()).error?[2,a]:(this.aggregateVersion=this.aggregateVersion+1,null==(s=(null===(u=a.resData.data[n])||void 0===u?void 0:u[r])||[])||s.forEach((function(n){d[e].push(f(t,n))})),[2,{resData:(0,i.__assign)((0,i.__assign)({},a.resData),{data:this[e]})}])}}))}))}}}function y(){return function(t,e,n){u.debug("dataFieldNamingHandler|".concat(t.constructor.name,"|").concat(e));var r=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,r.apply(this,t)];case 1:return e=i.sent(),(null===(n=e.resData)||void 0===n?void 0:n.data)&&(e.resData.data=(0,o.MO)(e.resData.data)),[2,e]}}))}))}}}function w(){return function(t,e,n){u.debug("paramsFieldNamingHandler|".concat(t.constructor.name,"|").concat(e));var r=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t.length?[3,2]:[4,r.apply(this,[])];case 1:case 3:return[2,n.sent()];case 2:return e=[(0,o.P1)(t[0])],[4,r.apply(this,e)]}}))}))}}}function I(){return function(t,e,n){u.debug("parseResBody|".concat(t.constructor.name,"|").concat(e));var r=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,r.apply(this,t)];case 1:return(e=n.sent()).error?[2,e]:[2,{resData:(0,i.__assign)((0,i.__assign)({},e.resData),{data:(0,i.__assign)({},e.resData.data.body)})}]}}))}))}}}function b(t){return function(e,n,r){u.debug("parseResBody|".concat(e.constructor.name,"|").concat(n));var o=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,o.apply(this,e)];case 1:return(n=i.sent()).error||this[t](e),[2,n]}}))}))}}}function S(t){return function(e,n,i){u.debug("parseResBody|".concat(e.constructor.name,"|").concat(n));var r=i.value;return i.value=function(){for(var i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];try{i=r.apply(this,o)}catch(r){u.error("tryCatchHandler caught error from ".concat(e.constructor.name,"|").concat(n,". Error detail: ").concat(r)),i=t}return i||void 0},i}}u.level="OFF"},924251:function(t,e,n){n.d(e,{_:function(){return i}});var i=(0,n(478247).y)("INetworkRequestService")},156869:function(t,e,n){n.d(e,{L:function(){return r}});var i=n(972925),r=function(){this.instance=i.networkRequest}},526978:function(t,e,n){n.d(e,{Ph:function(){return i}});var i=function(t){return function(t){return/^[ABCD][a-zA-Z0-9]+$/.test(t)}(t)||function(t){return/^((w2|w3|e2|e3|s3|p3|c2|c3|m3|f3)_)[-\w]+$/.test(t)}(t)}},711496:function(t,e,n){n.d(e,{B8:function(){return m},CY:function(){return l},DN:function(){return f},IM:function(){return s},KV:function(){return w},Pc:function(){return d},Qj:function(){return y},bk:function(){return h},fQ:function(){return _},kI:function(){return v},pT:function(){return g},rI:function(){return c},s4:function(){return p},zk:function(){return u}});var i=n(754260),r="p_lskey",o="p_skey",a="vfwebqq";function s(t){return 0===t.length?t:(t[0].toLowerCase()+t.substr(1)).replace(/([A-Z])/g,(function(t){return"_".concat(t.toLowerCase())}))}function c(t){for(var e=t.split("_"),n="",i=0;i<e.length;i++){var r=e[i];r.length>0&&(n+=0===i?r:r="".concat(r[0].toUpperCase()).concat(r.substring(1)))}return n}function u(t){return!!t&&0===t.retcode&&0===t.cgicode}function d(t){return t||""}function _(t){return t||0}function p(){return(0,i.ej)(r)}function f(){return(0,i.ej)(o)}function l(){return(0,i.ej)(a)||""}function h(t){var e=new FormData;return Object.keys(t).forEach((function(n){e.append(n,t[n])})),e}function g(t){var e=new FormData;return Object.keys(t).forEach((function(n){void 0!==t[n]&&e.append(n,t[n])})),e}function v(t){var e=new URLSearchParams;return Object.keys(t).forEach((function(n){void 0!==t[n]&&e.append(n,t[n])})),e}function m(t,e){return["0",""].includes(t)?e:"".concat(t,"$").concat(e)}var y=function(){return(0,i.ej)("TOK")};function w(t,e){void 0===e&&(e=void 0);try{return JSON.parse(t)}catch(t){return e}}},276183:function(t,e,n){n.d(e,{e:function(){return i}});var i=(0,n(478247).y)("IDomainUpdater")},472691:function(t,e,n){n.d(e,{d:function(){return u}});var i=n(338104),r=n(908576),o=function(){function t(){}return t.getLevel1MapInfo=function(t,e,n){return{domainId:t.docMetaEntity.padInfo.domainId,padId:t.docMetaEntity.padInfo.padId,type:t.docMetaEntity.padInfo.type,padType:t.docMetaEntity.padInfo.padType,shareLink:t.docMetaEntity.padInfo.shareLink,docStatus:t.docMetaEntity.padInfo.docStatus,globalPadId:t.docMetaEntity.padInfo.globalPadId,lastModifyUser:t.docMetaEntity.padInfo.lastModifyUser,lastModifyTime:t.docMetaEntity.padInfo.lastModifyTime,metaCreateTime:t.docMetaEntity.createInfo.metaCreateTime,creatorId:t.docMetaEntity.createInfo.creatorId,creatorNick:t.docMetaEntity.createInfo.creatorNick,creatorDomain:t.docMetaEntity.createInfo.creatorDomain,isCreator:t.docMetaEntity.createInfo.isCreator,ownerId:t.docMetaEntity.ownerInfo.ownerId,ownerNick:t.docMetaEntity.ownerInfo.ownerNick,ownerAppid:t.docMetaEntity.ownerInfo.ownerAppid,officialAuthInfo:t.docMetaEntity.ownerInfo.officialAuthInfo,padTitle:t.docMetaEntity.titleInfo.title,title:t.docMetaEntity.titleInfo.title,isUserChangeTitle:t.docMetaEntity.titleInfo.isUserChangeTitle,rightFlag:e.authAggregate.authInfoEntity.selfRole,isOwner:e.authAggregate.authInfoEntity.isOwner,tinyid:n.userInfoAggregate.userInfo.tinyid,userName:n.userInfoAggregate.userInfo.nick,userPic:n.userInfoAggregate.userInfo.avatar,userType:n.userInfoAggregate.userInfo.loginType,userId:n.userInfoAggregate.userInfo.uid,uin:n.userInfoAggregate.userInfo.uin}},t.getLevel2PrivilegeMapInfo=function(t){var e=t.authAggregate.authInfoEntity.selfDocPrivilege;return{can_copy:e.canCopy,can_print:e.canPrint,can_history:e.canHistory,can_read:e.canRead,can_edit_title:e.canEditTitle,can_search:e.canSearch,can_add_user:e.canAddUser,can_view_image:e.canViewImage,can_edit:e.canEdit,can_share:e.canShare,can_comment:e.canComment,can_about:e.canAbout,can_spit_slot:e.canSpitSlot,can_watermark:e.canWatermark,can_translate:e.canTranslate,can_link_exp:e.canLinkExp,can_copy_doc:e.canCopyDoc}},t.getLevel2AdvPolicyMapInfo=function(t){var e=t.authAggregate.authInfoEntity.selfDocAdvancedPrivilege;return{reader_can_comment:e.readerCanComment,view_forbid_copy_print:e.viewForbidCopyPrint,writer_can_comment:e.writerCanComment}},t}(),a=function(){function t(){}return t.createClientVarsToDomainProxy=function(e,n,i,r){t.createLevel2PrivilegeProxy(n,r),t.createLevel2AdvPolicyProxy(n,r),t.createLevel1Proxy(e,n,i,r)},t.getProxyHandler=function(t){return{get:function(e,n){return Object.keys(t).includes(n)?t[n]:e[n]},set:function(e,n,i){return Object.keys(t).includes(n)?t[n]=i:e[n]=i,!0}}},t.createLevel1Proxy=function(e,i,r,a){var s=a,c=o.getLevel1MapInfo(e,i,r),u=t.getProxyHandler(c);n.g.clientVars=new Proxy(s,u)},t.createLevel2PrivilegeProxy=function(e,n){var i=n,r=o.getLevel2AdvPolicyMapInfo(e),a=t.getProxyHandler(r);i.privilegeAttribute=new Proxy(n.privilegeAttribute||{},a)},t.createLevel2AdvPolicyProxy=function(e,n){var i=n,r=o.getLevel2AdvPolicyMapInfo(e),a=t.getProxyHandler(r);i.advPolicy=new Proxy(i.advPolicy,a)},t}(),s=n(734460),c=n(960844),u=function(){function t(t,e,n){this.docMetaDomainService=t,this.authDomainService=e,this.userInfoDomainService=n}return t.prototype.updateDomainWithClientVars=function(t,e){void 0===e&&(e=!1),this.docMetaDomainService.updateWithClientVars(t),this.authDomainService.updateWithClientVars(t),this.userInfoDomainService.updateWithClientVars(t),e&&a.createClientVarsToDomainProxy(this.docMetaDomainService,this.authDomainService,this.userInfoDomainService,t)},t.prototype.updateDomainWithRequests=function(t){this.docMetaDomainService.init(t),this.authDomainService.init(t),this.userInfoDomainService.init(t)},t=(0,i.__decorate)([(0,i.__param)(0,s.v),(0,i.__param)(1,r.i),(0,i.__param)(2,c.m),(0,i.__metadata)("design:paramtypes",[Object,Object,Object])],t)}()},35742:function(t,e,n){n.d(e,{U:function(){return i}});var i=(0,n(478247).y)("ICollaborateDomainService")},132292:function(t,e,n){n.d(e,{u:function(){return A}});var i=n(338104),r=n(620492),o=n(617025),a=n(711496);function s(t){return t.includes(".")?t.split(".")[1]:t}function c(t){return!!t&&!!t.startsWith("p.")}var u=n(848330),d="".concat(u.Hf,"/sdc/getusermarkname"),_="".concat(u.Hf,"/api/personalize/anonymous/set"),p="".concat(u.Hf,"/api/personalize/anonymous/vip/get"),f=n(734460),l=n(972925),h=n(794601),g=function(){function t(t){this.docMetaDomain=t}return t.prototype.getUserMarkName=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(s){return n=this.getFormattedUidsString(t),r=(0,i.__assign)((0,i.__assign)({},e),{localPadId:this.docMetaDomain.docMetaEntity.padInfo.padId,domainId:this.docMetaDomain.docMetaEntity.padInfo.domainId,uids:n}),o={xsrf:(0,a.Qj)()},[2,l.networkRequest.post(d,r,{params:o})]}))}))},t.prototype.setPersonalizeAnonymous=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){return n={status:t,file_id:e||this.docMetaDomain.docMetaEntity.padInfo.padId},r={xsrf:(0,a.Qj)()},[2,l.networkRequest.post(_,n,{params:r})]}))}))},t.prototype.getPersonalizeAnonymous=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return e={file_id:t||this.docMetaDomain.docMetaEntity.padInfo.padId},n={xsrf:(0,a.Qj)()},[2,l.networkRequest.post(p,e,{params:n})]}))}))},t.prototype.getFormattedUidsString=function(t){return(0,h.isArray)(t)?"[".concat(t.toString(),"]"):"[".concat(t,"]")},t=(0,i.__decorate)([(0,i.__param)(0,f.v),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),v=n(212906),m=n(655659),y=n(396285),w=function(t){function e(e){var n=t.call(this)||this;return n.userType=1,n.vipInfo=new v.S({}),n.sessionType=0,n.uuid="",n.status="",n.colorId="",n.corpName="",n.userPic="",n.markName="",n.uin="",n.userId="",n.uidSource=y.ACCOUNT_TYPE.UNKNOWN,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(m.K),I=n(960844),b=n(332574),S=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.docMetaDomain=n,r.userInfoDomain=i,r.collaborateList=[],r.currentMemCount=0,r.collabAllInfoList=[],r.throttleInterval=0,r.maxCollabListLengthLimit=999,r.collabRecordList=[],r.collaboratesCacheMap=new Map,r.onCollabAllInfoListUpdatedEmitter=new b.Emitter,r.onUserComeInEmitter=new b.Emitter,r.onUserLeaveEmitter=new b.Emitter,r.onCommercializeMessageEmitter=new b.Emitter,r.needRequestUserIds=new Set,r.onCollabAllInfoListUpdated=r.onCollabAllInfoListUpdatedEmitter.event,r.onUserComeIn=r.onUserComeInEmitter.event,r.onUserLeave=r.onUserLeaveEmitter.event,r.onCommercializeMessage=r.onCommercializeMessageEmitter.event,r.collaborateRepository=new g(n),r}var n;return(0,i.__extends)(e,t),n=e,e.prototype.handleUserComeIn=function(t){var e,n=this;null===(e=t.notices)||void 0===e||e.forEach((function(t){n.appendNoticeTo(t)})),this.currentMemCount=this.collaborateList.length,this.onUserComeInEmitter.fire(t),this.processUserEnter(t)},e.prototype.handleUserLeave=function(t){var e,n=this;null===(e=t.notices)||void 0===e||e.forEach((function(t){n.collaborateList=n.collaborateList.filter((function(e){return e.userId!==t.userId}))})),this.currentMemCount=this.collaborateList.length,this.onUserLeaveEmitter.fire(t),this.processUserLeave(t)},e.prototype.getUserMarkName=function(t){return(0,i.__awaiter)(this,arguments,void 0,(function(t,e,n){var r,o,a,s,u,d,_,p,f;return void 0===e&&(e=!1),(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e?[4,this.collaborateRepository.getUserMarkName(t,n)]:[3,2];case 1:return r=i.sent(),this.setUserMarkItemToCache(r),[2,r];case 2:return o=this.getUserMarkItemFromCache(t),a=o.unCachedUserIds,s=o.cachedResults,0===a.length?[2,{data:{cgicode:0,retcode:0,result:{rsp:s}},status:200,statusText:""}]:c(this.userInfoDomain.userInfoAggregate.userInfo.userId)?[4,this.collaborateRepository.getUserMarkName(a,n)]:[2,{data:{cgicode:0,retcode:0,result:{rsp:[]}},status:200,statusText:""}];case 3:return u=i.sent(),this.setUserMarkItemToCache(u),(null===(f=null===(p=null==u?void 0:u.data)||void 0===p?void 0:p.result)||void 0===f?void 0:f.rsp)&&(d=u.data.result.rsp,_=void 0===d?[]:d,u.data.result.rsp=_.concat(s)),[2,u]}}))}))},e.prototype.setPersonalizeAnonymous=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.collaborateRepository.setPersonalizeAnonymous(t,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.getPersonalizeAnonymous=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.collaborateRepository.getPersonalizeAnonymous(t)];case 1:return[2,e.sent()]}}))}))},e.prototype.handleCommerIcilizeMessage=function(t){this.onCommercializeMessageEmitter.fire(t)},Object.defineProperty(e.prototype,"maxCollabListLimit",{get:function(){return this.maxCollabListLengthLimit?this.maxCollabListLengthLimit:1/0},enumerable:!1,configurable:!0}),e.prototype.appendNoticeTo=function(t){this.collaborateList.find((function(e){return e.userId===t.userId}))||this.collaborateList.push(t)},e.prototype.createCollaborateItemObject=function(t,e){var n;return(0,i.__assign)((0,i.__assign)((0,i.__assign)({},t),t.userId?null:{userId:null!==(n=t.reqUid)&&void 0!==n?n:""}),{userType:e?1:2})},e.prototype.fillVipInfoWithRecordInfo=function(t,e){if(e)return t;var n=this.collabRecordList.find((function(e){return e.userId===t.userId}));return n?(0,i.__assign)((0,i.__assign)({},t),{vipInfo:null==n?void 0:n.vipInfo}):t},e.prototype.checkAdd2CollaborateList=function(t,e){var n=this.createCollaborateItemObject(t,e);n=this.fillVipInfoWithRecordInfo(n,e),!this.collabAllInfoList.find((function(t){return t.userId===n.userId}))&&this.collabAllInfoList.length<this.maxCollabListLimit&&this.collabAllInfoList.push(new w(n))},e.prototype.processUserEnter=function(t){var e=this,n=!1;null==t||t.notices.forEach((function(t){var r=s(t.userId),o={uid:r,userId:r,sessionType:t.sessionType,uuid:t.uuId,vipInfo:(0,a.KV)(t.vipInfo,{})};if(e.collabRecordList.push(o),!c(e.userInfoDomain.userInfoAggregate.userInfo.userId))return e.checkAdd2CollaborateList(o,!0),void(n=!0);if(!e.collabAllInfoList.find((function(t){return t.userId===r}))){if(!c(t.userId))return e.checkAdd2CollaborateList(o,!0),void(n=!0);if(e.collaboratesCacheMap.has(r)){var u=e.collaboratesCacheMap.get(r),d=(0,a.KV)(t.vipInfo,{}),_=(0,i.__assign)((0,i.__assign)({},u),{vipInfo:d});return e.checkAdd2CollaborateList(_,!1),void(n=!0)}e.needRequestUserIds.add(r)}})),n&&this.onCollabAllInfoListUpdatedEmitter.fire({collabAllInfoList:this.collabAllInfoList}),c(this.userInfoDomain.userInfoAggregate.userInfo.userId)&&this.throttleGetUserMarkname()},e.prototype.throttleGetUserMarkname=function(){var t=this;if(!this.throttleTimer){this.innerGetUserMarkName();var e=this.throttleInterval||6e4;this.throttleTimer=setInterval((function(){t.innerGetUserMarkName()}),e)}},e.prototype.processUserLeave=function(t){var e=this;null==t||t.notices.forEach((function(t){var n=s(t.userId);e.popFormCollabRecordList(n),e.collabRecordList.filter((function(t){return t.userId===n})).length>0||(e.collabAllInfoList=e.collabAllInfoList.filter((function(t){return t.userId!==n})),c(t.userId)&&e.needRequestUserIds.delete(n))})),this.onCollabAllInfoListUpdatedEmitter.fire({collabAllInfoList:this.collabAllInfoList})},e.prototype.innerGetUserMarkName=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e,r,o,a=this;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(0===this.needRequestUserIds.size)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),t=Array.from(this.needRequestUserIds).join(","),[4,this.collaborateRepository.getUserMarkName(t)];case 2:if(e=i.sent(),0===(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.retcode)){if(!(r=e.data.result.rsp))return[2];r.forEach((function(t){a.needRequestUserIds.has(t.reqUid)&&(a.needRequestUserIds.delete(t.reqUid),a.checkAdd2CollaborateList(t,!1)),a.collaboratesCacheMap.set(t.reqUid,t)})),this.onCollabAllInfoListUpdatedEmitter.fire({collabAllInfoList:this.collabAllInfoList})}return[3,4];case 3:return i.sent(),n.logger.error("handleUserComeIn request error"),[3,4];case 4:return[2]}}))}))},e.prototype.popFormCollabRecordList=function(t){for(var e=0;e<this.collabRecordList.length;e++)if(this.collabRecordList[e].userId===t)return void this.collabRecordList.splice(e,1)},e.prototype.setUserMarkItemToCache=function(t){var e,n,i,r,o=this;0===(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.retcode)&&(null!==(r=null===(i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.result)||void 0===i?void 0:i.rsp)&&void 0!==r?r:[]).forEach((function(t){(null==t?void 0:t.reqUid)&&o.collaboratesCacheMap.set(t.reqUid,t)}))},e.prototype.getSingleUserMarkItemFromCache=function(t){var e=this.collaboratesCacheMap.get(t);return e?{unCachedUserIds:[],cachedResults:[e]}:{unCachedUserIds:[t],cachedResults:[]}},e.prototype.getUserMarkItemFromCache=function(t){var e=this,n=[],i=[];return((0,h.isArray)(t)?t:[t]).forEach((function(t){var r=e.getSingleUserMarkItemFromCache(t),o=r.cachedResults,a=r.unCachedUserIds;n=n.concat(a),i=i.concat(o)})),{unCachedUserIds:n,cachedResults:i}},(0,i.__decorate)([(0,o.Hh)(),(0,o.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object,Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"getUserMarkName",null),(0,i.__decorate)([(0,o.Hh)(),(0,o.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number,String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"setPersonalizeAnonymous",null),(0,i.__decorate)([(0,o.Hh)(),(0,o.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"getPersonalizeAnonymous",null),e=n=(0,i.__decorate)([(0,i.__param)(1,f.v),(0,i.__param)(2,I.m),(0,i.__metadata)("design:paramtypes",[String,Object,Object])],e)}(r.Z),C=n(963210),E=n(911862),A=function(){function t(t,e){this.docMetaDomainService=t,this.userInfoDomainService=e,this.collaborateAggregate=new S("mainUserInfoAggregate",this.docMetaDomainService,this.userInfoDomainService),(0,E.VT)(this,this.collaborateAggregate,S)}return t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.docMetaDomainService.init(t)];case 1:return e.sent(),[2]}}))}))},(0,i.__decorate)([(0,C.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,i.__decorate)([(0,i.__param)(0,f.v),(0,i.__param)(1,I.m),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}()},55152:function(t,e,n){n.d(e,{$8:function(){return p},Cs:function(){return s},LC:function(){return l},Sc:function(){return o},gH:function(){return r},gN:function(){return h},i4:function(){return u},kC:function(){return a},l8:function(){return _},n0:function(){return g},qe:function(){return c},rH:function(){return f},zC:function(){return d}});var i=n(646066).L.getConfig('npm["@tencent/ark-domain"]'),r=window.location.host,o=(null==i?void 0:i.WECHAT_WEBVIEW_LOGIN)||"https://docs.qq.com/scenario/h5auth.html",a=(null==i?void 0:i.LOGIN_PAGE_URL)||"https://docs.qq.com/login.html",s=(null==i?void 0:i.TOC_HOST)||"docs.qq.com",c=(null==i?void 0:i.TOB_HOST)||"doc.weixin.qq.com",u=(null==i?void 0:i.DOCS_WW_LOGIN)||"https://docs.qq.com/scenario/ww-login.html",d=(null==i?void 0:i.OPEN_WEIXIN_AUTHORIZE)||"https://open.weixin.qq.com/connect/oauth2/authorize",_=(null==i?void 0:i.TOB_TARGET_ORIGIN)||"https://doc.weixin.qq.com",p=(null==i?void 0:i.TOB_IFRAME_URL_ACCOUNT_LIST)||"https://doc.weixin.qq.com/tim/docs/components/IfameManageAccountListToC.html",f=(null==i?void 0:i.TOB_IFRAME_URL_SET_COOKIE)||"https://doc.weixin.qq.com/scenario/iframe-to-b-set-cookie.html",l=(null==i?void 0:i.TOC_TARGET_ORIGIN)||"https://docs.qq.com",h=(null==i?void 0:i.TOC_IFRAME_URL_ACCOUNT_LIST)||"https://docs.qq.com/components/feature/IframeToManageAccountList.html",g=(null==i?void 0:i.TOC_IFRAME_URL_SET_COOKIE)||"https://docs.qq.com/scenario/iframe-to-c-set-cookie.html"},882918:function(t,e,n){n.d(e,{G:function(){return i}});var i=(0,n(478247).y)("IFileDomainService")},593722:function(t,e,n){n.d(e,{v:function(){return y}});var i=n(338104),r=n(617025),o=n(156869),a=n(924251),s=n(711496),c=n(848330),u="".concat(c.HL,"doc_collect"),d="".concat(c.HL,"doc_getcollect"),_="".concat(c.HL,"createdoc_new"),p="".concat(c.HL,"doc_recover"),f="".concat(c.HL,"doc_humtrans"),l="".concat(c.jo,"can/move"),h=n(754260),g=n(407777),v=function(){function t(t){this.networkRequestService=t}return t.prototype.collect=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,h.w$)(h.$W.xsrf)})),[2,this.networkRequestService.instance.post(u,e)]}))}))},t.prototype.getDocCollect=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){return e=(0,i.__assign)((0,i.__assign)({},t),{xsrf:"".concat((0,h.w$)(h.$W.xsrf))}),n=(0,g.At)(d,e),[2,this.networkRequestService.instance.get(n)]}))}))},t.prototype.createDoc=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,h.w$)(h.$W.xsrf)})),[2,this.networkRequestService.instance.post(_,e)]}))}))},t.prototype.recover=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,h.w$)(h.$W.xsrf)})),[2,this.networkRequestService.instance.post(p,e)]}))}))},t.prototype.docHumtrans=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,h.w$)(h.$W.xsrf)})),[2,this.networkRequestService.instance.post(f,e)]}))}))},t.prototype.canMove=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(r){return e=(0,i.__assign)((0,i.__assign)({},t),{xsrf:"".concat((0,h.w$)(h.$W.xsrf))}),n=(0,g.At)(l,e),[2,this.networkRequestService.instance.get(n)]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,a._),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),m=n(963210),y=function(){function t(){this.fileRepository=new v(new o.L)}return t.prototype.init=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2]}))}))},t.prototype.collect=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.fileRepository.collect(t)]}))}))},t.prototype.getDocCollect=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.fileRepository.getDocCollect(t)]}))}))},t.prototype.createDoc=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.fileRepository.createDoc(t)]}))}))},t.prototype.recover=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.fileRepository.recover(t)]}))}))},t.prototype.docHumtrans=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.fileRepository.docHumtrans(t)]}))}))},t.prototype.canMove=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.fileRepository.canMove(t)]}))}))},(0,i.__decorate)([(0,m.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"collect",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getDocCollect",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"createDoc",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"recover",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"docHumtrans",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"canMove",null),t}()},266173:function(t,e,n){n.d(e,{r:function(){return i}});var i=(0,n(478247).y)("IFolderDomainService")},779722:function(t,e,n){n.d(e,{i:function(){return h}});var i=n(338104),r=n(617025),o=n(156869),a=n(924251),s=n(711496),c=n(848330),u="".concat(c.HL,"folder_list"),d="".concat(c.HL,"folder_new"),_="".concat(c.HL,"doc_addmy"),p=n(754260),f=function(){function t(t){this.networkRequestService=t}return t.prototype.folderList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,p.w$)(p.$W.xsrf)})),[2,this.networkRequestService.instance.post(u,e)]}))}))},t.prototype.newFolder=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,p.w$)(p.$W.xsrf)})),[2,this.networkRequestService.instance.post(d,e)]}))}))},t.prototype.addToMyFolder=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,p.w$)(p.$W.xsrf)})),[2,this.networkRequestService.instance.post(_,e)]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,a._),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),l=n(963210),h=function(){function t(){this.folderRepository=new f(new o.L)}return t.prototype.init=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2]}))}))},t.prototype.folderList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.folderRepository.folderList(t)]}))}))},t.prototype.newFolder=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.folderRepository.newFolder(t)]}))}))},t.prototype.addToMyFolder=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.folderRepository.addToMyFolder(t)]}))}))},(0,i.__decorate)([(0,l.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"folderList",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"newFolder",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"addToMyFolder",null),t}()},2080:function(t,e,n){n.d(e,{y:function(){return i}});var i=(0,n(478247).y)("ITemplateDomainService")},908958:function(t,e,n){n.d(e,{Y:function(){return h}});var i=n(338104),r=n(617025),o=n(156869),a=n(924251),s=n(711496),c=n(754260),u=n(848330),d="".concat(u.Hf,"/cgi-bin/template/mytemplate_add"),_="".concat(u.Hf,"/cgi-bin/template/template_detail"),p="".concat(u.Hf,"/ep/api/settipflag"),f=function(){function t(t){this.networkRequestService=t}return t.prototype.addToMyTemplate=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{xsrf:(0,c.w$)(c.$W.xsrf)})),[2,this.networkRequestService.instance.post(d,e)]}))}))},t.prototype.templateDetail=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)((0,i.__assign)((0,i.__assign)({},t),{template_type:3,xsrf:(0,c.w$)(c.$W.xsrf)})),[2,this.networkRequestService.instance.post(_,e)]}))}))},t.prototype.setTipFlag=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,s.bk)({globalPadId:t,type:37,flag:1,xsrf:(0,c.w$)(c.$W.xsrf)}),[2,this.networkRequestService.instance.post(p,e)]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,a._),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),l=n(963210),h=function(){function t(){this.templateRepository=new f(new o.L)}return t.prototype.init=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2]}))}))},t.prototype.addToMyTemplate=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.templateRepository.addToMyTemplate(t)]}))}))},t.prototype.templateDetail=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.templateRepository.templateDetail(t)]}))}))},t.prototype.setTipFlag=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.templateRepository.setTipFlag(t)]}))}))},(0,i.__decorate)([(0,l.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"addToMyTemplate",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,r.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"templateDetail",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"setTipFlag",null),t}()},799246:function(t,e,n){n.d(e,{Z:function(){return L}});var i=n(338104),r=n(635369),o=n(212906),a=n(886531),s=n(617025),c=n(711496),u=n(972925),d=n(754260),_=n(407777),p=n(888003),f=n.n(p),l=n(848330),h="".concat(l.Hf,"/cgi-bin/online_docs/doc_changetitle"),g="".concat(l.Hf,"/cgi-bin/online_docs/doc_collect"),v="".concat(l.Hf,"/cgi-bin/online_docs/doc_getcollect"),m="".concat(l.Hf,"/cgi-bin/online_docs/doc_info"),y="".concat(l.Hf,"/dop-api/drive/data/get"),w="".concat(l.Hf,"/cgi/gateway/preload"),I=function(){function t(){}return t.prototype.updateTitle=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return o={pad_id:r,domain_id:n,xsrf:"".concat((0,d.w$)(d.$W.xsrf)),version:2,auto_change:e?1:0,title:encodeURIComponent(t)},a=(0,_.At)(h,o),[4,u.networkRequest.post(a)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchCollectedState=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={domain_id:t,pad_id:e,xsrf:"".concat((0,d.w$)(d.$W.xsrf)),t:(new Date).getTime()},r=(0,_.At)(v,n),[4,u.networkRequest.get(r)];case 1:return[2,i.sent()]}}))}))},t.prototype.changeCollectedState=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=(0,c.bk)({domain_id:t,pad_id:e,is_cancel:n?0:1,xsrf:"".concat((0,d.w$)(d.$W.xsrf))}),o={contentType:"application/x-www-form-urlencoded"},[4,u.networkRequest.post(g,r,o)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchDocInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={domainId:t,localPadId:e,xsrf:"".concat((0,d.w$)(d.$W.xsrf))},r=(0,_.At)(m,n),[4,u.networkRequest.get(r)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchDocMetaInfoData=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e={id:t,xsrf:"".concat((0,d.w$)(d.$W.xsrf))},n=(0,_.At)(y,e),[4,u.networkRequest.get(n)];case 1:return[2,i.sent()]}}))}))},t.prototype.fetchFileInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={xsrf:(0,d.w$)(d.$W.xsrf)},r=f().stringify(n),o={file_id:t,add_recent:e},[4,u.networkRequest.post("".concat("/v2/drive/fileInfo","?").concat(r),o)];case 1:return[2,i.sent()]}}))}))},t.prototype.updateOfficialAuthInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={id:t,type:e,command:1,xsrf:"".concat((0,d.w$)(d.$W.xsrf))},r=(0,_.At)(w,n),[4,u.networkRequest.get(r)];case 1:return[2,i.sent()]}}))}))},t.prototype.getOwnerVipInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={file_id:t,get_all:e},[4,u.networkRequest.post("/api/personalize/owner/viplevel",n)];case 1:return[2,i.sent()]}}))}))},(0,i.__decorate)([(0,s.Vo)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,Boolean]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"getOwnerVipInfo",null),t}(),b=n(552671),S=n(74364),C=n(143461),E=n(332574),A=n(91504),R=n(225225),M=n(528009),O=12e3,D=12e3,k=function(t){function e(e){var n=t.call(this,e)||this;return n.createInfo=new A.f({}),n.padInfo=new S.m({}),n.ownerInfo=new b.$({}),n.userAuthInfo=new M.I({}),n.titleInfo=new C.f({}),n.hostFileInfo=null,n.onTitleDidChangeEmitter=new E.Emitter,n.onhandleNoticeDeletedEmitter=new E.Emitter,n.onDocStatusChangedEmitter=new E.Emitter,n.onOfficialAuthInfoChangeEmitter=new E.Emitter,n.docMetaRepository=new I,n.onTitleDidChange=n.onTitleDidChangeEmitter.event,n.onhandleNoticeDeleted=n.onhandleNoticeDeletedEmitter.event,n.onDocStatusChanged=n.onDocStatusChangedEmitter.event,n.onOfficialAuthInfoChange=n.onOfficialAuthInfoChangeEmitter.event,n}return(0,i.__extends)(e,t),e.prototype.updateTitle=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.docMetaRepository.updateTitle(t,e,null===(r=this.padInfo)||void 0===r?void 0:r.domainId,null===(o=this.padInfo)||void 0===o?void 0:o.padId)];case 1:return n=i.sent(),parseInt(n.data.retcode,10)!==O&&parseInt(n.data.cgicode,10)!==D&&this.titleInfo&&(this.titleInfo.title=t,this.onTitleDidChangeEmitter.fire({newTitle:t})),[2,n]}}))}))},e.prototype.handleNoticeDeleted=function(){this.padInfo.docStatus=R.d.docStatusDelete,this.onhandleNoticeDeletedEmitter.fire(void 0)},e.prototype.handleNoticeTitleChanged=function(t){this.titleInfo.title=t,this.onTitleDidChangeEmitter.fire({newTitle:t})},e.prototype.updateOfficialAuthInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.docMetaRepository.updateOfficialAuthInfo(t,null===(r=this.padInfo)||void 0===r?void 0:r.padType)];case 1:return e=i.sent(),n=e.data.data.clientVars.docInfo.ownerInfo.officialAuthInfo,this.ownerInfo.officialAuthInfo=n,this.onOfficialAuthInfoChangeEmitter.fire({officialAuthInfo:n}),[2,e]}}))}))},e.prototype.changeDocStatus=function(t){this.padInfo.docStatus=t,t===R.d.docStatusDelete&&this.onhandleNoticeDeletedEmitter.fire(void 0),this.onDocStatusChangedEmitter.fire(void 0)},e.prototype.fetchCollectedState=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.docMetaRepository.fetchCollectedState(null===(t=this.padInfo)||void 0===t?void 0:t.domainId,null===(e=this.padInfo)||void 0===e?void 0:e.padId)];case 1:return[2,n.sent()]}}))}))},e.prototype.changeCollectedState=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.docMetaRepository.changeCollectedState(null===(e=this.padInfo)||void 0===e?void 0:e.domainId,null===(n=this.padInfo)||void 0===n?void 0:n.padId,t)];case 1:return[2,i.sent()]}}))}))},e.prototype.fetchDocMetaInfoData=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.docMetaRepository.fetchDocMetaInfoData(t)];case 1:return[2,e.sent()]}}))}))},e.prototype.fetchFileInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.docMetaRepository.fetchFileInfo(t,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.getOwnerVipInfo=function(t){return(0,i.__awaiter)(this,arguments,void 0,(function(t,e){var n,a,s,u,d,_;return void 0===e&&(e=!1),(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.docMetaRepository.getOwnerVipInfo(t,e)];case 1:return n=i.sent(),(a=(0,r.fq)(n,!0)).resData&&(s=a.resData.data.result||{},u=s.vipLevel,d=s.vipInfo,_=(0,c.KV)(d,{}),this.ownerInfo.vipLevel=u,this.ownerInfo.vipInfo=new o.S(_)),[2,a]}}))}))},(0,i.__decorate)([(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,Boolean]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"updateTitle",null),(0,i.__decorate)([(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"updateOfficialAuthInfo",null),(0,i.__decorate)([(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"fetchCollectedState",null),(0,i.__decorate)([(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Boolean]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"changeCollectedState",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"fetchDocMetaInfoData",null),(0,i.__decorate)([(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,Boolean]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"fetchFileInfo",null),e}(a.J),L=k},734460:function(t,e,n){n.d(e,{v:function(){return i}});var i=(0,n(478247).y)("IDocMetaDomainService")},995193:function(t,e,n){n.d(e,{L:function(){return h}});var i=n(338104),r=n(617025),o=n(526978),a=n(799246),s=n(91504),c=n(644915),u=n(552671),d=n(74364),_=n(539247),p=n(143461),f=n(528009),l=n(963210),h=function(){function t(){this.isInitedByBasicClientVars=!1,this.docMetaEntity=new a.Z("MainDocMetaEntity"),(null===window||void 0===window?void 0:window.basicClientVars)&&this.initWithBasicClientVars(window.basicClientVars)}return t.prototype.updateWithClientVars=function(t){this.isInitedByBasicClientVars||(this.docMetaEntity.createInfo=new s.f((0,i.__assign)((0,i.__assign)({},t),{createTime:t.metaCreateTime})),this.docMetaEntity.ownerInfo=new u.$(t),this.docMetaEntity.padInfo=new d.m(t),this.docMetaEntity.titleInfo=new p.f(t),this.docMetaEntity.userAuthInfo=new f.I(t))},t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,a,u,_,l,h,g,v,m,y,w,I,b,S,C,E;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.docId,n=t.addRecent,(0,o.Ph)(e)?[4,this.docMetaEntity.fetchFileInfo(e,n)]:[2];case 1:return r=i.sent(),a=null!==(E=null===(C=null===(S=r.resData)||void 0===S?void 0:S.data)||void 0===C?void 0:C.result)&&void 0!==E?E:{},u=a.docInfo,_=a.fileMeta,l=a.hostFileInfo,h=a.privilege,this.docMetaEntity.createInfo=new s.f({isCreator:null==u?void 0:u.isCreator,creatorDomain:null==u?void 0:u.domainId,creatorId:null==_?void 0:_.creator,creatorCorpId:"",creatorCorpName:""}),this.docMetaEntity.padInfo=new d.m({domainId:null==u?void 0:u.domainId,padId:null==_?void 0:_.fileId,padType:null==u?void 0:u.padType,relative:[],docStatus:null==u?void 0:u.docStatus}),this.docMetaEntity.titleInfo=new p.f({title:null==_?void 0:_.name,isUserChangeTitle:null==_?void 0:_.userChangeFilename}),this.docMetaEntity.userAuthInfo=new f.I({isCreator:null==u?void 0:u.isCreator,isOwner:null==u?void 0:u.isOwner,isAdmin:null==h?void 0:h.attribute.isAdmin}),v=(g=null!=l?l:{}).ext,m=void 0===v?"":v,y=g.fileId,w=void 0===y?"":y,I=g.mimeType,b=void 0===I?"":I,this.docMetaEntity.hostFileInfo=new c.r({fileMeta:{ext:m,fileId:w},mimeType:b}),[2]}}))}))},t.prototype.initWithBasicClientVars=function(t){this.updateCreateInfoByBasicClientVars(t),this.updateOwnerAndAuthInfoByBasicClientVars(t),this.updatePadInfoByBasicClientVars(t),this.updateTitleInfoByBasicClientVars(t),this.updateCollaborationInfoByBasicClientVars(t),this.updatePersonalizeInfoByBasicClientVars(t),this.updateHostFileInfoByBasicClientVars(t),this.isInitedByBasicClientVars=!0},t.prototype.updatePersonalizeInfoByBasicClientVars=function(t){var e;this.docMetaEntity.personalizeInfo=new _._(null===(e=t.docInfo)||void 0===e?void 0:e.personalizeInfo)},t.prototype.updateCollaborationInfoByBasicClientVars=function(t){var e;this.docMetaEntity.collaborationFlag=null===(e=t.docInfo)||void 0===e?void 0:e.collaborationFlag},t.prototype.updateCreateInfoByBasicClientVars=function(t){var e,n,i,r,o,a,c,u,d,_,p,f,l;this.docMetaEntity.createInfo=new s.f({isCreator:null===(e=t.docInfo)||void 0===e?void 0:e.isCreator,creatorDomain:null===(i=null===(n=t.docInfo)||void 0===n?void 0:n.padInfo)||void 0===i?void 0:i.domainId,creatorNick:null===(o=null===(r=t.docInfo)||void 0===r?void 0:r.createInfo)||void 0===o?void 0:o.creatorNick,createTime:null===(c=null===(a=t.docInfo)||void 0===a?void 0:a.createInfo)||void 0===c?void 0:c.createTime,creatorId:null===(d=null===(u=t.docInfo)||void 0===u?void 0:u.createInfo)||void 0===d?void 0:d.creatorId,creatorCorpId:null===(p=null===(_=t.docInfo)||void 0===_?void 0:_.createInfo)||void 0===p?void 0:p.creatorCorpId,creatorCorpName:null===(l=null===(f=t.docInfo)||void 0===f?void 0:f.createInfo)||void 0===l?void 0:l.creatorCorpName})},t.prototype.updateOwnerAndAuthInfoByBasicClientVars=function(t){var e,n,i,r,o;this.docMetaEntity.ownerInfo=new u.$(null===(e=t.docInfo)||void 0===e?void 0:e.ownerInfo),this.docMetaEntity.userAuthInfo=new f.I({isCreator:null===(n=t.docInfo)||void 0===n?void 0:n.isCreator,isOwner:null===(i=t.docInfo)||void 0===i?void 0:i.isOwner,isAdmin:null===(r=t.docInfo)||void 0===r?void 0:r.isAdmin,isViewer:1===(null===(o=t.authInfo)||void 0===o?void 0:o.privilegeFlag)})},t.prototype.updatePadInfoByBasicClientVars=function(t){var e,n,i,r,o,a,s,c,u,_,p,f;this.docMetaEntity.padInfo=new d.m({domainId:null===(n=null===(e=t.docInfo)||void 0===e?void 0:e.padInfo)||void 0===n?void 0:n.domainId,padId:null===(r=null===(i=t.docInfo)||void 0===i?void 0:i.padInfo)||void 0===r?void 0:r.padId,padType:null===(a=null===(o=t.docInfo)||void 0===o?void 0:o.padInfo)||void 0===a?void 0:a.padType,relative:null===(c=null===(s=t.docInfo)||void 0===s?void 0:s.padInfo)||void 0===c?void 0:c.relative,docStatus:null===(u=t.docInfo)||void 0===u?void 0:u.docStatus,shareLink:null===(_=t.docInfo)||void 0===_?void 0:_.shareLink,lastModifyTime:null===(p=t.docInfo)||void 0===p?void 0:p.lastModifyTime,lastModifyUser:null===(f=t.docInfo)||void 0===f?void 0:f.lastModifyUser})},t.prototype.updateTitleInfoByBasicClientVars=function(t){var e,n,i;this.docMetaEntity.titleInfo=new p.f({title:null===(n=null===(e=t.docInfo)||void 0===e?void 0:e.padInfo)||void 0===n?void 0:n.padTitle,isUserChangeTitle:null===(i=t.docInfo)||void 0===i?void 0:i.isUserChangeTitle})},t.prototype.updateHostFileInfoByBasicClientVars=function(t){var e,n;(null===(e=null==t?void 0:t.docInfo)||void 0===e?void 0:e.hostFileInfo)&&(this.docMetaEntity.hostFileInfo=new c.r(null===(n=null==t?void 0:t.docInfo)||void 0===n?void 0:n.hostFileInfo))},(0,i.__decorate)([(0,l.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,r.aU)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],t.prototype,"initWithBasicClientVars",null),t}()},519228:function(t,e,n){n.d(e,{I:function(){return g}});var i=n(338104),r=n(617025),o=n(526978),a=n(799246),s=n(91504),c=n(644915),u=n(552671),d=n(74364),_=n(539247),p=n(143461),f=n(528009),l=n(972925),h=n(963210),g=function(){function t(){this.isInitedByBasicClientVars=!1,this.docMetaEntity=new a.Z("MainDocMetaEntity"),(null===window||void 0===window?void 0:window.basicClientVars)&&this.initWithBasicClientVars(window.basicClientVars)}return t.prototype.updateWithClientVars=function(t){this.isInitedByBasicClientVars||(this.docMetaEntity.createInfo=new s.f((0,i.__assign)((0,i.__assign)({},t),{createTime:t.metaCreateTime})),this.docMetaEntity.ownerInfo=new u.$(t),this.docMetaEntity.padInfo=new d.m(t),this.docMetaEntity.titleInfo=new p.f(t),this.docMetaEntity.userAuthInfo=new f.I(t))},t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=t.docId,!(0,o.Ph)(e)||this.isInitedByBasicClientVars?[2]:[2,this.updateWithPreload(e)]}))}))},t.prototype.updateWithPreload=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o,a,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,l.networkRequest.get("/cgi/gateway/preload?command=1&id=".concat(t))];case 1:if(e=i.sent(),!(null===(o=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.data)||void 0===o?void 0:o.clientVars)||"object"!=typeof(null===(s=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.data)||void 0===s?void 0:s.clientVars))throw console.error(e),new Error("get /cgi/gateway/preload failed");return this.initWithBasicClientVars(e.data.data.clientVars),[3,3];case 2:return n=i.sent(),console.error("updateWithPreload failed",n),[3,3];case 3:return[2]}}))}))},t.prototype.initWithBasicClientVars=function(t){this.updateCreateInfoByBasicClientVars(t),this.updateOwnerAndAuthInfoByBasicClientVars(t),this.updatePadInfoByBasicClientVars(t),this.updateTitleInfoByBasicClientVars(t),this.updateCollaborationInfoByBasicClientVars(t),this.updatePersonalizeInfoByBasicClientVars(t),this.updateHostFileInfoByBasicClientVars(t),this.isInitedByBasicClientVars=!0},t.prototype.updatePersonalizeInfoByBasicClientVars=function(t){var e;this.docMetaEntity.personalizeInfo=new _._(null===(e=t.docInfo)||void 0===e?void 0:e.personalizeInfo)},t.prototype.updateCollaborationInfoByBasicClientVars=function(t){var e;this.docMetaEntity.collaborationFlag=null===(e=t.docInfo)||void 0===e?void 0:e.collaborationFlag},t.prototype.updateCreateInfoByBasicClientVars=function(t){var e,n,i,r,o,a,c,u,d,_,p,f,l;this.docMetaEntity.createInfo=new s.f({isCreator:null===(e=t.docInfo)||void 0===e?void 0:e.isCreator,creatorDomain:null===(i=null===(n=t.docInfo)||void 0===n?void 0:n.padInfo)||void 0===i?void 0:i.domainId,creatorNick:null===(o=null===(r=t.docInfo)||void 0===r?void 0:r.createInfo)||void 0===o?void 0:o.creatorNick,createTime:null===(c=null===(a=t.docInfo)||void 0===a?void 0:a.createInfo)||void 0===c?void 0:c.createTime,creatorId:null===(d=null===(u=t.docInfo)||void 0===u?void 0:u.createInfo)||void 0===d?void 0:d.creatorId,creatorCorpId:null===(p=null===(_=t.docInfo)||void 0===_?void 0:_.createInfo)||void 0===p?void 0:p.creatorCorpId,creatorCorpName:null===(l=null===(f=t.docInfo)||void 0===f?void 0:f.createInfo)||void 0===l?void 0:l.creatorCorpName})},t.prototype.updateOwnerAndAuthInfoByBasicClientVars=function(t){var e,n,i,r,o;this.docMetaEntity.ownerInfo=new u.$(null===(e=t.docInfo)||void 0===e?void 0:e.ownerInfo),this.docMetaEntity.userAuthInfo=new f.I({isCreator:null===(n=t.docInfo)||void 0===n?void 0:n.isCreator,isOwner:null===(i=t.docInfo)||void 0===i?void 0:i.isOwner,isAdmin:null===(r=t.docInfo)||void 0===r?void 0:r.isAdmin,isViewer:1===(null===(o=t.authInfo)||void 0===o?void 0:o.privilegeFlag)})},t.prototype.updatePadInfoByBasicClientVars=function(t){var e,n,i,r,o,a,s,c,u,_,p,f;this.docMetaEntity.padInfo=new d.m({domainId:null===(n=null===(e=t.docInfo)||void 0===e?void 0:e.padInfo)||void 0===n?void 0:n.domainId,padId:null===(r=null===(i=t.docInfo)||void 0===i?void 0:i.padInfo)||void 0===r?void 0:r.padId,padType:null===(a=null===(o=t.docInfo)||void 0===o?void 0:o.padInfo)||void 0===a?void 0:a.padType,relative:null===(c=null===(s=t.docInfo)||void 0===s?void 0:s.padInfo)||void 0===c?void 0:c.relative,docStatus:null===(u=t.docInfo)||void 0===u?void 0:u.docStatus,shareLink:null===(_=t.docInfo)||void 0===_?void 0:_.shareLink,lastModifyTime:null===(p=t.docInfo)||void 0===p?void 0:p.lastModifyTime,lastModifyUser:null===(f=t.docInfo)||void 0===f?void 0:f.lastModifyUser})},t.prototype.updateTitleInfoByBasicClientVars=function(t){var e,n,i;this.docMetaEntity.titleInfo=new p.f({title:null===(n=null===(e=t.docInfo)||void 0===e?void 0:e.padInfo)||void 0===n?void 0:n.padTitle,isUserChangeTitle:null===(i=t.docInfo)||void 0===i?void 0:i.isUserChangeTitle})},t.prototype.updateHostFileInfoByBasicClientVars=function(t){var e,n;(null===(e=null==t?void 0:t.docInfo)||void 0===e?void 0:e.hostFileInfo)&&(this.docMetaEntity.hostFileInfo=new c.r(null===(n=null==t?void 0:t.docInfo)||void 0===n?void 0:n.hostFileInfo))},(0,i.__decorate)([(0,h.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,r.aU)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],t.prototype,"initWithBasicClientVars",null),t}()},91504:function(t,e,n){n.d(e,{f:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.creatorId="",n.createTime=0,n.creatorNick="",n.creatorDomain="",n.isCreator=!1,n.creatorCorpId="",n.creatorCorpName="",n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K)},644915:function(t,e,n){n.d(e,{r:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.mimeType="",n.fileMeta={ext:"",fileId:""},n.mimeType=e.mimeType,n.fileMeta=e.fileMeta,n}return(0,i.__extends)(e,t),e}(n(655659).K)},552671:function(t,e,n){n.d(e,{$:function(){return o}});var i=n(338104),r=n(212906),o=function(t){function e(e){var n=t.call(this)||this;return n.ownerId="",n.ownerAppid="",n.ownerNick="",n.ownerAvatar="",n.officialAuthInfo={avatar:"",credential:"",introduction:"",nick:"",principal:""},n.vipLevel=1,n.vipInfo=new r.S({}),n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K)},225225:function(t,e,n){var i;n.d(e,{d:function(){return i}}),function(t){t[t.docStatusNormal=0]="docStatusNormal",t[t.docStatusDelete=1]="docStatusDelete",t[t.docStatusTrash=2]="docStatusTrash",t[t.docStatusHidden=3]="docStatusHidden",t[t.docStatusTrans=4]="docStatusTrans",t[t.docStatusImport=5]="docStatusImport",t[t.docStatusChecking=6]="docStatusChecking",t[t.docStatusForbidden=7]="docStatusForbidden",t[t.docStatusImportFailed=8]="docStatusImportFailed",t[t.docStatusCopy=9]="docStatusCopy",t[t.docStatusCopyFailed=10]="docStatusCopyFailed",t[t.docStatusPrepare=11]="docStatusPrepare",t[t.docStatusHiddenUntilModify=12]="docStatusHiddenUntilModify",t[t.docStatusFileUploading=13]="docStatusFileUploading"}(i||(i={}))},74364:function(t,e,n){n.d(e,{m:function(){return a}});var i=n(338104),r=n(655659),o=n(711496),a=function(t){function e(e){var n=t.call(this)||this;return n.docStatus=0,n.domainId="",n.padId="",n.padType="",n.type=0,n.shareLink="",n.lastModifyTime=0,n.lastModifyUser="",n.relative=[],n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),Object.defineProperty(e.prototype,"globalPadId",{get:function(){return(0,o.B8)(this.domainId,this.padId)},enumerable:!1,configurable:!0}),e}(r.K)},539247:function(t,e,n){n.d(e,{_:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.background={},n.mode=0,n.titleColor={},n.isExpire=!1,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K)},143461:function(t,e,n){n.d(e,{f:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.title="",n.isUserChangeTitle=!1,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K)},528009:function(t,e,n){n.d(e,{I:function(){return r}});var i=n(338104),r=function(t){function e(e){var n=t.call(this)||this;return n.isCreator=!1,n.isAdmin=!1,n.isOwner=!1,n.isViewer=!1,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K)},899856:function(t,e,n){var i;n.d(e,{B:function(){return i}}),function(t){t.DOC="drive-doc",t.SHEET="drive-sheet",t.TEXT="drive-text",t.SLIDE="drive-slide",t.PDF="drive-pdf",t.UNKNOWN="drive-unknown"}(i||(i={}))},798477:function(t,e,n){n.d(e,{h:function(){return b}});var i,r=n(338104),o=n(617025),a=n(526978),s=n(734460),c=n(963210),u=function(){function t(t){this.fileDescRepo=t}return t.prototype.init=function(t){Object.assign(this,t)},t.prototype.fetchFileDesc=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.fileDescRepo.fetchFileDesc(t)]}))}))},t.prototype.getFormattedFileSize=function(){var t=this.accurateSize;if(0===Number(t))return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return"".concat(parseFloat((t/Math.pow(1024,e)).toPrecision(3))," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e])},t}(),d=n(899856),_=((i={})[d.B.DOC]=/doc|dot|wps|wpt|docx|dotx|docm|dotm/,i[d.B.SHEET]=/xls|xlt|xlsx|xltx|csv|xlsb|xlsm|xltm|et|ett|ets/,i[d.B.TEXT]=/lrc|c|cpp|h|asm|s|java|asp|bat|bas|prg|cmd|rtf|txt|log|xml|htm|html/,i[d.B.SLIDE]=/pptx|ppt|pot|potx|pps|ppsx|dps|dpt|pptm|potm|ppsm/,i),p=/(doc|docx|xls|xlsx|txt|csv|ppt|pptx)$/i,f=function(){function t(t){this.fileMetaRepo=t}return t.prototype.init=function(t){Object.assign(this,t)},t.prototype.initWithFileInfoRsp=function(t){var e=t.mimeType,n=t.fileMeta;Object.assign(this,(0,r.__assign)((0,r.__assign)({},n),{mimeType:e,icon:n.iconUrl}))},t.prototype.fetchPreviewInfo=function(){return(0,r.__awaiter)(this,arguments,void 0,(function(t){return void 0===t&&(t={}),(0,r.__generator)(this,(function(e){return[2,this.fileMetaRepo.fetchPreviewInfo({fileId:this.fileId,addBrowseRecord:(null==t?void 0:t.addBrowseRecord)||!1,previewAttribute:(0,r.__assign)({srcType:this.ext},t.previewAttribute)})]}))}))},t.prototype.fetchPreviewQuery=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.fileMetaRepo.fetchPreviewQuery({fileId:this.fileId,shouldRetry:t})]}))}))},t.prototype.fetchDownloadInfo=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.fileMetaRepo.fetchDownloadInfo(t)]}))}))},t.prototype.fetchCopyInfo=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,this.fileMetaRepo.fetchCopyInfo(t)]}))}))},t.prototype.getDrivePadType=function(){for(var t=this.cosInfo,e=0,n=Object.keys(_);e<n.length;e++){var i=n[e],r=_[i];if((null==t?void 0:t.driveExt)&&r.test(t.driveExt))return i}return d.B.DOC},t.prototype.canBeConvertedToOnlineDocs=function(){var t=this.ext;return p.test(t)},t.prototype.getFormattedFileSize=function(){var t=this.size;if(0===Number(t))return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return"".concat(parseFloat((t/Math.pow(1024,e)).toPrecision(3))," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e])},t}(),l=n(711496),h=n(972925),g=n(888003),v=n.n(g),m=function(){function t(){}return t.prototype.fetchFileDesc=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return e={xsrf:(0,l.Qj)()},n=v().stringify(e),[4,h.networkRequest.post("".concat("/v2/drive/file/desc","?").concat(n),{file_id:t})];case 1:return[2,i.sent()]}}))}))},(0,r.__decorate)([(0,o.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[String]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"fetchFileDesc",null),t}(),y=n(754260),w=function(){function t(){}return t.prototype.fetchPreviewInfo=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,i,o,a,s,c,u,d,_,p,f,l,g;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=t.fileId,n=t.addBrowseRecord,i=void 0===n||n,o=t.previewAttribute,a=o.srcType,s=o.dstType,c=o.page,u=o.sheet,d=o.showComment,_=o.quality,p=o.scale,f={xsrf:(0,y.w$)(y.$W.xsrf)},l=v().stringify(f),g={file_id:e,add_browse_record:i,preview_attr:{page:c,sheet:u,quality:_,scale:p,src_type:a,ddst_type:s,show_comment:d}},[4,h.networkRequest.post("".concat("/v2/drive/docsPreviewURL","?").concat(l),g)];case 1:return[2,r.sent()]}}))}))},t.prototype.fetchPreviewQuery=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,i,o,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=t.fileId,n=t.shouldRetry,i={xsrf:(0,y.w$)(y.$W.xsrf)},o=v().stringify(i),a={file_id:e},n&&(a.should_retry=!0),[4,h.networkRequest.post("".concat("/v2/drive/preview/query","?").concat(o),a)];case 1:return[2,r.sent()]}}))}))},t.prototype.fetchDownloadInfo=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e={xsrf:(0,y.w$)(y.$W.xsrf)},n=v().stringify(e),i={file_id:t},[4,h.networkRequest.post("".concat("/v2/drive/downloadURL","?").concat(n),i)];case 1:return[2,r.sent()]}}))}))},t.prototype.fetchCopyInfo=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e={xsrf:(0,y.w$)(y.$W.xsrf)},n=v().stringify(e),i={file_id:t},[4,h.networkRequest.post("".concat("/v2/file/clone","?").concat(n),i)];case 1:return[2,r.sent()]}}))}))},(0,r.__decorate)([(0,o.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"fetchPreviewInfo",null),(0,r.__decorate)([(0,o.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[String]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"fetchDownloadInfo",null),(0,r.__decorate)([(0,o.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[String]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"fetchCopyInfo",null),t}(),I=function(){function t(){}return t.prototype.postImportFile=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=(0,l.pT)({folder_id:e.folderId,operation_id:e.operationId,cos_file_key:e.cosFileKey,drive_file_id:e.driveFileId,password:e.password,appid:e.appid,filename:e.filename,verify_token:e.verifyToken,async:e.async,platform:e.platform,preview:e.preview,delete_drive_file:e.deleteDriveFile,bind_scene:e.bindScene,scene_type:e.sceneType,scene_id:e.sceneId,scene_file_id:e.sceneFileId,appSource:e.appSource,createSource:e.createSource}),i="".concat(t.cgiPaths.IMPORT_FILE,"?xsrf=").concat((0,y.w$)(y.$W.xsrf)),[4,h.networkRequest.post(i,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.queryImportProgress=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=(0,l.kI)(e),i="".concat(t.cgiPaths.QUERY_IMPORT_PROGRESS,"?xsrf=").concat((0,y.w$)(y.$W.xsrf)),[4,h.networkRequest.post(i,n)];case 1:return[2,r.sent()]}}))}))},t.cgiPaths={IMPORT_FILE:"/v1/import/file",QUERY_IMPORT_PROGRESS:"/v1/import/queryImportProgress"},(0,r.__decorate)([(0,o.bj)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"postImportFile",null),t}(),b=function(){function t(t){this.docMetaDomain=t,this.fileDescRepo=new m,this.fileMetaRepo=new w,this.fileOperationRepo=new I,this.fileDescEntity=new u(this.fileDescRepo),this.fileMetaEntity=new f(this.fileMetaRepo),window.basicClientVars&&this.initWithBasicClientVars(window.basicClientVars)}return t.prototype.init=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,i,o,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=t.docId,n=t.addRecent,(0,a.Ph)(e)?[4,this.docMetaDomain.init(t)]:[2];case 1:return r.sent(),[4,this.docMetaDomain.docMetaEntity.fetchFileInfo(e,n)];case 2:return 0===(null==(i=r.sent().resData)?void 0:i.retcode)&&(null===(o=null==i?void 0:i.data)||void 0===o?void 0:o.result)&&(this.fileMetaEntity.initWithFileInfoRsp(i.data.result),this.initFileDescEntity(null===(s=i.data.result.fileMeta)||void 0===s?void 0:s.fileId)),[2]}}))}))},t.prototype.initFileDescEntity=function(t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t?[4,this.fileDescEntity.fetchFileDesc(t)]:[2];case 1:return e=r.sent().resData,(null===(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.result)||void 0===i?void 0:i.size)&&this.fileDescEntity.init({accurateSize:e.data.result.size}),[2]}}))}))},t.prototype.initWithBasicClientVars=function(t){var e,n,i,r;(null===(e=null==t?void 0:t.docInfo)||void 0===e?void 0:e.cosInfo)&&(this.fileMetaEntity.ext=null===(i=null===(n=null==t?void 0:t.docInfo)||void 0===n?void 0:n.cosInfo)||void 0===i?void 0:i.driveExt,this.fileMetaEntity.cosInfo=null===(r=null==t?void 0:t.docInfo)||void 0===r?void 0:r.cosInfo)},(0,r.__decorate)([(0,c.u)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,r.__decorate)([(0,o.aU)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[Object]),(0,r.__metadata)("design:returntype",void 0)],t.prototype,"initWithBasicClientVars",null),t=(0,r.__decorate)([(0,r.__param)(0,s.v),(0,r.__metadata)("design:paramtypes",[Object])],t)}()},345807:function(t,e,n){n.d(e,{U:function(){return i}});var i=(0,n(478247).y)("IFileInfoDomainService")},951980:function(t,e,n){n.r(e),n.d(e,{ACCOUNT_TYPE:function(){return _.Q},AUTH_ROLE:function(){return S.V},AccountDomainService:function(){return f.D},AtMessageDomainService:function(){return Z.M},AuthDomainService:function(){return C.n},BASE_CGICODE:function(){return i},BASE_URL_API:function(){return o.d0},BASE_URL_CGI_GO:function(){return o.jo},BASE_URL_ONLINE_DOCS:function(){return o.HL},BASE_URL_SDC:function(){return o.aP},BASE_URL_V2:function(){return o.rW},BASE_URL_V3:function(){return o.yQ},BIND_TYPE:function(){return y.gz},CAN_EXTERNAL_APPLY:function(){return a},COLLECT_CANCEL_FLAG:function(){return c.nN},COMMENT_BOX_STATUS:function(){return I.ul},CORP_POLICY:function(){return s},CREATE_DOC_TYPE:function(){return c.pZ},CREATE_HUMTRANS_FALG:function(){return c.rg},CREATE_SOURCE_TYPE:function(){return c.uv},CollaborateDomainService:function(){return $.u},CorpVipLevel:function(){return y.vA},DOCS_HOST:function(){return o.RP},DOCUMENT_PRIVILEGE:function(){return I.e0},DOC_HOST:function(){return o.Hf},DOC_STATUS:function(){return x.d},DocMetaDomainService:function(){return P.L},DomainUpdater:function(){return V.d},DrivePadType:function(){return it.B},ERenewalStatus:function(){return c.v2},EUserRenewalStatus:function(){return y.RM},EUserVipType:function(){return y.T0},EVipLevel:function(){return c.Dl},EVipStatus:function(){return y.gq},EnterpriseAccountDomainService:function(){return g.f},EnterpriseDocMetaDomainService:function(){return F.I},EnterpriseLikeDomainService:function(){return ot.G},ExpiredStatus:function(){return y.vV},FOLDER_LIST_TYPE:function(){return c.Cy},FileDomainService:function(){return E.v},FileInfoDomainService:function(){return et.h},FolderDomainService:function(){return R.i},FromDomin:function(){return m.zM},GET_RECOMMEND_FLAG:function(){return c.Cl},IAccountDomainService:function(){return p.b},IAtMessageDomainService:function(){return tt.B},IAuthDomainService:function(){return w.i},ICollaborateDomainService:function(){return G.U},ICollaborationFlag:function(){return b},IDocMetaDomainService:function(){return T.v},IDomainUpdater:function(){return W.e},IEnterpriseAccountDomainService:function(){return v.b},IFileDomainService:function(){return A.G},IFileInfoDomainService:function(){return nt.U},IFolderDomainService:function(){return M.r},ILikeDomainService:function(){return at.d},ILoginDomainService:function(){return l.C},ILogoutMessageType:function(){return Y.p},IMessageDomainService:function(){return K.x},INetworkRequestService:function(){return u._},INotificationDomainService:function(){return j.Y},INotifyScopeDomainService:function(){return X.Y},IShareDomainService:function(){return B.j},ITemplateDomainService:function(){return D.y},IUserInfoDomainService:function(){return q.m},IVipSuperStatus:function(){return y.pN},LOGINTYPE:function(){return _.R},LikeDomainService:function(){return rt.W},LoginDomainService:function(){return h.g},MessageDomainService:function(){return Q.i},NOT_LOGIN_TINYID:function(){return y.Dr},NetworkRequestService:function(){return d.L},NotificationDomainService:function(){return N.e},NotifyScopeDomainService:function(){return z.l},NotifyType:function(){return L},NotifyTypeFunc:function(){return k},POLICY:function(){return I.sX},PreviewQueryCodes:function(){return J},RETCODE:function(){return r},ShareDomainService:function(){return H.d},TemplateDomainService:function(){return O.Y},UType:function(){return m.Lq},UserInfoDomainService:function(){return U.$},UserType:function(){return m.FW},VipType:function(){return y.qu},WECOM_DOC_HOST:function(){return o.bd},officialType:function(){return y.n6}});var i,r,o=n(848330);!function(t){t[t.SUCCESS=0]="SUCCESS"}(i||(i={})),function(t){t[t.SUCCESS=0]="SUCCESS",t[t.NO_PERMISSION=10003]="NO_PERMISSION"}(r||(r={}));var a,s,c=n(413228),u=n(924251),d=n(156869),_=n(690592),p=n(446134),f=n(44041),l=n(694335),h=n(988455),g=n(257387),v=n(887689),m=n(661950),y=n(982764),w=n(908576),I=n(893014);!function(t){t[t.INVALID_NUM=0]="INVALID_NUM",t[t.CAN_APPLY=1]="CAN_APPLY",t[t.CANT_APPLY=2]="CANT_APPLY"}(a||(a={})),function(t){t[t.DENY=0]="DENY",t[t.WHITELIST=1]="WHITELIST",t[t.ALL_ONLY_READ=2]="ALL_ONLY_READ",t[t.ALL_ONLY_WRITE=3]="ALL_ONLY_WRITE",t[t.ALL_ONLY_EXECUTE=4]="ALL_ONLY_EXECUTE"}(s||(s={}));var b,S=n(695503),C=n(535669),E=n(593722),A=n(882918),R=n(779722),M=n(266173),O=n(908958),D=n(2080);!function(t){t[t.NOT_IN_COLLABORATION=0]="NOT_IN_COLLABORATION",t[t.IN_COLLABORATION=1]="IN_COLLABORATION"}(b||(b={}));var k,L,P=n(995193),T=n(734460),F=n(519228),x=n(225225),N=n(257121),j=n(725412),U=n(122495),q=n(960844),H=n(958444),B=n(27249),V=n(472691),W=n(276183),$=n(132292),G=n(35742),Q=n(684363),K=n(727353),Y=n(653952),z=n(104591),X=n(321900);!function(t){t[t.set=1]="set",t[t.get=2]="get"}(k||(k={})),function(t){t[t.none=0]="none",t[t.allNotify=1]="allNotify",t[t.relatedToMe=2]="relatedToMe"}(L||(L={}));var J,Z=n(609782),tt=n(89207),et=n(798477),nt=n(345807),it=n(899856);!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.NOT_FINISH=12973]="NOT_FINISH",t[t.ERROR=12974]="ERROR"}(J||(J={}));var rt=n(137317),ot=n(887533),at=n(816473)},887533:function(t,e,n){n.d(e,{G:function(){return s}});var i=n(338104),r=n(734460),o=n(960844),a=n(963210),s=function(){function t(t,e){this.docMetaDomain=t,this.userInfoDomain=e}return t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return console.log("EnterpriseLikeDomainService ~ init ~ do nothing",t),[2]}))}))},(0,i.__decorate)([(0,a.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,i.__decorate)([(0,i.__param)(0,r.v),(0,i.__param)(1,o.m),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}()},137317:function(t,e,n){n.d(e,{W:function(){return A}});var i,r,o,a,s,c,u=n(338104),d=n(446134),_=n(734460),p=n(960844),f=n(396285),l=n(963210),h=n(387540),g=n(332574),v=n(972925),m=n(754260),y=n(462330),w=n(95862);!function(t){t.NO_VIP_USER="novip_user",t.VIP_USER="vip_user",t.SUPER_VIP_USER="svip_user"}(i||(i={})),function(t){t.OPERATION_NAME="doc_vip_like",t.MODULE="switch"}(r||(r={})),function(t){t.ON="on",t.OFF="off"}(o||(o={})),function(t){t.PC_TITLEBAR="pc_titlebar",t.MOBILE_TITLEBAR="mobile_titlebar"}(a||(a={})),function(t){t.DOC_VIP_LIKE_SWITCH_ON="doc_vip_like-switch-on",t.DOC_VIP_LIKE_SWITCH_OFF="doc_vip_like-switch-off"}(s||(s={})),function(t){t[t.VIP_OFF=1]="VIP_OFF",t[t.VIP_ON=2]="VIP_ON"}(c||(c={}));var I=new w.UserAgent,b=function(t){return"".concat(t).concat(~t.indexOf("?")?"&":"?","xsrf=").concat((0,m.w$)(m.$W.xsrf))},S=function(){function t(t,e,n){this.docMetaDomain=t,this.userInfoDomainService=e,this.accountDomainService=n}return t.prototype.like=function(t,e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(i){return n={file_id:t,icon_id:e},[2,v.networkRequest.post(b("/cgi-bin/like/like"),n)]}))}))},t.prototype.getLikeIconList=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(n){return e={offset:0,limit:100},t&&(e={offset:0,limit:100,file_id:t}),[2,v.networkRequest.post(b("/cgi-bin/like/icon/list"),e)]}))}))},t.prototype.setLikeEnable=function(t,e){return(0,u.__awaiter)(this,void 0,void 0,(function(){var n,d,_,p,f;return(0,u.__generator)(this,(function(u){return n=this.accountDomainService.accountAggregate.vipInfo,d=n.vip,_=n.svip,p=_.status===c.VIP_ON?i.SUPER_VIP_USER:i.VIP_USER,(0,y.H)({opername:r.OPERATION_NAME,module:r.MODULE,action:e?o.ON:o.OFF,eventcode:e?s.DOC_VIP_LIKE_SWITCH_ON:s.DOC_VIP_LIKE_SWITCH_OFF,ver5:d.status===c.VIP_ON?p:i.NO_VIP_USER,ver8:I.isPC?a.PC_TITLEBAR:a.MOBILE_TITLEBAR}),f={enable:e,file_id:t},[2,v.networkRequest.post(b("/cgi-bin/like/enable/set"),f)]}))}))},t.prototype.isBanned=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(n){return e={file_id:t},[2,v.networkRequest.post(b("/cgi-bin/like/disabled"),e)]}))}))},t.prototype.getLikeRecordCount=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e;return(0,u.__generator)(this,(function(n){return e={file_id:t},[2,v.networkRequest.post(b("/cgi-bin/like/record/count"),e)]}))}))},t.prototype.getLikeRecordList=function(t,e,n){return(0,u.__awaiter)(this,void 0,void 0,(function(){var i;return(0,u.__generator)(this,(function(r){return i={file_id:t,start_record_id:e,limit:n,is_desc:!0},[2,v.networkRequest.post(b("/cgi-bin/like/record/list"),i)]}))}))},t=(0,u.__decorate)([(0,u.__param)(0,_.v),(0,u.__param)(1,p.m),(0,u.__param)(2,d.b),(0,u.__metadata)("design:paramtypes",[Object,Object,Object])],t)}(),C=function(){function t(){}return t.prototype.getOwnerVipLevel=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){return[2,v.networkRequest.post("/api/personalize/owner/viplevel",{file_id:t})]}))}))},t}(),E=function(){function t(t,e,n){this.docMetaDomain=t,this.userInfoDomain=e,this.accountDomainService=n,this.likeRepo=new S(t,e,n),this.ownerVipRepo=new C,this.onLikeDataChangedEmitter=new g.Emitter,this.onLikeDataChangedEvent=this.onLikeDataChangedEmitter.event}return t.prototype.init=function(t){this.fileId=t.fileId,this.ownerId=t.ownerId,this.tinyId=t.tinyId},t.prototype.initWithBasicClientVars=function(t){var e,n,i,r,o,a,s;this.fileId=null!==(i=null===(n=null===(e=t.docInfo)||void 0===e?void 0:e.padInfo)||void 0===n?void 0:n.padId)&&void 0!==i?i:"",this.ownerId=null!==(a=null===(o=null===(r=t.docInfo)||void 0===r?void 0:r.ownerInfo)||void 0===o?void 0:o.ownerId)&&void 0!==a?a:"",this.tinyId=null!==(s=t.userInfo.tinyId)&&void 0!==s?s:""},Object.defineProperty(t.prototype,"onLikeDataChanged",{get:function(){return this.onLikeDataChangedEvent},enumerable:!1,configurable:!0}),t.prototype.like=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){return[2,this.likeRepo.like(this.fileId,t)]}))}))},t.prototype.getLikeIconList=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){return[2,this.likeRepo.getLikeIconList(t)]}))}))},t.prototype.getLikeRecordCount=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(t){return[2,this.likeRepo.getLikeRecordCount(this.fileId)]}))}))},t.prototype.getLikeRecordList=function(){return(0,u.__awaiter)(this,arguments,void 0,(function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=50),(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.likeRepo.getLikeRecordList(this.fileId,t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.handleRealTimeLikeMessage=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e=this;return(0,u.__generator)(this,(function(n){return t.forEach((function(t){return(0,u.__awaiter)(e,void 0,void 0,(function(){var e,n,i;return(0,u.__generator)(this,(function(r){return e=t.body.notice,n=e.type,i=e.payload,"like"!==n?[2,console.error("unknown like domain ws message type:",n)]:(this.onLikeDataChangedEmitter.fire({newCount:i.count,newRecord:JSON.parse(i.like_record)}),[2])}))}))})),[2]}))}))},t.prototype.setLikeEnable=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.likeRepo.setLikeEnable(this.fileId,t)];case 1:if(e=i.sent(),0!==(null===(n=e.data)||void 0===n?void 0:n.retcode))throw Error("/cgi-bin/like/enable/set Request failed");return[2,e.data.result]}}))}))},t.prototype.isLikeEnable=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.isBannedByFile()];case 1:return e.sent()?[2,!1]:this.isInOwnerIdTailHash(t)?[2,!0]:[2,this.isVipDoc()]}}))}))},t.prototype.isBannedByFile=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.likeRepo.isBanned(this.fileId)];case 1:return t=i.sent(),[2,null!==(n=null===(e=t.data.result)||void 0===e?void 0:e.is_disabled)&&void 0!==n&&n];case 2:return i.sent(),[2,!0];case 3:return[2]}}))}))},t.prototype.isVipDoc=function(){return(0,u.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.ownerVipRepo.getOwnerVipLevel(this.fileId)];case 1:return t=i.sent(),(null===(e=t.data.result)||void 0===e?void 0:e.vip_level)?[2,(null===(n=t.data.result)||void 0===n?void 0:n.vip_level)>1]:[3,3];case 2:return i.sent(),[3,3];case 3:return[2,!1]}}))}))},t.prototype.isInOwnerIdTailHash=function(t){return!(!t||!this.ownerId)&&parseInt(this.ownerId.slice(-2),10)%100<t},t=(0,u.__decorate)([(0,u.__param)(0,_.v),(0,u.__param)(1,p.m),(0,u.__param)(2,d.b),(0,u.__metadata)("design:paramtypes",[Object,Object,Object])],t)}(),A=function(){function t(t,e,n){var i;if(this.docMetaDomain=t,this.userInfoDomain=e,this.accountDomainService=n,this.likeEntity=new E(t,e,n),window.basicClientVars)this.likeEntity.initWithBasicClientVars(window.basicClientVars);else{var r=null!==(i=location.pathname.split("/"))&&void 0!==i?i:[],o=r[1],a=r[2];if(void 0!==f.DOCUMENT_TYPE_MAP[o]&&a){var s={docId:a,u:(0,h.getQuery)("u")};this.init(s)}}}return t.prototype.init=function(t){return(0,u.__awaiter)(this,void 0,void 0,(function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.docMetaDomain.init(t),this.userInfoDomain.init(t)])];case 1:return e.sent(),this.likeEntity.init({fileId:this.docMetaDomain.docMetaEntity.padInfo.padId,ownerId:this.docMetaDomain.docMetaEntity.ownerInfo.ownerId,tinyId:this.userInfoDomain.userInfoAggregate.userInfo.tinyid}),[2]}}))}))},(0,u.__decorate)([(0,l.u)(),(0,u.__metadata)("design:type",Function),(0,u.__metadata)("design:paramtypes",[Object]),(0,u.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,u.__decorate)([(0,u.__param)(0,_.v),(0,u.__param)(1,p.m),(0,u.__param)(2,d.b),(0,u.__metadata)("design:paramtypes",[Object,Object,Object])],t)}()},816473:function(t,e,n){n.d(e,{d:function(){return i}});var i=(0,n(478247).y)("ILikeDomainService")},653952:function(t,e,n){var i;n.d(e,{p:function(){return i}}),function(t){t.LOGOUT="logout",t.SWITCH="switch",t.LOGIN="login"}(i||(i={}))},727353:function(t,e,n){n.d(e,{x:function(){return i}});var i=(0,n(478247).y)("IMessageDomainService")},684363:function(t,e,n){n.d(e,{i:function(){return tt}});var i,r=n(338104),o=n(963210),a=n(55152),s=n(332574);!function(t){t.ON="ON",t.OFF="OFF"}(i||(i={}));var c,u=function(){function t(t){this.emitter=new s.Emitter,this.listenersArray=[],this.messageCheckFn=t,this.initEmitterEvent(),this.msgHandler=this.messageCallback.bind(this)}return t.prototype.connect=function(){this.connectState!==i.ON&&(this.connectState=i.ON,window.addEventListener("message",this.msgHandler))},t.prototype.setIframeDom=function(t,e){this.iframeDom=t,this.targetOrigin=e},t.prototype.send=function(t){var e;this.iframeDom&&(null===(e=this.iframeDom.contentWindow)||void 0===e||e.postMessage(t,"*"))},t.prototype.receive=function(t){this.listenersArray.includes(t)||this.listenersArray.push(t)},t.prototype.dispose=function(){window.removeEventListener("message",this.msgHandler),this.connectState=i.OFF,this.listenersArray=[]},t.prototype.messageCallback=function(t){var e=!0;this.messageCheckFn&&(e=this.messageCheckFn(t)),e&&this.emitter.fire(t)},t.prototype.initEmitterEvent=function(){var t=this;this.emitter.event((function(e){t.listenersArray.forEach((function(t){"function"==typeof t&&t(e)}))}))},t}(),d=a.l8,_="ALREADY_IFRAME_GET_ACCOUNT_LIST_FROM_B",p="GET_ACCOUNT_LIST_FROM_B",f="DELETE_ACCOUNT_LIST_FROM_B",l="SUCCESS_GET_ACCOUNT_LIST_FROM_B",h="SUCCESS_DELETE_ACCOUNT_LIST_FROM_B",g=a.$8,v="iframe-to-manage-account-list",m=function(){function t(){this.getAccountMessage=new u(this.getAccountMessageCheckFn),this.iframeMountMessage=new u(this.getIframeMountMessageCheckFn),this.deleteAccountMessage=new u(this.getDeleteAccountMessageCheckFn)}return t.prototype.connect=function(){this.getAccountMessage.connect(),this.iframeMountMessage.connect(),this.deleteAccountMessage.connect()},t.prototype.dispose=function(){this.getAccountMessage.dispose(),this.iframeMountMessage.dispose(),this.deleteAccountMessage.dispose()},t.prototype.createGetAccountListIframe=function(t){var e=this;this.getAccountListIframeDom=this.createMessageIframe((function(n,i){i?(e.getAccountMessage.setIframeDom(n,d),e.deleteAccountMessage.setIframeDom(n,d)):null==t||t()}))},t.prototype.sendAccountListMessage=function(){this.getAccountMessage.send({eventFromCDomain:p})},t.prototype.sendDeleteAccountMessage=function(t){this.deleteAccountMessage.send({eventFromCDomain:f,cookie:t})},t.prototype.getAccountListMessage=function(t){this.getAccountMessage.receive(t)},t.prototype.getIframeMountMessage=function(t){this.iframeMountMessage.receive(t)},t.prototype.getDeleteAccountMessage=function(t){this.deleteAccountMessage.receive(t)},t.prototype.createMessageIframe=function(t){if(document.getElementById(v))return t(document.getElementById(v),!1),document.getElementById(v);var e=document.createElement("iframe");return e.src=g,e.id=v,e.style.visibility="hidden",e.style.width="0px",e.style.height="0px",document.body.appendChild(e),t(e,!0),e},t.prototype.getAccountMessageCheckFn=function(t){var e=t.data;return t.origin===d&&e.eventFromBDomain===l},t.prototype.getIframeMountMessageCheckFn=function(t){var e=t.data;return t.origin===d&&e.eventFromBDomain===_},t.prototype.getDeleteAccountMessageCheckFn=function(t){var e=t.data;return t.origin===d&&e.eventFromBDomain===h},t}(),y="IFRAME_ALREADY",w="GET_LOGINED_ACCOUNT",I="WILL_CHANGE_LOGINED_ACCOUNT",b="DELETE_LOGINED_ACCOUNT",S=a.LC,C=a.gN,E="iframe-to-manage-account-list",A=function(){function t(){this.getAccountMessage=new u(this.getAccountMessageCheckFn),this.iframeMountMessage=new u(this.getIframeMountMessageCheckFn),this.deleteAccountMessage=new u(this.getDeleteAccountMessageCheckFn)}return t.prototype.connect=function(){this.getAccountMessage.connect(),this.iframeMountMessage.connect(),this.deleteAccountMessage.connect()},t.prototype.dispose=function(){this.getAccountMessage.dispose(),this.iframeMountMessage.dispose(),this.deleteAccountMessage.dispose()},t.prototype.createGetAccountListIframe=function(t){var e=this;this.createMessageIframe((function(n,i){i?(e.getAccountMessage.setIframeDom(n,S),e.deleteAccountMessage.setIframeDom(n,S)):null==t||t()}))},t.prototype.sendAccountListMessage=function(){this.getAccountMessage.send({event:w})},t.prototype.sendDeleteAccountMessage=function(t){this.deleteAccountMessage.send({event:b,uid:t})},t.prototype.getAccountListMessage=function(t){this.getAccountMessage.receive(t)},t.prototype.getDeleteAccountMessage=function(t){this.deleteAccountMessage.receive(t)},t.prototype.getIframeMountMessage=function(t){this.iframeMountMessage.receive(t)},t.prototype.getAccountMessageCheckFn=function(t){return t.data.event===I},t.prototype.getIframeMountMessageCheckFn=function(t){return t.data.event===y},t.prototype.getDeleteAccountMessageCheckFn=function(t){return t.data.event===I},t.prototype.createMessageIframe=function(t){if(document.getElementById(E))return t(document.getElementById(E),!1),document.getElementById(E);var e=document.createElement("iframe");return e.src=C,e.id=E,e.style.visibility="hidden",e.style.width="0px",e.style.height="0px",document.body.appendChild(e),t(e,!0),e},t}(),R="ALREADY_JUMP_B_IFRAME",M="B_PAGE_SET_COOKIE",O="SUCCESS_SET_COOKIE",D=a.l8,k=a.rH,L="iframe-to-b-set-cookie",P=function(){function t(){this.iframeMountMessage=new u(this.getIframeMountMessageCheckFn),this.switchAccountMessage=new u(this.getSwitchAccountMessageCheckFn)}return t.prototype.connect=function(){this.iframeMountMessage.connect(),this.switchAccountMessage.connect()},t.prototype.dispose=function(){this.iframeMountMessage.dispose(),this.switchAccountMessage.dispose()},t.prototype.createSwitchEnterpriseAccount=function(t){var e=this;this.switchAccountDom=this.createMessageIframe((function(n,i){i?e.switchAccountMessage.setIframeDom(n,D):null==t||t()}))},t.prototype.getIframeMountMessage=function(t){this.iframeMountMessage.receive(t)},t.prototype.getSwitchAccountMessage=function(t){this.switchAccountMessage.receive(t)},t.prototype.sendSwitchAccountMessage=function(t){this.switchAccountMessage.send({event:M,cookie:t,fromDomain:"B_DOMAIN"})},t.prototype.createMessageIframe=function(t){document.getElementById(L)&&t(document.getElementById(L),!1);var e=document.createElement("iframe");return e.src=k,e.id=L,e.style.visibility="hidden",e.style.width="0px",e.style.height="0px",document.body.appendChild(e),t(e,!0),e},t.prototype.getIframeMountMessageCheckFn=function(t){var e=t.data;return t.origin===D&&e.event===R},t.prototype.getSwitchAccountMessageCheckFn=function(t){var e=t.data;return t.origin===D&&e.event===O},t}(),T="ALREADY_JUMP_C_IFRAME",F="C_PAGE_SET_COOKIE",x="SUCCESS_SET_COOKIE",N="EXPIRED_COOKIE",j=[a.LC],U=a.LC,q=a.n0,H="iframe-to-c-set-cookie",B=function(){function t(){this.iframeMountMessage=new u(this.getIframeMountMessageCheckFn),this.switchAccountMessage=new u(this.getSwitchAccountMessageCheckFn)}return t.prototype.connect=function(){this.iframeMountMessage.connect(),this.switchAccountMessage.connect()},t.prototype.dispose=function(){this.iframeMountMessage.dispose(),this.switchAccountMessage.dispose()},t.prototype.createSwitchEnterpriseAccount=function(t){var e=this;this.createMessageIframe((function(n,i){i?e.switchAccountMessage.setIframeDom(n,U):null==t||t()}))},t.prototype.getIframeMountMessage=function(t){this.iframeMountMessage.receive(t)},t.prototype.sendSwitchAccountMessage=function(t){this.switchAccountMessage.send({event:F,cookie:t,fromDomain:"C_DOMAIN"})},t.prototype.getSwitchAccountMessage=function(t){this.switchAccountMessage.receive(t)},t.prototype.createMessageIframe=function(t){document.getElementById(H)&&t(document.getElementById(H),!1);var e=document.createElement("iframe");return e.src=q,e.id=H,e.style.visibility="hidden",e.style.width="0px",e.style.height="0px",document.body.appendChild(e),t(e,!0),e},t.prototype.getIframeMountMessageCheckFn=function(t){var e=t.data,n=t.origin;return j.indexOf(n)>-1&&e.event===T},t.prototype.getSwitchAccountMessageCheckFn=function(t){var e=t.data,n=t.origin;return j.indexOf(n)>-1&&(e.event===x||e.event===N)},t}();!function(t){t.ON="ON",t.OFF="OFF"}(c||(c={}));var V,W=function(){function t(t,e){this.emitter=new s.Emitter,this.listenersArray=[],window.BroadcastChannel&&(this.channel=new window.BroadcastChannel(t)),this.messageCheckFn=e}return t.prototype.connect=function(){var t=this;this.connectState!==c.ON&&(this.connectState=c.ON,this.emitter.event((function(e){t.listenersArray.forEach((function(t){"function"==typeof t&&t(e)}))})),this.channel.onmessage=this.messageCallback.bind(this))},t.prototype.send=function(t){var e;null===(e=this.channel)||void 0===e||e.postMessage(t)},t.prototype.receive=function(t){this.listenersArray.includes(t)||this.listenersArray.push(t)},t.prototype.dispose=function(){var t;null===(t=this.channel)||void 0===t||t.close()},t.prototype.messageCallback=function(t){var e=!0;this.messageCheckFn&&(e=this.messageCheckFn(t)),e&&this.emitter.fire(t)},t}(),$=n(653952),G=function(){function t(){this.logoutMessage=new W("docMessageCenterChannel",this.logoutMessageCheckFn),this.key="".concat(Math.floor(1e9*Math.random()),"_").concat(+new Date)}return t.prototype.connect=function(){this.logoutMessage.connect()},t.prototype.getLogoutMessage=function(t){this.logoutMessage.receive(t)},t.prototype.sendLogoutMessage=function(t){this.logoutMessage.send({key:this.key,type:$.p.LOGOUT,userIndex:t})},t.prototype.logoutMessageCheckFn=function(t){return t.data.key!==this.key},t}();!function(t){t.QFYF_SUCCESS="login qfyf success",t.QQ_LOGIN_SUCCESS="login qq success",t.QQ_OAUTH_LOGIN_SUCCESS="login qq oauth success",t.QQ_BING_SUCCESS="bind qq success",t.QQ_IFRAME_MOUNT="mount qq iframe success"}(V||(V={}));var Q=a.Cs,K=function(){function t(){this.getQQLoginMessage=new u(this.getQQLoginMessageCheckFn)}return t.prototype.connect=function(){this.getQQLoginMessage.connect()},t.prototype.dispose=function(){this.getQQLoginMessage.dispose(),this.qqIframeMountListener=void 0},t.prototype.getQQLoginSuccessMessage=function(t){this.getQQLoginMessage.receive(t)},t.prototype.getQQIframeMessage=function(t){this.qqIframeMountListener=t},t.prototype.createQQLoginIframe=function(t,e){var n=this,i=document.createElement("iframe");return i.src=e,i.frameBorder="0",i.scrolling="auto",i.width="100%",i.height="100%",i.id="login_frame",i.name="login_frame",i.onload=function(){var t;null===(t=n.qqIframeMountListener)||void 0===t||t.call(n,new MessageEvent(V.QQ_IFRAME_MOUNT))},t.appendChild(i),i},t.prototype.getQQLoginMessageCheckFn=function(t){var e=t.data;return!(!t.origin.indexOf(Q)||!(e===V.QQ_LOGIN_SUCCESS||"string"==typeof e&&e.startsWith(V.QQ_OAUTH_LOGIN_SUCCESS)))},t}(),Y=function(){this.qqLoginMessage=new K},z=a.Cs,X=a.qe,J=function(){function t(){this.envType="person",this.getWeworkLoginMessage=new u(this.getWeworkLoginMessageCheckFn)}return t.prototype.connect=function(t){t&&(this.envType=t),this.getWeworkLoginMessage.connect()},t.prototype.dispose=function(){this.weworkIframeMountListener=void 0,this.getWeworkLoginMessage.dispose()},t.prototype.getWeworkLoginSuccessMessage=function(t){this.getWeworkLoginMessage.receive(t)},t.prototype.getWeworkIframeMessage=function(t){this.weworkIframeMountListener=t},t.prototype.createWeworkLoginIframe=function(t,e){var n=this,i=document.createElement("iframe");return i.src=e,i.frameBorder="0",i.scrolling="auto",i.width="100%",i.height="100%",i.id="login_frame",i.name="login_frame",i.onload=function(){var t;null===(t=n.weworkIframeMountListener)||void 0===t||t.call(n,new MessageEvent("IFRAME_DOM_MOUNTED"))},t.appendChild(i),i},t.prototype.getWeworkLoginMessageCheckFn=function(t){var e=t.data,n=t.origin,i="person"===this.envType?z:X;return!(!n.indexOf(i)||"string"!=typeof e||!e.includes("login wework success"))},t}(),Z=function(){this.weworkLoginMessage=new J},tt=function(){function t(){this.getEnterpriseAccountListMessage=new m,this.switchEnterpriseAccountMessage=new P,this.getPersonAccountListMessage=new A,this.switchPersonAccountMessage=new B,this.qqMessage=new Y,this.weworkMessage=new Z,this.logoutMessage=new G}return t.prototype.init=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return[2]}))}))},(0,r.__decorate)([(0,o.u)(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[]),(0,r.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t}()},725412:function(t,e,n){n.d(e,{Y:function(){return i}});var i=(0,n(478247).y)("INotificationDomainService")},257121:function(t,e,n){n.d(e,{e:function(){return k}});var i=n(338104),r=n(924251),o=n(734460),a=n(620492),s=n(617025),c=n(886531),u=n(655659),d=function(t){function e(e){var n=t.call(this)||this;return n.dataType=0,n.domainId="",n.localPadId="",n.padTitle="",n.padType="",n.padUrl="",n.page="",n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(u.K),_=function(t){function e(e){var n=t.call(this)||this;return n.avatar="",n.nick="",n.uid="",n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(u.K),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notifyUserInfo=new _({}),e.notifyPadInfo=new d({}),e.aRightFlag=0,e.bRightFlag=0,e.nRightFlag=0,e.rightFlag=0,e.denyCount=0,e.flag=0,e.id="",e.op="",e.pass=0,e.sendDate=0,e.subject="",e.type=0,e}return(0,i.__extends)(e,t),e.prototype.initWithJsonObj=function(t){t?(this.aRightFlag=t.aRightFlag,this.bRightFlag=t.bRightFlag,this.nRightFlag=t.nRightFlag,this.rightFlag=t.rightFlag,this.denyCount=t.denyCount,this.flag=t.flag,this.pass=t.pass,this.sendDate=t.send_date,this.type=t.type,this.id=t.id,this.op=t.op,this.subject=t.subject,this.notifyPadInfo=new d(t),this.notifyUserInfo=new _(t)):e.logger.debug("params erroro: initWithJsonObj")},e}(c.J),f=n(848330),l="".concat(f.HL,"notify_getnum"),h="".concat(f.HL,"notify_list"),g="".concat(f.HL,"auth_set"),v="".concat(f.HL,"auth_apply/check"),m="".concat(f.HL,"notify_delete"),y="".concat(f.HL,"transowner_accept"),w="".concat(f.HL,"transowner_reject"),I=n(972925),b=n(754260),S=n(407777),C=function(){function t(t){this.networkRequestService=t}return t.prototype.notifyGetNum=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){return t={xsrf:"".concat((0,b.w$)(b.$W.xsrf))},e=(0,S.At)(l,t),[2,I.networkRequest.get(e)]}))}))},t.prototype.notifyList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return t?(e=(0,S.At)(h,{xsrf:"".concat((0,b.w$)(b.$W.xsrf)),start:t}),[2,I.networkRequest.get(e)]):(n=(0,S.At)(h,{xsrf:"".concat((0,b.w$)(b.$W.xsrf))}),[2,I.networkRequest.get(n)])}))}))},t.prototype.currentDocNotifyList=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){return n?(o={xsrf:"".concat((0,b.w$)(b.$W.xsrf)),domainId:t,localPadId:e,start:n},r=(0,S.At)(h,o)):(o={xsrf:"".concat((0,b.w$)(b.$W.xsrf)),domainId:t,localPadId:e},r=(0,S.At)(h,o)),[2,I.networkRequest.get(r)]}))}))},t.prototype.authSet=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,i.__generator)(this,(function(i){return o={xsrf:(0,b.w$)(b.$W.xsrf),domainId:t,localPadId:e,notifyId:n,setInfo:r},a="".concat(g),[2,I.networkRequest.post(a,o)]}))}))},t.prototype.authApplyCheck=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){return n={xsrf:"".concat((0,b.w$)(b.$W.xsrf)),domainId:t,localPadId:e},r=(0,S.At)(v,n),[2,I.networkRequest.get(r)]}))}))},t.prototype.notifyDelete=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return e={id:t,xsrf:"".concat((0,b.w$)(b.$W.xsrf))},n=(0,S.At)(m,e),[2,I.networkRequest.get(n)]}))}))},t.prototype.transownerAccept=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,i.__generator)(this,(function(i){return o={xsrf:(0,b.w$)(b.$W.xsrf),domainId:t,localPadId:e,notifyId:n,setInfo:r},a="".concat(y),[2,I.networkRequest.post(a,o)]}))}))},t.prototype.transownerReject=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,a;return(0,i.__generator)(this,(function(i){return o={xsrf:(0,b.w$)(b.$W.xsrf),domainId:t,localPadId:e,notifyId:n,setInfo:r},a="".concat(w),[2,I.networkRequest.post(a,o)]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,r._),(0,i.__metadata)("design:paramtypes",[Object])],t)}(),E=n(332574),A=function(t){function e(e){var n=t.call(this)||this;return n.unreadSumCount=0,n.hasPolicyNotify=0,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(u.K),R="unreadInfo",M="list",O=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.docMetaDomainService=n,r.networkRequest=i,r.unreadInfo=new A({}),r.notifysAll=[],r.notifysCurrent=[],r.mOnNotifyUnreadInfoDidUpdated=new E.Emitter,r.onNotifyUnreadInfoDidUpdated=r.mOnNotifyUnreadInfoDidUpdated.event,r.notificationRepository=new C(i),r}return(0,i.__extends)(e,t),e.prototype.notifyGetNum=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.notificationRepository.notifyGetNum()]}))}))},e.prototype.notifyList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return t||(this.notifysAll=[]),[2,this.notificationRepository.notifyList(t)]}))}))},e.prototype.currentDocNotifyList=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return t||(this.notifysCurrent=[]),[2,this.notificationRepository.currentDocNotifyList(this.docMetaDomainService.docMetaEntity.padInfo.domainId,this.docMetaDomainService.docMetaEntity.padInfo.padId,t)]}))}))},e.prototype.authSet=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(i){return[2,this.notificationRepository.authSet(t,e,n,r)]}))}))},e.prototype.authApplyCheck=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.notificationRepository.authApplyCheck(t,e)]}))}))},e.prototype.notifyDelete=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.notificationRepository.notifyDelete(t)]}))}))},e.prototype.transownerAccept=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(i){return[2,this.notificationRepository.transownerAccept(t,e,n,r)]}))}))},e.prototype.transownerReject=function(t,e,n,r){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(i){return[2,this.notificationRepository.transownerReject(t,e,n,r)]}))}))},e.prototype.clearUnreadInfo=function(){this.unreadInfo=new A({}),this.mOnNotifyUnreadInfoDidUpdated.fire({unreadInfo:this.unreadInfo})},(0,i.__decorate)([(0,s.BX)("mOnNotifyUnreadInfoDidUpdated",R),(0,s.sv)(A.prototype.constructor,R),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"notifyGetNum",null),(0,i.__decorate)([(0,s.FY)(p.prototype.constructor,"notifysAll",M),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"notifyList",null),(0,i.__decorate)([(0,s.FY)(p.prototype.constructor,"notifysCurrent",M),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"currentDocNotifyList",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String,String,Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"authSet",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"authApplyCheck",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"notifyDelete",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String,String,Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"transownerAccept",null),(0,i.__decorate)([(0,s.Hh)(),(0,s.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String,String,Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"transownerReject",null),e=(0,i.__decorate)([(0,i.__param)(1,o.v),(0,i.__param)(2,r._),(0,i.__metadata)("design:paramtypes",[String,Object,Object])],e)}(a.Z),D=n(963210),k=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequest=e,this.notificationAggregate=new O("mainUserInfoAggregate",t,e)}return t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.docMetaDomainService.init(t)];case 1:return e.sent(),[2]}}))}))},(0,i.__decorate)([(0,D.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}()},321900:function(t,e,n){n.d(e,{Y:function(){return i}});var i=(0,n(478247).y)("INotifyScopeDomainService")},104591:function(t,e,n){n.d(e,{l:function(){return m}});var i=n(338104),r=n(620492),o=n(617025),a=n(711496),s=n(848330),c="".concat(s.Hf,"/wedoc/notifyscope"),u="".concat(s.Hf,"/wedoc/editnotify"),d=n(972925),_=function(){function t(){}return t.prototype.getNotifyType=function(t){var e=(0,a.bk)((0,i.__assign)({},t));return d.networkRequest.post(c,e)},t.prototype.setNotifyType=function(t){var e=(0,a.bk)((0,i.__assign)({},t));return d.networkRequest.post(c,e)},t.prototype.editnotify=function(t){var e=(0,a.bk)((0,i.__assign)({},t));return d.networkRequest.post(u,e)},t}(),p=function(t){function e(e){var n=t.call(this)||this;return n.notifyType=0,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K),f=n(332574),l="mOnNotifyInfoDidUpdated",h="notifyInfo",g=function(t){function e(e){var n=t.call(this,e)||this;return n.mOnNotifyInfoDidUpdated=new f.Emitter,n.notifyScopeRepository=new _,n.onNotifyInfoDidUpdated=n.mOnNotifyInfoDidUpdated.event,n}return(0,i.__extends)(e,t),e.prototype.getNotifyType=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.notifyScopeRepository.getNotifyType(t)]}))}))},e.prototype.setNotifyType=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.notifyScopeRepository.setNotifyType(t)]}))}))},e.prototype.editnotify=function(t){return this.notifyScopeRepository.editnotify(t)},e.prototype.setNotifyTypeWithParams=function(t){!t||t.length<1||(this.notifyInfo=new p({notifyType:t[0].notifyType}))},(0,i.__decorate)([(0,o.BX)(l,h),(0,o.sv)(p.prototype.constructor,h),(0,o.Hh)(),(0,o.LD)(),(0,o.bj)(),(0,o.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"getNotifyType",null),(0,i.__decorate)([(0,o.BX)(l,h),(0,o.CK)("setNotifyTypeWithParams"),(0,o.LD)(),(0,o.bj)(),(0,o.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"setNotifyType",null),(0,i.__decorate)([(0,o.Hh)(),(0,o.LD)(),(0,o.bj)(),(0,o.w1)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"editnotify",null),e}(r.Z),v=n(963210),m=function(){function t(){this.notifyScopeAggregate=new g("mainINotifyScope")}return t.prototype.init=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2]}))}))},(0,i.__decorate)([(0,v.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t}()},27249:function(t,e,n){n.d(e,{j:function(){return i}});var i=(0,n(478247).y)("IShareDomainService")},958444:function(t,e,n){n.d(e,{d:function(){return it}});var i=n(338104),r=n(924251),o=n(734460),a=n(617025),s=n(848330),c="".concat(s.HL,"user_recent"),u="".concat(s.HL,"auth_sendmsg"),d="".concat(s.Hf,"/cgi-go/common-notify/view"),_="".concat(s.HL,"browser_list"),p="".concat(s.Hf,"/v2/privilege/wxsharelink/save"),f="".concat(s.Hf,"/v2/privilege/wxsharelink/get"),l="".concat(s.Hf,"/v2/privilege/wxsharelink/recall"),h="".concat(s.HL,"wxqrcode"),g="".concat(s.HL,"qq_import/setTips"),v="".concat(s.Hf,"/cgi-bin/online_docs/share_doc"),m="".concat(s.HL,"auth_info/update"),y="".concat(s.Hf,"/sdc/friends"),w="".concat(s.Hf,"/sdc/gmembers"),I="".concat(s.Hf,"/sdc/dmembers"),b="".concat(s.Hf,"/v2/group/getinfo"),S="".concat(s.Hf,"/v2/sdc/friendchat"),C="".concat(s.Hf,"/v2/util/qq/auth/check"),E="".concat(s.Hf,"/enterprise/v1/cig/departments"),A="".concat(s.Hf,"/enterprise/v1/cig/search-user"),R="".concat(s.HL,"group_list"),M="".concat(s.HL,"group_members"),O="".concat(s.HL,"group_modify"),D="".concat(s.HL,"group_deletemember"),k="".concat(s.HL,"group_remove"),L="".concat(s.HL,"group_addmember"),P="".concat(s.HL,"group_create"),T="".concat(s.HL,"group_info"),F="".concat(s.HL,"group_quit"),x="".concat(s.HL,"group_checker"),N="".concat(s.HL,"group_addkey"),j="".concat(s.HL,"group_activate"),U=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.fetchGroupList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={start:t,limit:e,t:(new Date).getTime()},[2,this.networkRequestService.instance.post(R,(0,i.__assign)({},n))]}))}))},t.prototype.fetchGroupMembers=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r;return(0,i.__generator)(this,(function(o){return r={group_id:t,start:e,limit:n,t:(new Date).getTime()},[2,this.networkRequestService.instance.post(M,(0,i.__assign)({},r))]}))}))},t.prototype.modifyGroup=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={group_id:t,group_name:e},[2,this.networkRequestService.instance.post(O,(0,i.__assign)({},n))]}))}))},t.prototype.deleteGroupMember=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={group_id:t,mem_list:[e]},[2,this.networkRequestService.instance.post(D,(0,i.__assign)({},n))]}))}))},t.prototype.removeGroup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e={group_id:t},[2,this.networkRequestService.instance.post(k,(0,i.__assign)({},e))]}))}))},t.prototype.addGroupMember=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={group_id:t,mem_list:JSON.stringify(e)},[2,this.networkRequestService.instance.post(L,(0,i.__assign)({},n))]}))}))},t.prototype.createGroup=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={group_name:t,is_temp:e},[2,this.networkRequestService.instance.post(P,(0,i.__assign)({},n))]}))}))},t.prototype.fetchGroupInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e={group_id:t,get_key:!1},[2,this.networkRequestService.instance.post(T,(0,i.__assign)({},e))]}))}))},t.prototype.quitGroup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e={group_id:t},[2,this.networkRequestService.instance.post(F,(0,i.__assign)({},e))]}))}))},t.prototype.checkCreateGroup=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t={},[2,this.networkRequestService.instance.post(x,(0,i.__assign)({},t))]}))}))},t.prototype.addKeyToGroup=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={group_id:t,share_key:e},[2,this.networkRequestService.instance.post(N,(0,i.__assign)({},n))]}))}))},t.prototype.activateGroup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e={group_id:t},[2,this.networkRequestService.instance.post(j,(0,i.__assign)({},e))]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),q=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequest=e,this.groupShareRepository=new U(t,e)}return t.prototype.fetchGroupList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.groupShareRepository.fetchGroupList(t,e)]}))}))},t.prototype.fetchGroupMembers=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(i){return[2,this.groupShareRepository.fetchGroupMembers(t,e,n)]}))}))},t.prototype.modifyGroup=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.groupShareRepository.modifyGroup(t,e)]}))}))},t.prototype.deleteGroupMember=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.groupShareRepository.deleteGroupMember(t,e)]}))}))},t.prototype.removeGroup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.groupShareRepository.removeGroup(t)]}))}))},t.prototype.addGroupMember=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.groupShareRepository.addGroupMember(t,e)]}))}))},t.prototype.createGroup=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.groupShareRepository.createGroup(t,e)]}))}))},t.prototype.fetchGroupInfo=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.groupShareRepository.fetchGroupInfo(t)]}))}))},t.prototype.quitGroup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.groupShareRepository.quitGroup(t)]}))}))},t.prototype.checkCreateGroup=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.groupShareRepository.checkCreateGroup()]}))}))},t.prototype.addKeyToGroup=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.groupShareRepository.addKeyToGroup(t,e)]}))}))},t.prototype.activateGroup=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.groupShareRepository.activateGroup(t)]}))}))},(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number,Number]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchGroupList",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,Number,Number]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchGroupMembers",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"modifyGroup",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"deleteGroupMember",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"removeGroup",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,Array]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"addGroupMember",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,Boolean]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"createGroup",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchGroupInfo",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"quitGroup",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"checkCreateGroup",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"addKeyToGroup",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"activateGroup",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),H=n(754260),B=n(407777),V=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.fetchOrganizationalStructureList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){return n={deptID:e,corpID:t,t:(new Date).getTime(),xsrf:"".concat((0,H.w$)(H.$W.xsrf))},r=(0,B.At)(E,n),[2,this.networkRequestService.instance.get(r)]}))}))},t.prototype.searchQFYFUser=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,i.__generator)(this,(function(i){return r={corpid:t,pos:n,num:20,word:e,xsrf:"".concat((0,H.w$)(H.$W.xsrf)),t:(new Date).getTime()},o=(0,B.At)(A,r),[2,this.networkRequestService.instance.get(o)]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),W=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequest=e,this.qfyfShareRepository=new V(t,e)}return t.prototype.fetchOrganizationalStructureList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.qfyfShareRepository.fetchOrganizationalStructureList(t,e)]}))}))},t.prototype.searchQFYFUser=function(t,e,n){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(i){return[2,this.qfyfShareRepository.searchQFYFUser(t,e,n)]}))}))},(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchOrganizationalStructureList",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String,String,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"searchQFYFUser",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),$=n(711496),G=n(960844),Q=function(){function t(t,e,n){this.docMetaDomainService=t,this.networkRequestService=e,this.userInfoDomainService=n}return t.prototype.checkIfCanShare=function(){return(0,i.__awaiter)(this,arguments,void 0,(function(t){var e,n,r,o;return void 0===t&&(t=!1),(0,i.__generator)(this,(function(a){return e=(0,$.bk)({padId:this.docMetaDomainService.docMetaEntity.padInfo.padId,xsrf:(0,H.w$)(H.$W.xsrf)}),n={contentType:"application/x-www-form-urlencoded"},r=(0,i.__assign)({},t?{uflag:"qqsig"}:null),o=(0,B.At)(m,r),[2,this.networkRequestService.instance.post(o,e,n)]}))}))},t.prototype.setTipsAfterImport=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.__generator)(this,(function(a){return e=t.fileMd5,n=t.guestUid,r=t.guestUidType,o={file_md5:e,guest_uid:n,guest_uid_type:r,tips_showed_fl:1},[2,this.networkRequestService.instance.post(g,(0,i.__assign)({},o))]}))}))},t.prototype.shareToQQOrTIM=function(t){return(0,i.__awaiter)(this,arguments,void 0,(function(t,e){var n,r,o,a;return void 0===e&&(e=!1),(0,i.__generator)(this,(function(s){return n=(0,$.bk)({padid:this.docMetaDomainService.docMetaEntity.padInfo.padId,domainid:this.docMetaDomainService.docMetaEntity.padInfo.domainId,uins:JSON.stringify(t),xsrf:(0,H.w$)(H.$W.xsrf)}),r={contentType:"application/x-www-form-urlencoded"},o=(0,i.__assign)({},e?{uflag:"qqsig"}:null),a=(0,B.At)(v,o),[2,this.networkRequestService.instance.post(a,n,r)]}))}))},t.prototype.fetchFriendsInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){return t={t:(new Date).getTime(),xsrf:"".concat((0,H.w$)(H.$W.xsrf))},e=(0,B.At)(y,t),[2,this.networkRequestService.instance.get(e)]}))}))},t.prototype.fetchGroupMember=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return e={dstuin:t,t:(new Date).getTime(),xsrf:"".concat((0,H.w$)(H.$W.xsrf))},n=(0,B.At)(w,e),[2,this.networkRequestService.instance.get(n)]}))}))},t.prototype.fetchDiscussGroupMember=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return e={dstuin:t,t:(new Date).getTime(),xsrf:"".concat((0,H.w$)(H.$W.xsrf))},n=(0,B.At)(I,e),[2,this.networkRequestService.instance.get(n)]}))}))},t.prototype.checkSkeyAuth=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t={uin:this.userInfoDomainService.userInfoAggregate.userInfo.uin,p_lskey:(0,$.s4)()||"",p_skey:(0,$.DN)()||""},[2,this.networkRequestService.instance.post(C,(0,i.__assign)({},t))]}))}))},t.prototype.fetchGroupInfo=function(t){var e={groupCode:t,xsrf:"".concat((0,H.w$)(H.$W.xsrf))};return this.networkRequestService.instance.post(b,(0,i.__assign)({},e))},t.prototype.fetchFriendInfo=function(t){var e={uin:"".concat(t),xsrf:"".concat((0,H.w$)(H.$W.xsrf))};return this.networkRequestService.instance.post(S,(0,i.__assign)({},e))},t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__param)(2,G.m),(0,i.__metadata)("design:paramtypes",[Object,Object,Object])],t)}(),K=Q,Y=n(690592),z=function(){function t(t,e,n){this.docMetaDomainService=t,this.networkRequest=e,this.userInfoDomainService=n,this.qqShareRepository=new K(t,e,n)}return t.prototype.checkIfCanShare=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){return t=this.userInfoDomainService.userInfoAggregate.userInfo.loginType,e=![Y.Q.QQ,Y.Q.WX].includes(t),[2,this.qqShareRepository.checkIfCanShare(e)]}))}))},t.prototype.setTipsAfterImport=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.qqShareRepository.setTipsAfterImport(t)]}))}))},t.prototype.shareToQQOrTIM=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,i.__generator)(this,(function(i){return e=this.userInfoDomainService.userInfoAggregate.userInfo.loginType,n=![Y.Q.QQ,Y.Q.WX].includes(e),[2,this.qqShareRepository.shareToQQOrTIM(t,n)]}))}))},t.prototype.fetchFriendsInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.qqShareRepository.fetchFriendsInfo()]}))}))},t.prototype.fetchGroupMember=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.qqShareRepository.fetchGroupMember(t)]}))}))},t.prototype.fetchDiscussGroupMember=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.qqShareRepository.fetchDiscussGroupMember(t)]}))}))},t.prototype.checkSkeyAuth=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.qqShareRepository.checkSkeyAuth()]}))}))},t.prototype.fetchGroupInfo=function(t){return this.qqShareRepository.fetchGroupInfo(t)},t.prototype.fetchFriendInfo=function(t){return this.qqShareRepository.fetchFriendInfo(t)},(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"checkIfCanShare",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"setTipsAfterImport",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Array]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"shareToQQOrTIM",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchFriendsInfo",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchGroupMember",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchDiscussGroupMember",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"checkSkeyAuth",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchGroupInfo",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchFriendInfo",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__param)(2,G.m),(0,i.__metadata)("design:paramtypes",[Object,Object,Object])],t)}(),X=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.fetchRecentUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t,e;return(0,i.__generator)(this,(function(n){return t={padId:this.docMetaDomainService.docMetaEntity.padInfo.padId,domain:this.docMetaDomainService.docMetaEntity.padInfo.domainId,xsrf:"".concat((0,H.w$)(H.$W.xsrf))},e=(0,B.At)(c,t),[2,this.networkRequestService.instance.post(e)]}))}))},t.prototype.sendDocToMember=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n;return(0,i.__generator)(this,(function(r){return n={padId:this.docMetaDomainService.docMetaEntity.padInfo.padId,domainId:this.docMetaDomainService.docMetaEntity.padInfo.domainId,addmemlist:JSON.stringify(t),corpid:(0,$.Pc)(e),xsrf:(0,H.w$)(H.$W.xsrf)},[2,this.networkRequestService.instance.post(u,(0,i.__assign)({},n))]}))}))},t.prototype.exportToPC=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t={padId:this.docMetaDomainService.docMetaEntity.padInfo.padId,xsrf:(0,H.w$)(H.$W.xsrf)},[2,this.networkRequestService.instance.post(d,(0,i.__assign)({},t))]}))}))},t.prototype.fetchBrowserList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(i){return n={domain_id:this.docMetaDomainService.docMetaEntity.padInfo.domainId,pad_id:this.docMetaDomainService.docMetaEntity.padInfo.padId,start:t,limit:e,xsrf:"".concat((0,H.w$)(H.$W.xsrf)),t:(new Date).getTime()},r=(0,B.At)(_,n),[2,this.networkRequestService.instance.get(r)]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),J=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequest=e,this.shareRepository=new X(t,e)}return t.prototype.sendDocToMember=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.shareRepository.sendDocToMember(t,e)]}))}))},t.prototype.fetchRecentUserInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.shareRepository.fetchRecentUserInfo()]}))}))},t.prototype.exportToPC=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.shareRepository.exportToPC()]}))}))},t.prototype.fetchBrowserList=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.shareRepository.fetchBrowserList(t,e)]}))}))},(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Array,String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"sendDocToMember",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchRecentUserInfo",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"exportToPC",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number,Number]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchBrowserList",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),Z=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequestService=e}return t.prototype.addWxShareLinkCount=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e={doc_id:this.docMetaDomainService.docMetaEntity.padInfo.padId,token:t},[2,this.networkRequestService.instance.post(p,(0,i.__assign)({},e))]}))}))},t.prototype.fetchWxShareLinkCount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t={doc_id:this.docMetaDomainService.docMetaEntity.padInfo.padId},[2,this.networkRequestService.instance.post(f,(0,i.__assign)({},t))]}))}))},t.prototype.wxShare=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.__generator)(this,(function(a){return e=t.groupId,n=t.shareLink,r=t.policy,o={groupId:(0,$.Pc)(e),domainId:this.docMetaDomainService.docMetaEntity.padInfo.domainId,padId:this.docMetaDomainService.docMetaEntity.padInfo.padId,page:"h5",right_flag:2,type:1,param:encodeURIComponent(n),ac:"share",policy:r,xsrf:(0,H.w$)(H.$W.xsrf)},[2,this.networkRequestService.instance.post(h,(0,i.__assign)({},o))]}))}))},t.prototype.stopWxShare=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t={doc_id:this.docMetaDomainService.docMetaEntity.padInfo.padId},[2,this.networkRequestService.instance.post(l,(0,i.__assign)({},t))]}))}))},t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),tt=function(){function t(t,e){this.docMetaDomainService=t,this.networkRequest=e,this.weChatShareRepository=new Z(t,e)}return t.prototype.fetchWxShareLinkCount=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.weChatShareRepository.fetchWxShareLinkCount()]}))}))},t.prototype.stopWxShare=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.weChatShareRepository.stopWxShare()]}))}))},t.prototype.addWxShareLinkCount=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.weChatShareRepository.addWxShareLinkCount(t)]}))}))},t.prototype.wxShare=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.weChatShareRepository.wxShare(t)]}))}))},(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"fetchWxShareLinkCount",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"stopWxShare",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[String]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"addWxShareLinkCount",null),(0,i.__decorate)([(0,a.Hh)(),(0,a.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"wxShare",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__metadata)("design:paramtypes",[Object,Object])],t)}(),et=function(){function t(t,e,n){this.docMetaDomainService=t,this.networkRequestService=e,this.userInfoDomainService=n,this.shareEntity=new J(t,e),this.groupShareEntity=new q(t,e),this.qqShareEntity=new z(t,e,n),this.weChatShareEntity=new tt(t,e),this.qfyfShareEntity=new W(t,e)}return t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__param)(2,G.m),(0,i.__metadata)("design:paramtypes",[Object,Object,Object])],t)}(),nt=n(963210),it=function(){function t(t,e,n){this.docMetaDomainService=t,this.networkRequest=e,this.userInfoDomainService=n,this.shareAggregate=new et(t,e,n)}return t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.docMetaDomainService.init(t),this.userInfoDomainService.init(t)])];case 1:return e.sent(),[2]}}))}))},(0,i.__decorate)([(0,nt.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),t=(0,i.__decorate)([(0,i.__param)(0,o.v),(0,i.__param)(1,r._),(0,i.__param)(2,G.m),(0,i.__metadata)("design:paramtypes",[Object,Object,Object])],t)}()},960844:function(t,e,n){n.d(e,{m:function(){return i}});var i=(0,n(478247).y)("IUserInfoDomainService")},122495:function(t,e,n){n.d(e,{$:function(){return C}});var i=n(338104),r=n(617025),o=n(620492),a=n(886531),s=function(t){function e(e){var n=t.call(this)||this;return n.beginTime=0,n.endTime=0,n.isVip=!1,n.oldVip=!1,n.vipLevel=0,n.user={},n.recycleLimit={},n.collaborateLimit={},n.expansion={},n.superVip={},e.super_vip=e.super,n.jsonObj2Class(e),n}return(0,i.__extends)(e,t),e}(n(655659).K),c=n(690592),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatar="",e.qqAvatar="",e.wxAvatar="",e.nick="",e.qqNick="",e.wxNick="",e.corpId="",e.corpName="",e.domain="",e.domainId="",e.dbEmail="",e.email="",e.tinyid="",e.toid="",e.userId="",e.uid="",e.wxOpenid="",e.uidSource=0,e.uin="",e.login=!1,e.loginTime=0,e.loginType=c.Q.UNKNOWN,e.xu="",e.vipInfo=new s({}),e.vip="",e.userPic="",e}return(0,i.__extends)(e,t),e}(a.J),d=n(848330),_="".concat(d.HL,"user_info"),p="".concat(d.HL,"vip_all"),f="".concat(d.HL,"user_flag"),l="".concat(d.HL,"user_info/check"),h=n(972925),g=n(754260),v=n(407777),m=function(){function t(){}return t.prototype.getUserInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){var n,r;return(0,i.__generator)(this,(function(o){return n={get_vip_info:t},e&&(n=(0,i.__assign)((0,i.__assign)({},n),{u:e})),r=(0,v.At)(_,n),[2,h.networkRequest.post(r,{xsrf:(0,g.w$)(g.$W.xsrf)})]}))}))},t.prototype.getVipInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,v.At)(p,{xsrf:"".concat((0,g.w$)(g.$W.xsrf))}),[2,h.networkRequest.post(t)]}))}))},t.prototype.getUserFlag=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e;return(0,i.__generator)(this,(function(n){return e=(0,v.At)(f,{xsrf:"".concat((0,g.w$)(g.$W.xsrf)),type:t}),[2,h.networkRequest.post(e)]}))}))},t.prototype.userInfoCheck=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var t;return(0,i.__generator)(this,(function(e){return t=(0,v.At)(l,{xsrf:"".concat((0,g.w$)(g.$W.xsrf))}),[2,h.networkRequest.post(t)]}))}))},t}(),y=n(332574),w="userInfo",I=function(t){function e(e){var n=t.call(this,e)||this;return n.userInfo=new u("mainUserInfo"),n.mOnUserInfoDidUpdated=new y.Emitter,n.userInfoRepository=new m,n.onUserInfoDidUpdated=n.mOnUserInfoDidUpdated.event,n}return(0,i.__extends)(e,t),e.prototype.fetchUserInfo=function(t,e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(n){return[2,this.userInfoRepository.getUserInfo(t,e)]}))}))},e.prototype.fetchVipInfo=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return this.vipInfo=[],[2,this.userInfoRepository.getVipInfo()]}))}))},e.prototype.fetchUserFlag=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){return[2,this.userInfoRepository.getUserFlag(t)]}))}))},e.prototype.userInfoCheck=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,this.userInfoRepository.userInfoCheck()]}))}))},(0,i.__decorate)([(0,r.BX)("mOnUserInfoDidUpdated",w),(0,r.sv)(u.prototype.constructor,w),(0,r.rx)(),(0,r.bj)(),(0,r.GT)("x-u","xu"),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number,String]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"fetchUserInfo",null),(0,i.__decorate)([(0,r.FY)(s.prototype.constructor,"vipInfo","vip_info"),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"fetchVipInfo",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"fetchUserFlag",null),(0,i.__decorate)([(0,r.Hh)(),(0,r.bj)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],e.prototype,"userInfoCheck",null),e}(o.Z),b=n(963210),S=n(911862),C=function(){function t(){this.userInfoAggregate=new I("mainUserInfoAggregate"),this.isInitedByBasicClientVars=!1,(0,S.VT)(this,this.userInfoAggregate,I),window.basicClientVars&&this.initWithBasicClientVars(window.basicClientVars)}return t.prototype.init=function(t){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.u,[4,this.userInfoAggregate.fetchUserInfo(1,e)];case 1:return n=i.sent().resData,(r=null==n?void 0:n.data)?(this.userInfoAggregate.userInfo.initWithJsonObj({avatar:r.userPic,nick:r.nick,corpId:r.corpId,corpName:r.corpName,domain:r.domain,domainId:r.domainId,loginType:r.loginType,login:r.login,uin:r.uin,uidSource:r.uidSource,wxOpenid:r.wxOpenid,tinyid:r.tinyid,userId:""===r.userId?"p.".concat(r.tinyid):r.userId}),[2]):[2]}}))}))},t.prototype.updateWithClientVars=function(t){this.isInitedByBasicClientVars||this.userInfoAggregate.userInfo.initWithJsonObj({avatar:t.userPic,tinyid:t.tinyid,nick:t.userName,loginType:t.userType,userId:t.userId,uin:t.uin})},t.prototype.initWithBasicClientVars=function(t){this.userInfoAggregate.userInfo.initWithJsonObj({corpId:t.userInfo.corpId,corpName:t.userInfo.corpName,loginType:t.userInfo.loginType,login:!!t.userInfo.tinyId,uin:t.userInfo.uin,uidSource:t.userInfo.uidSource,wxOpenid:t.userInfo.openId,tinyid:t.userInfo.tinyId,userId:t.userInfo.userId,avatar:t.userInfo.userPic,nick:t.userInfo.userName}),this.isInitedByBasicClientVars=!0},(0,i.__decorate)([(0,b.u)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",Promise)],t.prototype,"init",null),(0,i.__decorate)([(0,r.aU)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object]),(0,i.__metadata)("design:returntype",void 0)],t.prototype,"initWithBasicClientVars",null),t}()}}]),"object"==typeof globalThis&&(globalThis.jsExecEndTimeStamp=Date.now(),globalThis.cachedPerformanceEntries||(globalThis.cachedPerformanceEntries=[]),globalThis.cachedPerformanceEntries.push({name:"jsExec: js/public-ark-domain-6a52a22e.js",entryType:"jsExec",startTime:globalThis.jsExecStartTimeStamp,endTime:globalThis.jsExecEndTimeStamp}));
//# sourceMappingURL=public-ark-domain-6a52a22e.js.map