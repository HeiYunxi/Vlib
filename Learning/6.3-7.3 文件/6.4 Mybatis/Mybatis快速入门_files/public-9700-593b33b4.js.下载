"object"==typeof globalThis&&(globalThis.jsExecStartTimeStamp=Date.now()),(self.webpackChunkuni=self.webpackChunkuni||[]).push([[9700],{67986:function(e,t,n){n.d(t,{V:function(){return r}});var r=400},830640:function(e,t,n){n.d(t,{l:function(){return r},v:function(){return a}});var r,i=n(839461),o=n(495155);!function(e){e.ON_BACKGROUND_CHANGE="on_background_change"}(r||(r={}));var a=function(e){function t(t,n){var i=e.call(this,r.ON_BACKGROUND_CHANGE)||this;return i.backgroundId=t,i.transparency=n,i}return(0,i.__extends)(t,e),t}(o.Notification)},701128:function(e,t,n){n.d(t,{L:function(){return a},z:function(){return r}});var r,i=n(839461),o=n(495155);!function(e){e.ANONYMOUS_STATUS="anonymous_status"}(r||(r={}));var a=function(e){function t(t,n){var i=e.call(this,r.ANONYMOUS_STATUS)||this;return i.operator=t,i.status=n,i}return(0,i.__extends)(t,e),t}(o.Notification)},614512:function(e,t,n){n.d(t,{B4:function(){return b},GT:function(){return h},Gu:function(){return p},Id:function(){return f},Us:function(){return d},WY:function(){return m},iW:function(){return g},pB:function(){return v},wq:function(){return y},zv:function(){return l}});var r,i,o=n(839461),a=n(912214),s=n(413228),u=n(495155),c=n(446296);function l(){var e="web";return u.PlatformUtil.isWXMiniProgram()?e="wxsp":u.PlatformUtil.isTencentDocsDesktopApp()&&(e="desk"),e}function d(){var e="";return u.PlatformUtil.isWindows()?e="wd":u.PlatformUtil.isMac()&&(e="mac"),e}function f(){var e,t,n,r,i,o;return(null===(t=null===(e=c.f.domainInfo.vipInfo)||void 0===e?void 0:e.vip)||void 0===t?void 0:t.status)===a.gq.OPEN||(null===(r=null===(n=c.f.domainInfo.vipInfo)||void 0===n?void 0:n.vvip)||void 0===r?void 0:r.status)===a.gq.OPEN||(null===(o=null===(i=c.f.domainInfo.vipInfo)||void 0===i?void 0:i.svip)||void 0===o?void 0:o.status)===a.gq.OPEN}function p(){var e,t,n,r,i,o;return(null===(t=null===(e=c.f.domainInfo.vipInfo)||void 0===e?void 0:e.vip)||void 0===t?void 0:t.status)===a.gq.EXPIRED||(null===(r=null===(n=c.f.domainInfo.vipInfo)||void 0===n?void 0:n.vvip)||void 0===r?void 0:r.status)===a.gq.EXPIRED||(null===(o=null===(i=c.f.domainInfo.vipInfo)||void 0===i?void 0:i.svip)||void 0===o?void 0:o.status)===a.gq.EXPIRED}function v(){var e,t;return(null===(t=null===(e=c.f.domainInfo.vipInfo)||void 0===e?void 0:e.svip)||void 0===t?void 0:t.status)===a.gq.OPEN}function h(){return c.f.domainInfo.vipInfo}function m(){return(0,o.__awaiter)(this,void 0,Promise,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,c.f.accountApplication.updateVipInfo()];case 1:return e.sent(),[2,f()]}}))}))}function g(){var e,t,n,r=h();return(null===(e=null==r?void 0:r.vvip)||void 0===e?void 0:e.status)===a.gq.OPEN?"vvip_user":(null===(t=null==r?void 0:r.svip)||void 0===t?void 0:t.status)===a.gq.OPEN?"svip_user":(null===(n=null==r?void 0:r.vip)||void 0===n?void 0:n.status)===a.gq.OPEN?"vip_user":"novip_user"}function y(){var e=h(),t=s.Dl.Inactive;switch(e.type){case i.NORMAL:t=s.Dl.NormalVip;break;case i.SUPER:t=s.Dl.SuperVip}return t}function b(){var e,t,n;if(!window.VipInfo||window.VipInfo.vipLevel!==r.superVip)return!1;var i=null===(t=null===(e=window.basicClientVars)||void 0===e?void 0:e.userInfo)||void 0===t?void 0:t.settings;return!!Number(null!==(n=null==i?void 0:i.vipTheme)&&void 0!==n?n:0)}!function(e){e[e.notVip=1]="notVip",e[e.normaLVip=2]="normaLVip",e[e.superVip=3]="superVip"}(r||(r={})),function(e){e.NORMAL="NORMAL",e.SUPER="SUPER",e.NONE="NONE",e.EXPIRED="EXPIRED"}(i||(i={}))},320023:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(839461),i=n(87363),o=n.n(i);function a(e,t){return o().forwardRef((function(n,i){var a=o().useRef(null);return o().useImperativeHandle(i,(function(){return a.current})),o().createElement(o().Suspense,{fallback:null!=t?t:null},o().createElement(e,(0,r.__assign)({},n,{ref:a})))}))}},446296:function(e,t,n){n.d(t,{f:function(){return h}});var r=n(839461),i=n(495155),o=n(259356),a=n(243607),s=n(30521),u=n(97303);function c(e){return function(e,t){return Object.prototype.toString.call(t)==="[object ".concat(e,"]")}("Object",e)}function l(e){if(!e||!c(e))return e;var t={};return Object.keys(e).forEach((function(n){var r=function(e){for(var t=e.split("_"),n="",r=0;r<t.length;r++){var i=t[r];i.length>0&&(n+=0===r?i:i="".concat(i[0].toUpperCase()).concat(i.substring(1)))}return n}(n);if(Object.prototype.hasOwnProperty.call(e,n))if(e[n]instanceof Array){var i=e[n],o=[];i.forEach((function(e){var t=l(e);o.push(t)})),t[r]=o}else e[n]instanceof Object?t[r]=l(e[n]):t[r]=e[n]})),t}var d=n(1792),f=n(991287),p="ArkDomainManager",v=f.X.getInstance().getConfig("custom.feature.autoLogin"),h=function(){function e(){}return e.initAccountApplication=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=o.Am.get(a.$),(t=e.dependentServiceCombinder).enterpriseAccountApplication,n=t.accountApplication,[3,2];case 1:return r.sent(),[3,7];case 2:return d.dQ?(this.accountApplication=n,[4,this.accountApplication.init()]):[3,4];case 3:return r.sent(),[3,7];case 4:return this.accountApplication=n,[4,(0,u.authenticate)({autoLogin:!(!v||window.isPublishedURL)&&{extensionService:e.extensionService}})];case 5:return r.sent(),[4,this.accountApplication.init()];case 6:r.sent(),this.setVipInfo(),r.label=7;case 7:return[4,this.setUserInfo()];case 8:return r.sent(),[2]}}))}))},e.setUserInfo=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return e={},[3,4];case 1:return n.trys.push([1,3,,4]),[4,s.wdocsUserCenter.getUserInfo()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),i.Logger.error(p,"获取B端userinfo失败"),[3,4];case 4:return this.accountApplication?[4,this.accountApplication.init()]:[3,6];case 5:return n.sent(),e=this.accountApplication.userInfo,[3,7];case 6:t?e=l(t):i.Logger.error(p,"修改clientVars.userInfo失败"),n.label=7;case 7:return t&&(e.openId=t.openid,e.vid=t.vid,e.corp_id=t.corp_id,e.corp_name=t.corp_name,e.corpId=t.corp_id,e.corpName=t.corp_name),window.clientVars&&(window.clientVars.userInfo=e),[2]}}))}))},e.setVipInfo=function(){e.accountApplication.mutate("vipInfo"),e.accountApplication.mutate("officialInfo");var t=e.accountApplication,n=t.officialInfo,r=t.vipInfo,i=t.userInfo;this.domainInfo.userOfficialInfo=(null==n?void 0:n.credential)?n:void 0,this.domainInfo.vipInfo=r,this.domainInfo.userInfo=i,this.subscribeVipInfo(),this.subscribeOfficialInfo()},e.subscribeVipInfo=function(){var t=this;e.accountApplication.subscribe("vipInfo",(function(e){t.domainInfo.vipInfo=e}))},e.subscribeOfficialInfo=function(){var t=this;e.accountApplication.subscribe("officialInfo",(function(e){t.domainInfo.userOfficialInfo=e}))},e.domainInfo={},e}()},671923:function(e,t,n){n.r(t),n.d(t,{AnonymousStatus:function(){return r},IAnonymousFeature:function(){return u}});var r,i=n(839461),o=(n(495155),n(259356)),a=n(293325),s=n(870372);!function(e){e[e.ENABLE=1]="ENABLE",e[e.DISABLE=2]="DISABLE",e[e.EXPIRED=3]="EXPIRED"}(r||(r={}));var u=Symbol.for("feature:".concat(s.C.Anonymous));o.Ln.merge(u,{useFactory:function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,795530))];case 1:return[2,e.sent().AnonymousHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:u,platforms:[a.Ev.Pc,a.Ev.Mobile],load:!0})})},817635:function(e,t,n){n.r(t),n.d(t,{BackgroundType:function(){return r},IBackgroundFeature:function(){return u}});var r,i=n(839461),o=(n(495155),n(259356)),a=n(293325),s=n(870372);!function(e){e[e.IMAGE=1]="IMAGE",e[e.GROUP_IMAGES=2]="GROUP_IMAGES",e[e.VIDEO=3]="VIDEO"}(r||(r={}));var u=Symbol.for("feature:".concat(s.C.Background));o.Ln.merge(u,{useFactory:function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,201674))];case 1:return[2,e.sent().BackgroundHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:u,platforms:[a.Ev.Pc,a.Ev.Mobile,a.Ev.Pad],load:!0})})},547387:function(e,t,n){n.r(t),n.d(t,{ICollectPcFeature:function(){return a}});var r=n(839461),i=n(259356),o=n(870372),a=Symbol.for("feature:".concat(o.C.CollectPc));i.Ln.merge(a,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,n.e(7458).then(n.bind(n,250808))];case 1:return[2,e.sent().CollectPcHandler]}}))}))}})},913812:function(e,t,n){n.r(t),n.d(t,{ICommonLoaderFeature:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=Symbol.for("feature:".concat(o.C.CommonLoader));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,79842))];case 1:return[2,e.sent().CommonLoaderHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:s})})},515772:function(e,t,n){n.r(t),n.d(t,{IFastEditFeature:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=Symbol.for("feature:".concat(o.C.FastEdit));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,n.e(8887).then(n.bind(n,436923))];case 1:return[2,e.sent().FastEditHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level2],key:s,platforms:[a.Ev.Mobile,a.Ev.Pad]})})},756897:function(e,t,n){n.r(t),n.d(t,{IHelpCenterFeature:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=(n(495155),Symbol.for("feature:".concat(o.C.HelpCenter)));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,60563))];case 1:return[2,e.sent().HelpCenterHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:s,platforms:[a.Ev.Pc],load:!0})})},751732:function(e,t,n){n.r(t),n.d(t,{IInactivityGuideFeature:function(){return u},IInactivityGuideMobileFeature:function(){return c}});var r=n(839461),i=n(508436),o=n(259356),a=n(293325),s=n(870372),u=Symbol.for("feature:".concat(s.C.InactivityGuide));o.Ln.merge(u,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,857726))];case 1:return[2,e.sent().InactivityGuideHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:u,platforms:[a.Ev.Pc,a.Ev.Pad]})});var c=Symbol.for("feature:".concat(s.C.InactivityGuideMobile));o.Ln.merge(c,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,n.e(8555).then(n.bind(n,870616))];case 1:return[2,e.sent().InactivityGuideMobileHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:c,platforms:[a.Ev.Mobile],load:i.default.isMiniProgram})})},830447:function(e,t,n){n.r(t),n.d(t,{IPrintFeature:function(){return u},TriggerType:function(){return r}});var r,i=n(839461),o=n(259356),a=n(870372),s=n(293325),u=Symbol.for("feature:".concat(a.C.Print));!function(e){e[e.SHCORTCUT_TRIGGER=1]="SHCORTCUT_TRIGGER",e[e.BUTTON_TRIGGER=2]="BUTTON_TRIGGER",e[e.AUTO_TRIGGER=3]="AUTO_TRIGGER"}(r||(r={})),o.Ln.merge(u,{useFactory:function(){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,838228))];case 1:return[2,e.sent().PrintHandler]}}))}))},on:s.iz.On({stages:[s.YV.Level4],key:u,platforms:[s.Ev.Pc]})})},387090:function(e,t,n){n.r(t),n.d(t,{IResumeGuideFeature:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=Symbol.for("feature:".concat(o.C.ResumeGuide));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,12602))];case 1:return[2,e.sent().ResumeGuideHandler]}}))}))},on:a.iz.On({key:s,stages:[a.YV.Level4],platforms:[a.Ev.Pc]})})},894237:function(e,t,n){n.r(t),n.d(t,{ISubscribeFeature:function(){return u},MELO_DATA_CHANGED_EVENT:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=(n(495155),"Melo_setPadRev"),u=Symbol.for("feature:".concat(o.C.Subscribe));i.Ln.merge(u,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,911649))];case 1:return e=t.sent().SubscribeHandler,i.Am.get(u),[2,e]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:u,platforms:[a.Ev.Pc,a.Ev.Mobile,a.Ev.Pad],load:!0})})},352462:function(e,t,n){n.r(t),n.d(t,{ITextFlowFeature:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=Symbol.for("feature:".concat(o.C.TextFlow));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(5597),n.e(9820),n.e(7797),n.e(5049),n.e(8063),n.e(823),n.e(3974),n.e(4397),n.e(7021),n.e(7131)]).then(n.bind(n,216079))];case 1:return[2,e.sent().TextFlowHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level3],key:s})})},395028:function(e,t,n){n.r(t),n.d(t,{ITranslateFeature:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=Symbol.for("feature:".concat(o.C.Translate));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,882619))];case 1:return[2,e.sent().TranslateHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:s,platforms:[a.Ev.Pc]})})},989640:function(e,t,n){n.r(t),n.d(t,{IUnreadNotifyHandler:function(){return s}});var r=n(839461),i=n(259356),o=n(870372),a=n(293325),s=Symbol.for("feature:".concat(o.C.UnreadNotify));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,959969))];case 1:return[2,e.sent().UnreadNotifyHandler]}}))}))},on:a.iz.On({stages:[a.YV.Level4],key:s,platforms:[a.Ev.Pc]})})},739103:function(e,t,n){n.r(t),n.d(t,{IVipFeature:function(){return s}});var r=n(839461),i=(n(495155),n(259356)),o=n(293325),a=n(870372),s=Symbol.for("feature:".concat(a.C.Vip));i.Ln.merge(s,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(8487),n.e(5597),n.e(9820),n.e(1315),n.e(6922),n.e(6205),n.e(823),n.e(9111),n.e(1997),n.e(9140),n.e(9700),n.e(9445)]).then(n.bind(n,524687))];case 1:return[2,e.sent().VipHandler]}}))}))},on:o.iz.On({key:s,stages:[o.YV.Level4],load:!0})})},189333:function(e,t,n){n.d(t,{W:function(){return o}});var r=n(839461),i=n(669144),o={isLoad:!1,instance:{GenerateSVG:void 0,WatermarkGenerate:void 0,DEFAULT_GENERATE_WATERMARK_RESULT:void 0,WatermarkDialogManager:void 0,InvokingDialogInfoType:void 0,checkIsLegal:void 0},get:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return this.isLoad?[2,this.instance]:[2,this.load()]}))}))},load:function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,t,o,a,s,u,c,l,d,f;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return i.W.isWeworkEnv?[4,n.e(264).then(n.bind(n,502271))]:[3,2];case 1:return e=r.sent(),t=e.GenerateEnterpriseSVG,o=e.EnterpriseWatermarkBg,f=e.checkIsLegal,this.instance.GenerateSVG=t,this.instance.WatermarkGenerate=o,this.instance.checkIsLegal=f,[3,4];case 2:return[4,n.e(5203).then(n.t.bind(n,29016,23))];case 3:a=r.sent(),s=a.GenerateSVG,u=a.WatermarkGenerate,c=a.DEFAULT_GENERATE_WATERMARK_RESULT,l=a.WatermarkDialogManager,d=a.InvokingDialogInfoType,f=a.checkIsLegal,this.instance.GenerateSVG=s,this.instance.WatermarkGenerate=u,this.instance.DEFAULT_GENERATE_WATERMARK_RESULT=c,this.instance.WatermarkDialogManager=l,this.instance.InvokingDialogInfoType=d,this.instance.checkIsLegal=f,r.label=4;case 4:return this.isLoad=!0,[2,this.instance]}}))}))}}},450119:function(e,t,n){n.d(t,{s:function(){return b},j:function(){return y}});var r=n(839461),i=n(495155),o=n(750670),a=n(189333),s=n(136454),u=n(218581),c=793,l={watermarkFontColor:"#999999",watermarkFontFamily:(0,u.$t)("微软雅黑"),watermarkFontSize:14},d=n(64503),f=n(669144),p=n(870372),v=n(201463),h=n(259356),m=n(45972),g={watermark:"",pageSize:"",watermarkUsersDocs:""},y="[watermark]: ",b=function(){function e(){this.watermarkGenerateStorage=d.g.getInstance()}var t;return e.prototype.isShowVisitorToast=function(e){var t,n;try{if(1!==(null===(n=null===(t=JSON.parse(e))||void 0===t?void 0:t.s)||void 0===n?void 0:n.private))return!0;var r="".concat((0,s.Yi)().userId,"-").concat((0,s.Yi)().globalPadId,":watermark-visitor-toast-closed");return"true"!==localStorage.getItem(r)&&(localStorage.setItem(r,"true"),!0)}catch(e){return!0}},e.prototype.generate=function(e,t,n){return(0,r.__awaiter)(this,void 0,Promise,(function(){return(0,r.__generator)(this,(function(r){try{return[2,this.generateByComponent(e,t,n)]}catch(e){return i.Logger.error(y,"processError",e),[2,null]}return[2]}))}))},e.prototype.generateByCGI=function(e,t,n){return(0,r.__awaiter)(this,void 0,Promise,(function(){var a,s;return(0,r.__generator)(this,(function(u){switch(u.label){case 0:return a=e.globalPadId,[4,new Promise((function(e){$.ajax({method:"POST",url:"/watermark/get",data:{padID:a},success:function(t){e(JSON.stringify(t.data))},error:function(e,t,n){console.error(e,t,n),o.ReportHelper.weiMonitorCube({module:o.ICubeModule.Feature,name:p.C.Watermark,code:Number(t),action:"[cgi]watermarkGgiFail",msg:"xhr: ".concat(JSON.stringify(e),", status: ").concat(t,", errorThrown: ").concat(n)}),i.Logger.error(y,"cgiError",{xhr:e,status:t,errorThrown:n})}})}))];case 1:return s=u.sent(),[2,this.generateByComponent((0,r.__assign)((0,r.__assign)({},e),{watermark:s}),t,n)]}}))}))},e.prototype.generateByComponent=function(e,t,n){var s;return(0,r.__awaiter)(this,void 0,Promise,(function(){var u,d,p,h,m,y,b,E,_,w,S,k,x;return(0,r.__generator)(this,(function(I){switch(I.label){case 0:if(u=e.watermark,d=this.contextService.context.editor.currentLayoutType,!u)return[2,null];if(p={isAuthor:e.isCreator,userName:e.userName,userDomain:e.userDomain,isWxUser:!f.W.isEntAccount},h=void 0,m=void 0,y=void 0,(0,o.isWebLayout)(d))try{b=(0,v.yK)(),n=b.width,y=b.fontSize,h=b.denseLineHeightRatio,m=b.looseLineHeightRatio}catch(e){console.error("web layout watermark paras error: ",e)}return E={width:n||c},u=this.parseOption(u),g.watermark===u&&g.pageSize===JSON.stringify(E)&&g.watermarkUsersDocs===JSON.stringify(p)&&this.watermarkGenerateStorage.get(t)?[2,null!==(s=this.watermarkGenerateStorage.get(t))&&void 0!==s?s:null]:[4,a.W.get()];case 1:return _=I.sent(),w=_.GenerateSVG,S=_.DEFAULT_GENERATE_WATERMARK_RESULT,k=!f.W.isWeworkEnv&&this.isShowVisitorToast(u||""),x=void 0===S?w.watermarkGetSVG(u,p):w.watermarkGetSVG(u,E,p,(0,r.__assign)((0,r.__assign)({},l),{watermarkFontSize:null!=y?y:l.watermarkFontSize,denseLineHeightRatio:h,looseLineHeightRatio:m,isShowVisitorToast:k})),this.watermarkGenerateStorage.put(t,x),g.watermark=u||"",g.pageSize=JSON.stringify(E),g.watermarkUsersDocs=JSON.stringify(p),i.Logger.info("watermark lastGenerageOptions: ",g),[2,x||S]}}))}))},e.prototype.parseOption=function(e){if(e){var t=JSON.parse(e),n=(0,r.__assign)((0,r.__assign)({type:"text",text:"",marginType:0,selfHide:0,show:0},t),{s:(0,r.__assign)({private:0},t.s)});return window.clientVars.watermark=JSON.stringify(n),JSON.stringify(n)}},(0,r.__decorate)([(0,h.tB)(),(0,r.__metadata)("design:type","function"==typeof(t=void 0!==m.O&&m.O)?t:Object)],e.prototype,"contextService",void 0),e}()},64503:function(e,t,n){n.d(t,{g:function(){return r}});var r=function(){function e(){this.watermarkStorageMap=new Map}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.put=function(e,t){this.watermarkStorageMap&&this.watermarkStorageMap.set(e,t)},e.prototype.remove=function(e){this.watermarkStorageMap.get(e)&&this.watermarkStorageMap.delete(e)},e.prototype.clear=function(){this.watermarkStorageMap.clear()},e.prototype.get=function(e){if(this.watermarkStorageMap.get(e))return this.watermarkStorageMap.get(e)},e.prototype.length=function(){return this.watermarkStorageMap.size},e}()},82965:function(e,t,n){n.r(t),n.d(t,{IZoomBaseFeature:function(){return a}});var r=n(839461),i=n(259356),o=n(870372),a=Symbol.for("feature:".concat(o.C.ZoomBase));i.Ln.merge(a,{useFactory:function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,n.e(2096).then(n.bind(n,581559))];case 1:return[2,e.sent().ZoomBaseHandler]}}))}))}})},210454:function(e,t,n){n.d(t,{I:function(){return u},f:function(){return c}});var r=n(87363),i=n.n(r),o=n(320023),a=i().lazy((function(){return n.e(4121).then(n.bind(n,574121)).then((function(e){return{default:e.RenderEmbeddedObjectWrapper}}))})),s=(0,o.Z)(a);function u(){return function(e,t,n){return i().createElement(s,{context:n,layoutBox:e,containerFocus:t})}}function c(){return function(e,t,n){return i().createElement(s,{context:n,layoutBox:e,containerFocus:t})}}},320864:function(e,t,n){n.d(t,{A:function(){return d},HJ:function(){return f},N5:function(){return l}});var r=n(839461),i=n(87363),o=n.n(i),a=n(750670),s=n(907527),u="tdocs-shading-bg",c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={type:t.type,value:t.value},n}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.context.on(s.J.PageShadeChanged,(function(t){t.shadeType===e.state.type&&t.shadeValue===e.state.value||e.setState({type:t.shadeType,value:t.shadeValue})}),this)},t.prototype.componentWillUnmount=function(){this.props.context.removeListener(s.J.PageShadeChanged,this)},t.prototype.render=function(){var e={},t="".concat(u," shading-bg");return this.state.type===a.STShadingType.none?(e.backgroundImage="",e.backgroundColor="#FFFFFF00"):this.state.type===a.STShadingType.color?(e.backgroundImage="",e.backgroundColor=this.state.value):this.state.type===a.STShadingType.texture&&(e.backgroundColor="#FFFFFF",t+=" ".concat(this.state.value)),o().createElement("div",{className:t,style:(0,r.__assign)({},e)})},t}(o().Component);function l(e){var t=e.getShadingProperty();return{type:t.shadingType,value:t.shadingValue||""}}function d(e){return function(){var t=l(e);return[o().createElement(c,{key:"pageshade",context:e,type:t.type,value:t.value}),{order:a.PageOrderType.Back}]}}function f(e,t){var n=l(e);return o().createElement(o().Fragment,null,o().createElement(c,{key:"pageshade",context:e,type:n.type,value:n.value}),t)}},907527:function(e,t,n){n.d(t,{J:function(){return r},r:function(){return a}});var r,i=n(839461),o=n(495155);!function(e){e.PageShadeChanged="PageShadeChanged"}(r||(r={}));var a=function(e){function t(t,n){var i=e.call(this,r.PageShadeChanged)||this;return i.shadeType=t,i.shadeValue=n,i}return(0,i.__extends)(t,e),t}(o.Notification)},707534:function(e,t,n){n.d(t,{kJ:function(){return g},le:function(){return m},qF:function(){return y}});var r=n(839461),i=n(87363),o=n.n(i),a=n(750670),s=n(495155),u=n(189333),c=n(450119),l=n(64503),d=n(225628),f=n(545166),p=n(317999),v=n(259356),h=n(947229),m=function(e){function t(t){var n=e.call(this,t)||this;return n.handleVisibilityChange=function(){"visible"===document.visibilityState&&n.generateWatermark()},n.updateWatermark=function(e){if(null==e?void 0:e.watermark){var t=n.watermarkGenerateStorage.get(n.id);t&&n.setState((0,r.__assign)({},t))}},n.watermarkGenerateStorage=l.g.getInstance(),n.state={},n}var n,i;return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.generateWatermark(),this.props.context.on(d.d.WatermarkChanged,this.updateWatermark,this)},t.prototype.componentWillUnmount=function(){this.props.context.removeListener(d.d.WatermarkChanged,this)},t.prototype.generateWatermark=function(){var e=this;try{var t=this.props.clientVars;this.id=t.globalPadId+t.uin,u.W.get().then((function(t){var n=t.WatermarkGenerate;e.setState({WatermarkGenerate:n})}));var n=t.userName;p.A.isMeetingEnv()&&this.wemeetHostInfoService.hostInfo.subscribe((function(e){n=e.name})),(new c.s).generate((0,r.__assign)((0,r.__assign)({},t),{userName:n}),this.id).then((function(t){t&&e.setState((0,r.__assign)({},t))})).finally((function(){e.eventEmitter.emit("watermarkRendered",{time:Date.now()})}))}catch(e){s.Logger.error(c.j,"renderError",e),this.eventEmitter.emit("watermarkRendered",{time:Date.now()})}},t.prototype.render=function(){var e=this.state,t=e.WatermarkGenerate,n=(0,r.__rest)(e,["WatermarkGenerate"]);return t?o().createElement(t,(0,r.__assign)({key:"watermark"},n)):null},(0,r.__decorate)([(0,v.tB)(),(0,r.__metadata)("design:type","function"==typeof(n=void 0!==f.k&&f.k)?n:Object)],t.prototype,"wemeetHostInfoService",void 0),(0,r.__decorate)([(0,v.tB)(),(0,r.__metadata)("design:type","function"==typeof(i=void 0!==h.v&&h.v)?i:Object)],t.prototype,"eventEmitter",void 0),t}(o().PureComponent);function g(e){return function(t){return[o().createElement(m,{key:"watermark",clientVars:window.clientVars,context:e,width:(0,s.twipsToPx)(t.rect.width)}),{order:a.PageOrderType.Front}]}}function y(e){var t=(0,r.__read)((0,i.useState)(e.clientVars),2),n=t[0],a=t[1];return(0,i.useEffect)((function(){n||e.clientVarsPromise.then((function(e){a(e)}))}),[n,e.clientVarsPromise]),o().createElement(o().Fragment,null,e.children,n&&o().createElement(m,{key:"watermark",context:e.editor,clientVars:n}))}},225628:function(e,t,n){n.d(t,{d:function(){return r},v:function(){return a}});var r,i=n(839461),o=n(495155);!function(e){e.WatermarkChanged="WatermarkChanged"}(r||(r={}));var a=function(e){function t(t){var n=e.call(this,r.WatermarkChanged)||this;return n.watermark=t,n}return(0,i.__extends)(t,e),t}(o.Notification)},582918:function(e,t,n){n.d(t,{E:function(){return a}});var r=n(839461),i=n(826973),o=n(515238),a=function(){function e(){var e=this;this.collabUserInfo=new Map,this.joinUserInfo=new o.xQ,this.leaveUserInfo=new o.xQ,this.joinUserInfo.subscribe((function(t){t.forEach((function(t){var n=(0,r.__read)(t.userId.split("."),2)[1];e.collabUserInfo.set(n,t)}))})),this.leaveUserInfo.subscribe((function(t){var n=t.userId,i=(0,r.__read)(n.split("."),2)[1];e.collabUserInfo.delete(i)}))}return e.prototype.getUserInfos=function(){return this.collabUserInfo},e.prototype.getUserInfoByUid=function(e){return this.collabUserInfo.get(e)},e.prototype.getUserNameByUid=function(e){var t;return null===(t=this.getUserInfoByUid(e))||void 0===t?void 0:t.name},e.prototype.getJoinUserInfos=function(){return this.joinUserInfo},e.prototype.getLeaveUserInfos=function(){return this.leaveUserInfo},e.prototype.$onReset=function(){this.joinUserInfo.unsubscribe(),this.leaveUserInfo.unsubscribe()},e=(0,r.__decorate)([(0,i.t)(),(0,r.__metadata)("design:paramtypes",[])],e)}()},545166:function(e,t,n){n.d(t,{k:function(){return f}});var r=n(839461),i=n(515238),o=n(949595),a=n(30521),s=n(259356),u=n(826973),c=n(317999),l=n(582918),d=n(116896),f=function(){function e(){this.hostInfo=new i.xQ,this.currentUid=new o.X(""),this.searchingUid=void 0}var t;return Object.defineProperty(e.prototype,"uid",{set:function(e){var t=this;if(this.currentUid.getValue()!==e&&e&&this.searchingUid!==e){c.A.isTencentMeetingInWework()&&a.wdocsUserCenter.queryUserInfo([e]).then((function(n){var i=(0,r.__read)(n,1)[0];t.setHostInfo({userName:i.name,userPic:d.Lk.getAuthCdnUrl(i.avatar),corpName:i.corp_name}),t.currentUid.next(e)}));var n=this.collabUserInfoService.getUserInfoByUid(e);if(n)return this.setHostInfo(n),void this.currentUid.next(e);this.searchingUid=e;var i=this.collabUserInfoService.getJoinUserInfos();i.subscribe((function(n){n.forEach((function(n){n.uin===e&&(t.setHostInfo(n),t.currentUid.next(e),i.unsubscribe(),t.searchingUid=void 0)}))}))}},enumerable:!1,configurable:!0}),e.prototype.setHostInfo=function(e){this.hostInfo.next(e)},e.prototype.$onReset=function(){this.hostInfo.unsubscribe(),this.currentUid.unsubscribe()},(0,r.__decorate)([(0,s.tB)(),(0,r.__metadata)("design:type","function"==typeof(t=void 0!==l.E&&l.E)?t:Object)],e.prototype,"collabUserInfoService",void 0),e=(0,r.__decorate)([(0,u.t)()],e)}()},999864:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(338104),i=n(815892).h,o=r.__importStar(n(87363)),a=r.__importDefault(n(661533)),s=n(374114),u=r.__importDefault(n(190315)),c=n(418494),l=n(206159),d=n(233991),f={left:"0px",top:"0px"},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootRef=o.createRef(),t.overlayContainerRef=o.createRef(),t.forceRenderDom=!1,t.cancelPositionChangeChecker=null,t.state={currentVisible:!!t.props.defaultVisible,position:f},t.show=function(){t.props.disabled||(t.forceRenderDom=!0,t.setState({position:f},(function(){t.runVisibleEffects(),t.setStateVisible(!0),t.forceRenderDom=!1})))},t.hide=function(){clearTimeout(t.showTimeout),t.isVisible()&&t.setStateVisible(!1)},t.toggle=function(){t.props.disabled||(t.isVisible()?t.hide():t.show())},t.handleClickAnchor=function(){var e=t.props,n=e.trigger,r=e.hideOnClick;"click"===n?t.toggle():"hover"===n&&r&&t.hide()},t.handleMouseDownAnchor=function(){var e=t.props,n=e.trigger;e.hideOnMouseDown&&"hover"===n&&t.hide()},t.handleMouseEnter=function(){clearTimeout(t.hideTimeout),clearTimeout(t.showTimeout),t.showTimeout=setTimeout(t.show,"object"==typeof t.props.hoverDelay?t.props.hoverDelay.show:t.props.hoverDelay)},t.handleMouseLeave=function(){clearTimeout(t.showTimeout),t.hideTimeout=setTimeout(t.hide,"object"==typeof t.props.hoverDelay?t.props.hoverDelay.hide:t.props.hoverDelay)},t.themedRender=function(e){var n,o=t.props,s=o.className,c=o.style,d=o.prefixCls,f=o.placement,p=o.children,v=o.overlayClassName,h=o.overlayStyle,m=o.trigger,g=o.offset,y=o.zIndex,b=o.containerClassName,E=o.containerStyle,_=o.destroyOnClose,w=o.overlayHoverable,S=o.containerDom,k=e(d,s,d+"-wrapper"),x=e(d+"-content",v),I=r.__assign(r.__assign({},h),{transform:"translate"+("top"===f||"bottom"===f?"X":"Y")+"("+g+"px)"}),C=t.isVisible(),T=e(d+"-container",b,((n={})[d+"-container-visible"]=C,n)),O=!t.forceRenderDom&&_&&!l.decideKeepDom.call(t,200,C),P="";return"hover"===m&&(P=w?"outer":"inner"),i(u.default,{className:k,style:c,action:t.hide,disabled:"click"!==m},i("div",{onMouseEnter:"outer"===P?t.handleMouseEnter:void 0,onMouseLeave:"outer"===P?t.handleMouseLeave:void 0,ref:t.rootRef},i("div",{onClick:t.handleClickAnchor,onMouseDown:t.handleMouseDownAnchor,onMouseEnter:"inner"===P?t.handleMouseEnter:void 0,onMouseLeave:"inner"===P?t.handleMouseLeave:void 0},p),O?null:a.default.createPortal(i("div",{className:T,ref:t.overlayContainerRef,style:r.__assign(r.__assign({zIndex:y},E),t.state.position)},i("div",{className:x,style:I,"aria-atomic":!0,"aria-live":"assertive"},t.renderTitle(e))),S||document.body)))},t}return r.__extends(t,e),t.getDerivedStateFromProps=function(e,t){return e.disabled?{currentVisible:!1}:null},t.prototype.componentDidMount=function(){this.isVisible()&&this.runVisibleEffects()},t.prototype.componentWillUnmount=function(){var e;null===(e=this.cancelPositionChangeChecker)||void 0===e||e.call(this),clearTimeout(this.showTimeout),clearTimeout(this.hideTimeout)},t.prototype.componentDidUpdate=function(e){var t;!e.visible&&this.props.visible&&this.runVisibleEffects(),this.isVisible()||null===(t=this.cancelPositionChangeChecker)||void 0===t||t.call(this)},t.prototype.isVisible=function(){var e=this.props,t=e.visible;if(e.disabled)return!1;var n=this.state.currentVisible;return"boolean"==typeof t?t:n},t.prototype.setStateVisible=function(e){this.setState({currentVisible:e}),this.props.onVisibleChange(e)},t.prototype.runVisibleEffects=function(){var e=this;this.setState({position:this.calcOverlayPosition()},(function(){requestAnimationFrame((function(){var t;null===(t=e.cancelPositionChangeChecker)||void 0===t||t.call(e),e.cancelPositionChangeChecker=d.checkPositionChange(e.rootRef.current,e.hide)}))}))},t.prototype.calcStartPositionByAlignment=function(e,t,n){switch(this.props.alignment){case"start":return e;case"center":return(e+t-n)/2;case"end":return t-n;default:return 0}},t.prototype.calcOverlayPosition=function(){var e=this.rootRef.current,t=this.overlayContainerRef.current;if(!e||!t)return{left:"0px",top:"0px"};var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=this.props.placement;if("string"==typeof i)return this.calcOverlayPositionByPlacement(n,r,i).position;for(var o=0,a=i;o<a.length;o++){var s=a[o],u=this.calcOverlayPositionByPlacement(n,r,s),c=u.position;if(u.canFitIn)return c}return this.calcOverlayPositionByPlacement(n,r,i[0]).position},t.prototype.calcOverlayPositionByPlacement=function(e,t,n){var r=e.left,i=e.right,o=e.top,a=e.bottom,u=t.width,c=t.height,l=this.props,d=l.containerOffsetX,f=l.containerOffsetY;"bottom"!==n&&"top"!==n||(d+=this.calcStartPositionByAlignment(r,i,u)),"left"===n&&(d+=r-4-u),"right"===n&&(d+=i+4);var p=s.castInto(d,[2,innerWidth-u-2]);"left"!==n&&"right"!==n||(f+=this.calcStartPositionByAlignment(o,a,c)),"top"===n&&(f+=o-8-c),"bottom"===n&&(f+=a+8);var v=s.castInto(f,[2,innerHeight-c-2]);return{position:{left:p+"px",top:v+"px"},canFitIn:p===d&&v===f}},t.prototype.renderTitle=function(e){var t=this.props,n=t.prefixCls,r=t.title;return Array.isArray(r)&&r.every((function(e){return"string"==typeof e}))?i("div",{className:e(n+"-title-multiline")},r.map((function(e,t){return i("div",{key:t},e)}))):r},t.prototype.render=function(){return c.consumeTheme(this.themedRender)},t}(o.Component);t.default=p,p.defaultProps={prefixCls:"dui-tooltip",title:"",placement:"bottom",trigger:"hover",onVisibleChange:s.emptyFn,disabled:!1,offset:0,containerOffsetX:0,containerOffsetY:0,destroyOnClose:!0,alignment:"center",hoverDelay:400,hideOnClick:!1,hideOnMouseDown:!1,overlayHoverable:!0}},129602:function(e,t,n){t.u=void 0;var r=n(338104);n(304372).D("components/Tooltip/style/index.css",'@-webkit-keyframes dui-tooltip-fade-in{0%{opacity:0}to{opacity:1}}@keyframes dui-tooltip-fade-in{0%{opacity:0}to{opacity:1}}[data-dui-1-2-0~="dui-tooltip-wrapper"]{display:inline-block;position:relative}[data-dui-1-2-0~="dui-tooltip-container"]{position:fixed;visibility:hidden;-webkit-transition-property:opacity,visibility;transition-property:opacity,visibility;-webkit-transition-duration:.2s;transition-duration:.2s;-webkit-transition-timing-function:linear;transition-timing-function:linear;z-index:10002;opacity:0;-webkit-animation:dui-tooltip-fade-in .2s linear;animation:dui-tooltip-fade-in .2s linear;font-size:medium}[data-dui-1-2-0~="dui-tooltip-container-visible"]{visibility:visible;opacity:1}[data-dui-1-2-0~="dui-tooltip-content"]{display:inline-block;padding:7px 12px;font-size:12px;line-height:18px;border:1px solid rgba(0,0,0,.1);border-radius:4px;color:var(--text-ultrastrong,rgba(0,0,0,.88));-webkit-box-shadow:0 6px 32px 2px rgba(68,73,77,.16),0 4px 6px 2px rgba(0,0,0,.04);box-shadow:0 6px 32px 2px rgba(68,73,77,.16),0 4px 6px 2px rgba(0,0,0,.04);word-break:break-word;background-color:var(--bg-lv4-default,#fff)}[data-dui-1-2-0~="dui-tooltip-title-multiline"]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column nowrap;-ms-flex-flow:column nowrap;flex-flow:column nowrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;line-height:16px}');var i=r.__importDefault(n(999864));t.u=i.default,t.ZP=i.default},106383:function(e,t,n){function r(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}n.d(t,{Z:function(){return r}})},734128:function(e,t,n){function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{Z:function(){return i}})},618600:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(981879),i=n(539166),o=n(145429),a=n(106383),s=n(734128),u=n(87363),c=n.n(u),l=n(661533),d=n.n(l),f=!1,p=n(190042),v="unmounted",h="exited",m="entering",g="entered",y="exiting",b=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=h,r.appearStatus=m):i=g:i=t.unmountOnExit||t.mountOnEnter?v:h,r.state={status:i},r.nextCallback=null,r}(0,o.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===v?{status:h}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==m&&n!==g&&(t=m):n!==m&&n!==g||(t=y)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===m?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===h&&this.setState({status:v})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[d().findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||f?this.safeSetState({status:g},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:m},(function(){t.props.onEntering(o,a),t.onTransitionEnd(u,(function(){t.safeSetState({status:g},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:d().findDOMNode(this);t&&!f?(this.props.onExit(r),this.safeSetState({status:y},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:h},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:h},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:d().findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===v)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,i.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return c().createElement(p.Z.Provider,{value:null},"function"==typeof n?n(e,r):c().cloneElement(c().Children.only(n),r))},t}(c().Component);function E(){}b.contextType=p.Z,b.propTypes={},b.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:E,onEntering:E,onEntered:E,onExit:E,onExiting:E,onExited:E},b.UNMOUNTED=v,b.EXITED=h,b.ENTERING=m,b.ENTERED=g,b.EXITING=y;var _=b,w=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.Z)(e,t)}))},S=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}(0,o.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.Z)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&w(e,r),i&&w(e,i),o&&w(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.Z)(e,["classNames"]));return c().createElement(_,(0,r.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c().Component);S.defaultProps={classNames:""},S.propTypes={};var k=S},190042:function(e,t,n){var r=n(87363),i=n.n(r);t.Z=i().createContext(null)},19589:function(e,t,n){n.d(t,{R:function(){return o}});var r=n(338104),i=n(259356),o=function(e){function t(){var t=e.apply(this,(0,r.__spreadArray)([],(0,r.__read)(arguments),!1))||this;return t.isReady=!1,t}return(0,r.__extends)(t,e),t.prototype.getModule=function(){var t=Object.create(null,{getModule:{get:function(){return e.prototype.getModule}}});return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getModule.call(this)];case 1:return e=r.sent(),("feature"!==(n=i.ll.get(this.key)).type||n.mounted)&&(this.isReady=!0),[2,e]}}))}))},t}(i.RU)},731911:function(e,t,n){n.d(t,{M:function(){return p}});var r=n(338104),i=n(259356),o=n(797811),a=n(137600),s=n(996391),u=function(){function e(e){var t=this;this.id=e,this.onBlur=function(){t.surfaceService.onBlur(t.id)},this.onFocus=function(){t.surfaceService.onFocus(t.id)},this.onDataChange=function(){t.shouldTrigger()&&t.store.update(s.j.ModelTempState,{editor:t.id})},this.onSelectionChange=function(e){t.shouldTrigger()&&t.store.update(s.j.SelectionTempState,{editor:t.id,offset:e})},this.isReady=!1}return e.prototype.shouldTrigger=function(){var e,t=this.store.getValue(s.j.FocusState);return!((null===(e=null==t?void 0:t.current)||void 0===e?void 0:e.id)!==this.id||!this.isReady)},e.prototype.ready=function(){this.isReady=!0},e}();(0,r.__decorate)([(0,i.tB)(),(0,r.__metadata)("design:type",o.W)],u.prototype,"surfaceService",void 0),(0,r.__decorate)([(0,i.tB)(),(0,r.__metadata)("design:type",a.O)],u.prototype,"store",void 0);var c=n(826973),l=n(835640),d=Symbol("service:workbench"),f=n(507342),p=function(){function e(e,t){this.surfaceService=e,this.store=t}return e.prototype.open=function(e,t){var n;return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,a,s,c,l,d,p,v;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return o=i.Am.get(e),a=null===(n=o.renderEditorContentToString)||void 0===n?void 0:n.call(o),c=document.createElement("div"),t.mode||t.target||t.floatStyle?s=this.surfaceService.createSync(t.mode,t.target,t.floatStyle,a):(l=t.modeOptions||{gridType:"horizontal"},s=this.surfaceService.createSync(l,a)),s?(d=s.id,c.setAttribute("data-surface-id",d),c.setAttribute("style","height: 100%"),p=new u(d),f.s?[3,2]:[4,o.attachEditor(c,p,t.content)]):[2,Promise.reject()];case 1:return v=r.sent(),[3,4];case 2:return o.getServerSideEditor?[4,o.getServerSideEditor()]:[3,4];case 3:v=r.sent(),r.label=4;case 4:return this.surfaceService.addEditor(d,v,o),this.appendEditorDomAndFocus(s,t,c),this.callOpenEditorHookForFeatures(o,v),p.ready(),[2,{id:d,editor:v}]}}))}))},e.prototype.callOpenEditorHookForFeatures=function(e,t){var n=this;l.j.forEach((function(r){r.adapters.includes(e.toString())&&n.isFeatureEnabled(r)&&r.mounted&&(r.onOpen(),i.Am.emitAt("$onEditorOpen",r.provide,t))}))},e.prototype.appendEditorDomAndFocus=function(e,t,n){var r=this;t.noFocus||this.surfaceService.setCurrent(e.id),e.stream.asObservable().subscribe((function(i){i.firstElementChild!==n&&(i.appendChild(n),t.noFocus||r.restoreFocus(e)),e.dom=i}))},e.prototype.restoreFocus=function(e){var t,n=this.surfaceService.getAdapter(e.id),r=this.surfaceService.getEditor(e.id);if(e.dom){var i=null===(t=this.surfaceService.getCurrent())||void 0===t?void 0:t.id;i&&i===e.id&&!0===e.focusStream.getValue()&&(null==n||n.requestFocus(r))}else null==n||n.requestFocus(r)},e.prototype.openSync=function(e,t){var n=i.Am.get(o.W),r=i.Am.get(e),a=t.surface,s=n.get(a).dom;if(!s)throw Error("Surface dom is not exist");var c=new u(a),l=r.attachEditor(s,c,t.content);return n.addEditor(a,l,r),t.noFocus||(r.requestFocus(l),n.onFocus(a)),this.callOpenEditorHookForFeatures(r,l),c.ready(),{id:a,editor:l}},e.prototype.close=function(e){var t=i.Am.get(o.W),n=t.getEditor(e),r=t.getAdapter(e);n&&r&&(l.j.forEach((function(e){e.isNotClosed()&&e.adapters.includes(r.toString())&&(e.onClose(),i.Am.emitAt("$onEditorClose",e.provide,n))})),t.close(e))},e.prototype.isFeatureEnabled=function(e){var t,n,r=e.name||e.className;return!(null!==(n=r&&(null===(t=this.store.getValue(s.j.FeatureStatus))||void 0===t?void 0:t.has(r)))&&void 0!==n&&n)},e}();p=(0,r.__decorate)([(0,c.t)({provide:d}),(0,r.__metadata)("design:paramtypes",[o.W,a.O])],p)}}]),"object"==typeof globalThis&&(globalThis.jsExecEndTimeStamp=Date.now(),globalThis.cachedPerformanceEntries||(globalThis.cachedPerformanceEntries=[]),globalThis.cachedPerformanceEntries.push({name:"jsExec: js/public-9700-593b33b4.js",entryType:"jsExec",startTime:globalThis.jsExecStartTimeStamp,endTime:globalThis.jsExecEndTimeStamp}));
//# sourceMappingURL=public-9700-593b33b4.js.map